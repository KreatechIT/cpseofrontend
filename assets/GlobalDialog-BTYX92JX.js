import{c as je,q as H,u as V,as as J,w as i,X as Vt,B as me,a2 as zn,C as Xt,at as Yl,t as le,v as D,au as Ze,av as fn,y as be,aw as Xl,ax as Ql,ay as Be,s as A,r as C,az as uo,aA as Zl,aB as ec,aC as tc,a3 as ce,a1 as te,aD as nc,Y as ze,aE as he,aF as sc,aG as Q,aH as et,aI as ct,J as ve,aJ as rc,aK as ic,aL as ac,ag as dt,aa as fe,aM as oc,aN as lc,aO as cc,aP as dc,al as tr,ai as nr,aQ as dn,aR as un,ah as it,ak as at,aS as uc,aT as mc,aU as di,aV as fc,aW as pc,aX as hc,aY as ns,aZ as gc,a_ as bc,a$ as xc,b0 as yc,b1 as _c,b2 as vc,b3 as jc,b4 as Nc,b5 as wc,b6 as mo,b7 as _s,b8 as Sc,b9 as fo,ba as po,bb as pe,bc as Cc,bd as ho,be as Wi,bf as Qt,bg as kc,bh as Ac,bi as Ec,bj as ui,bk as Rc,bl as on,S as pn,U as hn,bm as mi,af as fi,ad as pi,bn as Mc,a8 as Tc,bo as Dc,bp as Vn,bq as go,br as bo,bs as Kt,bt as Ic,bu as xo,bv as Lc,bw as $c,bx as Oc,by as qc,bz as zc,bA as zt,bB as Pt,bC as Kn,bD as gn,bE as Jn,bF as sr,bG as Pc,bH as yo,bI as Bc,bJ as rr,bK as hi,bL as Gn,bM as ir,bN as ar,bO as gi,ae as _o,bP as bi,bQ as Hc,bR as Fc,bS as Wc,bT as Yn,bU as Uc,R as Ce,bV as kn,E as Lr,I as $r,z as Vc,F as Ui,T as Kc,H as Jc,bW as Gc,bX as Yc,bY as Xc,bZ as Qc,b_ as Zc,b$ as ed,c0 as td,c1 as nd,c2 as sd,c3 as rd,c4 as xi,c5 as id,c6 as ad,c7 as vo,c8 as od,c9 as ld,ca as cd,cb as dd,cc as ud,cd as md,ce as fd,a5 as yi,cf as pd,cg as hd,W as gd,ch as bd,V as xd,ci as yd,cj as _d,ck as vd,cl as jd,cm as Nd,cn as wd,co as Sd,cp as Cd,cq as kd,cr as Ad,cs as Ed,ct as Rd,cu as Ie,cv as mn,cw as _e,cx as Zt,cy as Ot,cz as Jt,cA as Ue,cB as Ve,cC as Pe,cD as Or,cE as Fe,cF as jo,cG as Md,cH as No,cI as or,cJ as Td,cK as Dd,cL as Id,cM as Ld,cN as $d,cO as Ke,cP as qr,cQ as Od,cR as qd,cS as wo,cT as zd,cU as Pd,cV as So,cW as ot,cX as xt,cY as qt,cZ as Gt,c_ as Bd,c$ as Co,d0 as ko,d1 as Hd,g as Fd,d2 as Wd,d3 as Ud,d4 as Ao,d5 as Vd,d6 as Kd,d7 as Jd,d8 as Gd,d9 as Yd,da as Xd,db as Qd,dc as Zd,dd as Vi,de as Ki,df as Ji,dg as Gi,dh as jt,di as eu,dj as tu,dk as Yi,dl as Xi,dm as Qi,dn as nu,dp as su,dq as Eo,dr as zr,ds as Pr,dt as ru,du as iu,dv as au,dw as ou,dx as Ro,dy as lu,dz as cu,dA as du,dB as uu,dC as mu,dD as fu,dE as pu,dF as hu,dG as gu,dH as bu,dI as xu,dJ as yu,dK as _u,dL as vu,dM as ju,dN as An,dO as Nu,dP as wu,dQ as Su,dR as Cu,dS as ku,dT as Au,dU as Eu,dV as Ru,dW as Mu,aj as Tu,dX as Du,dY as Iu,dZ as Lu,d_ as Mo,d$ as $u,e0 as Ou,e1 as qu,e2 as zu,e3 as Pu,e4 as lr,e5 as Bu,e6 as Hu,e7 as Fu,e8 as Wu,e9 as Uu,ea as Vu,eb as Ku,ec as Ju,ed as Gu,ee as Yu,ef as Xu,eg as Qu,eh as Zu,ei as em,ej as tm,ek as nm,el as sm,em as rm,en as im,eo as am,ep as om,eq as lm,er as cm}from"./index-CccjuZ-L.js";import{T as dm,u as um}from"./usePreventAutoFocus-B8iVfOyS.js";const mm=[["path",{d:"M3.85 8.62a4 4 0 0 1 4.78-4.77 4 4 0 0 1 6.74 0 4 4 0 0 1 4.78 4.78 4 4 0 0 1 0 6.74 4 4 0 0 1-4.77 4.78 4 4 0 0 1-6.75 0 4 4 0 0 1-4.78-4.77 4 4 0 0 1 0-6.76Z",key:"3c2336"}],["path",{d:"M16 8h-6a2 2 0 1 0 0 4h4a2 2 0 1 1 0 4H8",key:"1h4pet"}],["path",{d:"M12 18V6",key:"zqpxq5"}]],fm=je("badge-dollar-sign",mm);const pm=[["path",{d:"M6 12h9a4 4 0 0 1 0 8H7a1 1 0 0 1-1-1V5a1 1 0 0 1 1-1h7a4 4 0 0 1 0 8",key:"mg9rjx"}]],hm=je("bold",pm);const gm=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],bm=je("clock",gm);const xm=[["path",{d:"m16 18 6-6-6-6",key:"eg8j8"}],["path",{d:"m8 6-6 6 6 6",key:"ppft3o"}]],ym=je("code",xm);const _m=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],To=je("copy",_m);const vm=[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]],jm=je("grip-vertical",vm);const Nm=[["path",{d:"m9 11-6 6v3h9l3-3",key:"1a3l36"}],["path",{d:"m22 12-4.6 4.6a2 2 0 0 1-2.8 0l-5.2-5.2a2 2 0 0 1 0-2.8L14 4",key:"14a9rk"}]],wm=je("highlighter",Nm);const Sm=[["line",{x1:"19",x2:"10",y1:"4",y2:"4",key:"15jd3p"}],["line",{x1:"14",x2:"5",y1:"20",y2:"20",key:"bu0au3"}],["line",{x1:"15",x2:"9",y1:"4",y2:"20",key:"uljnxc"}]],Cm=je("italic",Sm);const km=[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]],Am=je("link",km);const Em=[["path",{d:"M11 5h10",key:"1cz7ny"}],["path",{d:"M11 12h10",key:"1438ji"}],["path",{d:"M11 19h10",key:"11t30w"}],["path",{d:"M4 4h1v5",key:"10yrso"}],["path",{d:"M4 9h2",key:"r1h2o0"}],["path",{d:"M6.5 20H3.4c0-1 2.6-1.925 2.6-3.5a1.5 1.5 0 0 0-2.6-1.02",key:"xtkcd5"}]],Rm=je("list-ordered",Em);const Mm=[["path",{d:"M12 22a1 1 0 0 1 0-20 10 9 0 0 1 10 9 5 5 0 0 1-5 5h-2.25a1.75 1.75 0 0 0-1.4 2.8l.3.4a1.75 1.75 0 0 1-1.4 2.8z",key:"e79jfc"}],["circle",{cx:"13.5",cy:"6.5",r:".5",fill:"currentColor",key:"1okk4w"}],["circle",{cx:"17.5",cy:"10.5",r:".5",fill:"currentColor",key:"f64h9f"}],["circle",{cx:"6.5",cy:"12.5",r:".5",fill:"currentColor",key:"qy21gx"}],["circle",{cx:"8.5",cy:"7.5",r:".5",fill:"currentColor",key:"fotxhn"}]],Tm=je("palette",Mm);const Dm=[["path",{d:"M16 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"rib7q0"}],["path",{d:"M5 3a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2 1 1 0 0 1 1 1v1a2 2 0 0 1-2 2 1 1 0 0 0-1 1v2a1 1 0 0 0 1 1 6 6 0 0 0 6-6V5a2 2 0 0 0-2-2z",key:"1ymkrd"}]],Im=je("quote",Dm);const Lm=[["path",{d:"M21 7v6h-6",key:"3ptur4"}],["path",{d:"M3 17a9 9 0 0 1 9-9 9 9 0 0 1 6 2.3l3 2.7",key:"1kgawr"}]],$m=je("redo",Lm);const Om=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],qm=je("save",Om);const zm=[["path",{d:"M16 4H9a3 3 0 0 0-2.83 4",key:"43sutm"}],["path",{d:"M14 12a4 4 0 0 1 0 8H6",key:"nlfj13"}],["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}]],Pm=je("strikethrough",zm);const Bm=[["path",{d:"M12 3v18",key:"108xh3"}],["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}]],Hm=je("table",Bm);const Fm=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M17 12H7",key:"16if0g"}],["path",{d:"M19 19H5",key:"vjpgq2"}]],Wm=je("text-align-center",Fm);const Um=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M21 19H7",key:"4cu937"}]],Vm=je("text-align-end",Um);const Km=[["path",{d:"M3 5h18",key:"1u36vt"}],["path",{d:"M3 12h18",key:"1i2n21"}],["path",{d:"M3 19h18",key:"awlh7x"}]],Jm=je("text-align-justify",Km);const Gm=[["path",{d:"M21 5H3",key:"1fi0y6"}],["path",{d:"M15 12H3",key:"6jk70r"}],["path",{d:"M17 19H3",key:"z6ezky"}]],Ym=je("text-align-start",Gm);const Xm=[["path",{d:"M6 4v6a6 6 0 0 0 12 0V4",key:"9kb039"}],["line",{x1:"4",x2:"20",y1:"20",y2:"20",key:"nun2al"}]],Qm=je("underline",Xm);const Zm=[["path",{d:"M3 7v6h6",key:"1v2h90"}],["path",{d:"M21 17a9 9 0 0 0-9-9 9 9 0 0 0-6 2.3L3 13",key:"1r6uu6"}]],ef=je("undo",Zm);const tf=[["path",{d:"m18.84 12.25 1.72-1.71h-.02a5.004 5.004 0 0 0-.12-7.07 5.006 5.006 0 0 0-6.95 0l-1.72 1.71",key:"yqzxt4"}],["path",{d:"m5.17 11.75-1.71 1.71a5.004 5.004 0 0 0 .12 7.07 5.006 5.006 0 0 0 6.95 0l1.71-1.71",key:"4qinb0"}],["line",{x1:"8",x2:"8",y1:"2",y2:"5",key:"1041cp"}],["line",{x1:"2",x2:"5",y1:"8",y2:"8",key:"14m1p5"}],["line",{x1:"16",x2:"16",y1:"19",y2:"22",key:"rzdirn"}],["line",{x1:"19",x2:"22",y1:"16",y2:"16",key:"ox905f"}]],nf=je("unlink",tf),de=function(e){const t=H.c(14),{isSubmitting:n}=e,s=V();let r;t[0]!==s?(r=()=>s(J()),t[0]=s,t[1]=r):r=t[1];let a;t[2]===Symbol.for("react.memo_cache_sentinel")?(a=i.jsx(Vt,{className:"-ms-1 opacity-80",size:16,"aria-hidden":"true"}),t[2]=a):a=t[2];let o;t[3]!==n||t[4]!==r?(o=i.jsxs(me,{variant:"secondary",type:"button",className:"border/50 border bg-white dark:bg-white/5",disabled:n,onClick:r,children:[a,"Cancel"]}),t[3]=n,t[4]=r,t[5]=o):o=t[5];let l;t[6]!==n?(l=n?i.jsx(zn,{className:"-ms-1 animate-spin opacity-80",size:16,"aria-hidden":"true"}):i.jsx(Xt,{className:"-ms-1 opacity-80",size:16,"aria-hidden":"true"}),t[6]=n,t[7]=l):l=t[7];let d;t[8]!==n||t[9]!==l?(d=i.jsxs(me,{disabled:n,type:"submit",children:[l,"Confirm"]}),t[8]=n,t[9]=l,t[10]=d):d=t[10];let c;return t[11]!==o||t[12]!==d?(c=i.jsxs("div",{className:"md:col-span-2 mt-6 grid grid-cols-2 gap-4",children:[o,d]}),t[11]=o,t[12]=d,t[13]=c):c=t[13],c},ke=e=>{const t=H.c(15),{handleConfirm:n,showIcons:s}=e,r=s===void 0?!0:s,a=V();let o;t[0]!==a?(o=()=>a(J()),t[0]=a,t[1]=o):o=t[1];let l;t[2]!==r?(l=r&&i.jsx(Vt,{className:"-ms-1 opacity-80",size:16,"aria-hidden":"true"}),t[2]=r,t[3]=l):l=t[3];let d;t[4]!==o||t[5]!==l?(d=i.jsxs(me,{variant:"outline",onClick:o,className:"rounded-md border border-zinc-300 px-4 py-2 text-zinc-700 hover:bg-zinc-100 dark:border-zinc-600 dark:text-zinc-200 dark:hover:bg-zinc-800",children:[l,"Cancel"]}),t[4]=o,t[5]=l,t[6]=d):d=t[6];let c;t[7]!==r?(c=r&&i.jsx(Yl,{className:"-ms-1 opacity-60",size:16,"aria-hidden":"true"}),t[7]=r,t[8]=c):c=t[8];let m;t[9]!==n||t[10]!==c?(m=i.jsxs(me,{variant:"destructive",onClick:n,children:[c,"Confirm"]}),t[9]=n,t[10]=c,t[11]=m):m=t[11];let u;return t[12]!==d||t[13]!==m?(u=i.jsxs("div",{className:"mt-6 flex justify-end gap-4",children:[d,m]}),t[12]=d,t[13]=m,t[14]=u):u=t[14],u},sf=le({first_name:D().required("First name is required").max(50,"First name must be at most 50 characters"),last_name:D().required("Last name is required").max(50,"Last name must be at most 50 characters"),email:D().required("Email is required").email("Please enter a valid email address"),department:D().nullable().max(100,"Department name must be at most 100 characters"),admin_role_id:D().required("Admin role is required"),joined:Ze().required("Join date is required"),account_password:D().required("Password is required").min(8,"Password must be at least 8 characters").max(64,"Password can't exceed 64 characters").matches(/[A-Z]/,"Password must contain at least one uppercase letter").matches(/[a-z]/,"Password must contain at least one lowercase letter").matches(/[0-9]/,"Password must contain at least one number").matches(/[@$!%*?&#]/,"Password must contain at least one special character"),confirm_password:D().required("Please confirm your password").oneOf([fn("account_password")],"Passwords must match")}),rf=le({first_name:D().required("First name is required").max(50,"First name must be at most 50 characters").matches(/^[a-zA-Z0-9\s.'-]+$/,"First name can't contain special characters"),last_name:D().required("Last name is required").max(50,"Last name must be at most 50 characters").matches(/^[a-zA-Z0-9\s.'-]+$/,"Last name can't contain special characters"),department:D().nullable().max(100,"Department name must be at most 100 characters"),admin_role_id:D().required("Admin role is required")}),af=le({name:D().required("Role name is required").max(50,"Role name must be at most 50 characters").matches(/^[a-zA-Z0-9\s.'-]+$/,"Role name can't contain special characters")}),of=le().shape({current_password:D().required("Current password is required"),account_password:D().required("New password is required").min(8,"Password must be at least 8 characters").max(64,"Password can't exceed 64 characters").matches(/[A-Z]/,"Password must contain at least one uppercase letter").matches(/[a-z]/,"Password must contain at least one lowercase letter").matches(/[0-9]/,"Password must contain at least one number").matches(/[@$!%*?&#]/,"Password must contain at least one special character"),confirm_password:D().oneOf([fn("account_password"),null],"Passwords must match").required("Confirm password is required")});function Br(e){const t=H.c(9);let n,s;t[0]!==e?({className:n,...s}=e,t[0]=e,t[1]=n,t[2]=s):(n=t[1],s=t[2]);let r;t[3]!==n?(r=be("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent shadow-xs transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",n),t[3]=n,t[4]=r):r=t[4];let a;t[5]===Symbol.for("react.memo_cache_sentinel")?(a=i.jsx(Xl,{"data-slot":"switch-thumb",className:be("bg-background dark:data-[state=unchecked]:bg-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")}),t[5]=a):a=t[5];let o;return t[6]!==s||t[7]!==r?(o=i.jsx(Ql,{"data-slot":"switch",className:r,...s,children:a}),t[6]=s,t[7]=r,t[8]=o):o=t[8],o}const Wt=e=>{const t=H.c(35),{values:n,permissionKey:s,setFieldValue:r}=e,a=n.permissions[s];let o;t[0]!==s||t[1]!==n.permissions?(o=n.permissions[`${s}Actions`]||{},t[0]=s,t[1]=n.permissions,t[2]=o):o=t[2];const l=o,d=Object.values(l).every(Boolean);let c;t[3]!==l||t[4]!==d||t[5]!==s||t[6]!==r?(c=()=>{const j=!d,N={};Object.keys(l).forEach(_=>{N[_]=j}),r(`permissions.${s}Actions`,N)},t[3]=l,t[4]=d,t[5]=s,t[6]=r,t[7]=c):c=t[7];const m=c,u=df;let f;if(t[8]!==s){let j;t[10]===Symbol.for("react.memo_cache_sentinel")?(j=/_/g,t[10]=j):j=t[10],f=s.replace(j," "),t[8]=s,t[9]=f}else f=t[9];let p;t[11]!==s||t[12]!==f?(p=i.jsx(Be,{htmlFor:s,className:"flex-grow text-sm font-semibold uppercase",children:f}),t[11]=s,t[12]=f,t[13]=p):p=t[13];let g;t[14]!==l||t[15]!==s||t[16]!==r?(g=j=>u(j,s,r,l),t[14]=l,t[15]=s,t[16]=r,t[17]=g):g=t[17];let b;t[18]!==a||t[19]!==s||t[20]!==g?(b=i.jsx(Br,{id:s,checked:a,onCheckedChange:g}),t[18]=a,t[19]=s,t[20]=g,t[21]=b):b=t[21];let h;t[22]!==p||t[23]!==b?(h=i.jsxs("div",{className:"flex items-center justify-between bg-black/[2%] p-2 [--primary:var(--color-blue-800)] [--ring:var(--color-blue-300)] in-[.dark]:[--primary:var(--color-blue-800)] in-[.dark]:[--ring:var(--color-blue-900)] dark:bg-white/5 px-3",children:[p,b]}),t[22]=p,t[23]=b,t[24]=h):h=t[24];let x;t[25]!==l||t[26]!==d||t[27]!==m||t[28]!==a||t[29]!==s||t[30]!==r?(x=a&&i.jsx(lf,{allChecked:d,permissionKey:s,actions:l,handleAllPermissionToggle:m,setFieldValue:r}),t[25]=l,t[26]=d,t[27]=m,t[28]=a,t[29]=s,t[30]=r,t[31]=x):x=t[31];let y;return t[32]!==h||t[33]!==x?(y=i.jsxs("div",{className:" bg-white dark:bg-white/5 rounded-lg shadow-xs dark:shadow-xl border capitalize",children:[h,x]}),t[32]=h,t[33]=x,t[34]=y):y=t[34],y},lf=e=>{const t=H.c(16),{allChecked:n,permissionKey:s,actions:r,handleAllPermissionToggle:a,setFieldValue:o}=e,l=`${s}-all`;let d;t[0]!==l?(d=i.jsx(Be,{htmlFor:l,className:"flex-grow",children:"All Permissions"}),t[0]=l,t[1]=d):d=t[1];const c=`${s}-all`;let m;t[2]!==n||t[3]!==a||t[4]!==c?(m=i.jsx(Br,{id:c,checked:n,onCheckedChange:a}),t[2]=n,t[3]=a,t[4]=c,t[5]=m):m=t[5];let u;t[6]!==d||t[7]!==m?(u=i.jsxs("div",{className:"border-primary/50 flex w-full justify-between rounded-md border px-2 py-1.5 shadow-xs",children:[d,m]}),t[6]=d,t[7]=m,t[8]=u):u=t[8];let f;t[9]!==r||t[10]!==s||t[11]!==o?(f=i.jsx("div",{className:"mt-2 grid grid-cols-2 gap-1",children:Object.keys(r).map(g=>i.jsxs("div",{className:"flex w-full items-center justify-between rounded-md border px-2 py-1.5 shadow-xs",children:[i.jsx(Be,{htmlFor:`${s}-${g}`,className:"flex-grow",children:g.replace(/_/g," ")}),i.jsx(Br,{className:"scale-90",id:`${s}-${g}`,checked:r[g],onCheckedChange:b=>o(`permissions.${s}Actions.${g}`,b)})]},g))}),t[9]=r,t[10]=s,t[11]=o,t[12]=f):f=t[12];let p;return t[13]!==u||t[14]!==f?(p=i.jsxs("div",{className:"border-t p-2.5",children:[u,f]}),t[13]=u,t[14]=f,t[15]=p):p=t[15],p};function cf(e,t){return e[t]=!1,e}function df(e,t,n,s){n(`permissions.${t}`,e),e||n(`permissions.${t}Actions`,Object.keys(s).reduce(cf,{}))}const Zi=()=>{const e=H.c(22),t=V(),{type:n,props:s}=A(uf),{adminRoles:r,adminRoleFormat:a}=A(mf);let o;e[0]!==a||e[1]!==r||e[2]!==t?(o=()=>{r||uo(t),a||Zl(t)},e[0]=a,e[1]=r,e[2]=t,e[3]=o):o=e[3];let l;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[4]=l):l=e[4],C.useEffect(o,l);const d=s?.name||"";let c;e[5]!==a||e[6]!==s||e[7]!==d?(c={name:d,permissions:s?.permissions?{...s.permissions}:a},s?.permissions&&delete c.permissions.group,e[5]=a,e[6]=s,e[7]=d,e[8]=c):c=e[8];let m;e[9]!==s?.id||e[10]!==t||e[11]!==n?(m=function(h,x){const{setSubmitting:y}=x;(n==="editAdminRole"?ec(s?.id,h,t):tc(h,t)).then(()=>{t(J())}).catch(()=>{y(!1)})},e[9]=s?.id,e[10]=t,e[11]=n,e[12]=m):m=e[12];const u=m,f=n==="editAdminRole"?"Edit Admin Role":"Add Admin Role";let p;e[13]!==f?(p=i.jsx("div",{className:"-mt-6 mb-4",children:i.jsx("h2",{className:"text-center text-xl font-medium",children:f})}),e[13]=f,e[14]=p):p=e[14];let g;e[15]!==a||e[16]!==u||e[17]!==c?(g=a&&i.jsx(ce,{initialValues:c,onSubmit:u,validationSchema:af,children:ff}),e[15]=a,e[16]=u,e[17]=c,e[18]=g):g=e[18];let b;return e[19]!==p||e[20]!==g?(b=i.jsxs("section",{children:[p,g]}),e[19]=p,e[20]=g,e[21]=b):b=e[21],b};function uf(e){return e.dialog}function mf(e){return e.admin}function ff(e){const{values:t,errors:n,touched:s,handleChange:r,handleSubmit:a,setFieldValue:o,isSubmitting:l}=e;return i.jsxs("form",{onSubmit:a,className:"my-1 space-y-6",children:[i.jsx(te,{fieldName:"name",label:"role name",value:t.name,error:n.name,touched:s.name,handleChange:r,placeholder:"Enter role name"}),i.jsx("div",{className:"grid grid-cols-1 gap-3 md:grid-cols-2",children:Object.keys(t?.permissions)?.map(d=>d.includes("Actions")?null:i.jsx(Wt,{values:t,permissionKey:d,setFieldValue:o},d))}),i.jsx(de,{isSubmitting:l})]})}const pf=()=>{const e=H.c(17),t=V(),n=A(hf);let s;e[0]!==n.id||e[1]!==t?(s=function(){nc(n?.id,t).then(()=>{t(J())})},e[0]=n.id,e[1]=t,e[2]=s):s=e[2];const r=s;let a,o;e[3]===Symbol.for("react.memo_cache_sentinel")?(a=i.jsx(ze,{className:"text-destructive size-10"}),o=i.jsx("h2",{className:"text-xl font-semibold",children:"Archive Admin Role"}),e[3]=a,e[4]=o):(a=e[3],o=e[4]);const l=n?.name;let d;e[5]!==l?(d=i.jsxs("p",{className:"text-sm text-zinc-600 dark:text-zinc-300 w-full",children:["Are you sure you want to archive"," ",i.jsx("span",{className:"font-semibold",children:l}),"? This action cannot be undone."]}),e[5]=l,e[6]=d):d=e[6];let c;e[7]!==n.roleCount?(c=n.roleCount>0&&i.jsxs("p",{className:"-mt-3 text-sm text-zinc-600 dark:text-zinc-300",children:["Currently ",n.roleCount," member",n.roleCount>1?"s are":" is"," using this role. All of their permissions will be reset."]}),e[7]=n.roleCount,e[8]=c):c=e[8];let m;e[9]!==d||e[10]!==c?(m=i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[a,o,d,c]}),e[9]=d,e[10]=c,e[11]=m):m=e[11];let u;e[12]!==r?(u=i.jsx(ke,{handleConfirm:r}),e[12]=r,e[13]=u):u=e[13];let f;return e[14]!==m||e[15]!==u?(f=i.jsxs("div",{className:"-mt-4 text-center",children:[m,u]}),e[14]=m,e[15]=u,e[16]=f):f=e[16],f};function hf(e){return e.dialog.props}const ea=()=>{const e=V(),{adminRoles:t}=A(d=>d.admin),{type:n,props:s}=A(d=>d.dialog);C.useEffect(()=>{t||uo(e)},[]);const r=C.useMemo(()=>he(t,"name","id"),[t]),a={first_name:"",last_name:"",email:"",department:"",admin_role_id:"",joined:new Date,account_password:"",confirm_password:""},o={first_name:s?.first_name||"",last_name:s?.last_name||"",department:s?.department||"",admin_role_id:r.find(d=>d.label==s?.role)?.value||""},l=function(d,{setSubmitting:c}){const m={...d};d.department||delete m.department,d.joined&&(m.joined=ve(new Date(d.joined),"yyyy-MM-dd")),(n==="editAdmin"?rc(s?.id,m,e):ic(m,e)).then(()=>{e(J())}).catch(()=>{c(!1)})};return i.jsxs("section",{children:[i.jsxs("div",{className:"-mt-6 mb-8",children:[i.jsx(sc,{className:"mx-auto size-14 drop-shadow-md"}),i.jsx("h2",{className:"text-center text-xl font-medium",children:n==="editAdmin"?"Edit Admin":"Add Admin"})]}),i.jsx(ce,{initialValues:n==="editAdmin"?o:a,onSubmit:l,validationSchema:n==="editAdmin"?rf:sf,children:({values:d,errors:c,touched:m,handleChange:u,handleSubmit:f,setFieldValue:p,isSubmitting:g})=>i.jsxs("form",{onSubmit:f,className:"my-1 grid grid-cols-1 space-y-4 gap-x-4 md:grid-cols-2",children:[i.jsx(te,{fieldName:"first_name",label:"first name",value:d.first_name,error:c.first_name,touched:m.first_name,handleChange:u,placeholder:"Enter first name"}),i.jsx(te,{fieldName:"last_name",label:"last name",value:d.last_name,error:c.last_name,touched:m.last_name,handleChange:u,placeholder:"Enter last name"}),!s&&i.jsx(te,{fieldName:"email",label:"email",value:d.email,error:c.email,touched:m.email,handleChange:u,placeholder:"Enter email",autoComplete:"off"}),i.jsx(te,{fieldName:"department",label:"department",value:d.department,error:c.department,touched:m.department,handleChange:u,placeholder:"Enter department",isRequired:!1}),i.jsx(Q,{options:r,fieldName:"admin_role_id",label:"admin role",value:d.admin_role_id,error:c.admin_role_id,touched:m.admin_role_id,setFieldValue:p,placeholder:"Select role"}),!s&&i.jsxs(i.Fragment,{children:[i.jsx(et,{fieldName:"joined",label:"Join Date",error:c.joined,touched:m.joined,date:d.joined,setDate:b=>p("joined",b)}),i.jsx(ct,{fieldName:"account_password",label:"account password",value:d.account_password,error:c.account_password,touched:m.account_password,handleChange:u,placeholder:"Enter password"}),i.jsx(ct,{fieldName:"confirm_password",label:"confirm password",value:d.confirm_password,error:c.confirm_password,touched:m.confirm_password,handleChange:u,placeholder:"Enter password again"})]}),i.jsx(de,{isSubmitting:g})]})})]})},gf=()=>{const e=H.c(7),t=V(),{user:n}=A(bf);let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={current_password:"",account_password:"",confirm_password:""},e[0]=s):s=e[0];const r=s;let a;e[1]!==t||e[2]!==n?.id?(a=async(c,m)=>{const{setSubmitting:u}=m,f={...c};ac(n?.id,f).then(()=>t(J())).catch(()=>u(!1))},e[1]=t,e[2]=n?.id,e[3]=a):a=e[3];const o=a;let l;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=i.jsx("div",{className:"-mt-6 mb-8",children:i.jsx("h2",{className:"text-center text-xl font-medium",children:"Reset Password"})}),e[4]=l):l=e[4];let d;return e[5]!==o?(d=i.jsxs("section",{children:[l,i.jsx(ce,{initialValues:r,onSubmit:o,validationSchema:of,children:xf})]}),e[5]=o,e[6]=d):d=e[6],d};function bf(e){return e.auth}function xf(e){const{values:t,errors:n,touched:s,handleChange:r,handleSubmit:a,isSubmitting:o}=e;return i.jsxs("form",{onSubmit:a,className:"my-1 space-y-4 gap-x-4",children:[i.jsx(ct,{fieldName:"current_password",label:"Current Password",value:t.current_password,error:n.current_password,touched:s.current_password,handleChange:r,placeholder:"Enter current password",autoComplete:"off"}),i.jsx(ct,{fieldName:"account_password",label:"New Password",value:t.account_password,error:n.account_password,touched:s.account_password,handleChange:r,placeholder:"Enter new password",autoComplete:"off"}),i.jsx(ct,{fieldName:"confirm_password",label:"Confirm Password",value:t.confirm_password,error:n.confirm_password,touched:s.confirm_password,handleChange:r,placeholder:"Enter new password again",autoComplete:"off"}),i.jsx(de,{isSubmitting:o})]})}const yf=()=>{const e=H.c(30),t=A(_f);let n,s,r,a,o,l,d,c,m;if(e[0]!==t.permissions){const g=Object.entries(t.permissions||{}).filter(vf).map(jf),b=Object.entries(t.permissions||{}).filter(Nf).map(wf);o="-mt-4 space-y-4 pb-4",l="Permission Details";let h;e[10]===Symbol.for("react.memo_cache_sentinel")?(d=i.jsx(fe,{className:"mt-2"}),h=i.jsx("h3",{className:"mb-2 font-semibold",children:"MODULES"}),e[10]=d,e[11]=h):(d=e[10],h=e[11]);const x=g.map(Sf);e[12]!==x?(c=i.jsxs("div",{children:[h,i.jsx("div",{className:"grid grid-cols-1 gap-2 capitalize md:grid-cols-2 lg:grid-cols-4",children:x})]}),e[12]=x,e[13]=c):c=e[13],e[14]===Symbol.for("react.memo_cache_sentinel")?(m=i.jsx(fe,{}),e[14]=m):m=e[14],r="capitalize",e[15]===Symbol.for("react.memo_cache_sentinel")?(a=i.jsx("h3",{className:"mb-2 font-semibold",children:"ACTIONS"}),e[15]=a):a=e[15],n="space-y-4",s=b.map(kf),e[0]=t.permissions,e[1]=n,e[2]=s,e[3]=r,e[4]=a,e[5]=o,e[6]=l,e[7]=d,e[8]=c,e[9]=m}else n=e[1],s=e[2],r=e[3],a=e[4],o=e[5],l=e[6],d=e[7],c=e[8],m=e[9];let u;e[16]!==n||e[17]!==s?(u=i.jsx("div",{className:n,children:s}),e[16]=n,e[17]=s,e[18]=u):u=e[18];let f;e[19]!==r||e[20]!==a||e[21]!==u?(f=i.jsxs("div",{className:r,children:[a,u]}),e[19]=r,e[20]=a,e[21]=u,e[22]=f):f=e[22];let p;return e[23]!==f||e[24]!==o||e[25]!==l||e[26]!==d||e[27]!==c||e[28]!==m?(p=i.jsxs("div",{className:o,children:[l,d,c,m,f]}),e[23]=f,e[24]=o,e[25]=l,e[26]=d,e[27]=c,e[28]=m,e[29]=p):p=e[29],p};function _f(e){return e.dialog.props}function vf(e){const[,t]=e;return typeof t=="boolean"}function jf(e){const[t,n]=e;return{name:t,enabled:n}}function Nf(e){const[,t]=e;return typeof t=="object"&&t!==null}function wf(e){const[t,n]=e;return{name:t,actions:n}}function Sf(e,t){const{name:n,enabled:s}=e;return i.jsx("div",{className:be("bg-muted text-muted-foreground rounded-lg border px-2 py-1 text-sm",s&&"bg-primary text-primary-foreground"),children:n},t)}function Cf(e){const[t,n]=e;return n?i.jsxs(dt,{className:"gap-1 rounded-md pr-3.5 pl-2 text-xs",children:[i.jsx(Xt,{className:"text-primary-foreground !size-4","aria-hidden":"true"}),t]},t):i.jsx(dt,{variant:"outline",className:"gap-1 rounded-md border pr-4 pl-3 text-xs dark:border-white/25",children:i.jsx("span",{className:"text-muted-foreground",children:t})},t)}function kf(e){const{name:t,actions:n}=e;return i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-gray-800 dark:text-white",children:t.replace("Actions","").charAt(0).toUpperCase()+t.replace("Actions","").slice(1)}),i.jsx("ul",{className:"mt-1 flex flex-wrap gap-2",children:Object.entries(n).map(Cf)})]},t)}const Af=()=>{const e=H.c(12),t=V(),n=A(Ef);let s;e[0]!==n?.id||e[1]!==t?(s=function(){oc(n?.id,t).then(()=>{t(J())})},e[0]=n?.id,e[1]=t,e[2]=s):s=e[2];const r=s;let a,o;e[3]===Symbol.for("react.memo_cache_sentinel")?(a=i.jsx(ze,{className:"text-destructive size-10"}),o=i.jsx("h2",{className:"text-xl font-semibold",children:"Archive Admin"}),e[3]=a,e[4]=o):(a=e[3],o=e[4]);const l=n?.first_name+" "+n?.last_name;let d;e[5]!==l?(d=i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[a,o,i.jsxs("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:["Are you sure you want to archive"," ",i.jsx("span",{className:"font-semibold",children:l}),"? This action cannot be undone."]})]}),e[5]=l,e[6]=d):d=e[6];let c;e[7]!==r?(c=i.jsx(ke,{handleConfirm:r}),e[7]=r,e[8]=c):c=e[8];let m;return e[9]!==d||e[10]!==c?(m=i.jsxs("div",{className:"-mt-4 text-center",children:[d,c]}),e[9]=d,e[10]=c,e[11]=m):m=e[11],m};function Ef(e){return e.dialog.props}const Rf=le({first_name:D().required("First name is required").max(50,"First name must be at most 50 characters"),last_name:D().required("Last name is required").max(50,"Last name must be at most 50 characters"),email:D().required("Email is required").email("Please enter a valid email address"),member_role_id:D().required("Member role is required"),account_password:D().required("Password is required").min(8,"Password must be at least 8 characters").max(64,"Password can't exceed 64 characters").matches(/[A-Z]/,"Password must contain at least one uppercase letter").matches(/[a-z]/,"Password must contain at least one lowercase letter").matches(/[0-9]/,"Password must contain at least one number").matches(/[@$!%*?&#]/,"Password must contain at least one special character"),confirm_password:D().required("Please confirm your password").oneOf([fn("account_password")],"Passwords must match")}),Mf=le({first_name:D().required("First name is required").max(50,"First name must be at most 50 characters").matches(/^[a-zA-Z0-9\s.'-]+$/,"First name can't contain special characters"),last_name:D().required("Last name is required").max(50,"Last name must be at most 50 characters").matches(/^[a-zA-Z0-9\s.'-]+$/,"Last name can't contain special characters"),member_role_id:D().required("Member role is required")}),Tf=le({name:D().required("Role name is required").max(50,"Role name must be at most 50 characters").matches(/^[a-zA-Z0-9\s.'-]+$/,"Role name can't contain special characters")}),Df=le({name:D().required("Organisation name is required").min(3,"Organisation name must be at least 3 characters").max(50,"Organisation name must be at most 50 characters").matches(/^[a-zA-Z0-9\s.'-]+$/,"Organisation name can't contain any special characters")}),ta=()=>{const e=H.c(24),t=V(),{type:n,props:s}=A(If),{memberRoleFormat:r}=A(Lf);let a;e[0]!==t||e[1]!==r?(a=()=>{r||lc(t)},e[0]=t,e[1]=r,e[2]=a):a=e[2];let o;e[3]===Symbol.for("react.memo_cache_sentinel")?(o=[],e[3]=o):o=e[3],C.useEffect(a,o);const l=s?.role?.name||"";let d;e[4]!==r||e[5]!==s?.role?.permissions||e[6]!==l?(d={name:l,permissions:s?.role?.permissions?{...s?.role?.permissions}:r},s?.role?.permissions&&delete d.permissions.group,e[4]=r,e[5]=s?.role?.permissions,e[6]=l,e[7]=d):d=e[7];let c;e[8]!==t||e[9]!==n||e[10]!==s?.organisation?.id||e[11]!==s?.role?(c=function(h,x){const{setSubmitting:y}=x;(n==="editMemberRoleByAdmin"?cc(s?.organisation?.id,s?.role.id,h,t):dc(s?.organisation?.id,h,t)).then(()=>{t(J())}).catch(()=>{y(!1)})},e[8]=t,e[9]=n,e[10]=s?.organisation?.id,e[11]=s?.role,e[12]=c):c=e[12];const m=c,u=n==="editMemberRoleByAdmin"?"Edit Role":"Add Role";let f;e[13]!==u?(f=i.jsx("div",{className:"-mt-6 mb-4",children:i.jsx("h2",{className:"text-center text-xl font-medium",children:u})}),e[13]=u,e[14]=f):f=e[14];let p;e[15]!==s?.organisation?.products?(p=h=>{const{values:x,errors:y,touched:j,handleChange:N,handleSubmit:_,setFieldValue:S,isSubmitting:v}=h;return i.jsxs("form",{onSubmit:_,className:"my-1",children:[i.jsx(te,{fieldName:"name",label:"role name",value:x.name,error:y.name,touched:j.name,handleChange:N,placeholder:"Enter role name"}),i.jsxs(tr,{defaultValue:"general",className:"mt-4",children:[i.jsxs(nr,{className:"grid w-full grid-cols-1 h-24 md:h-auto md:grid-cols-3 border",children:[i.jsx(it,{value:"general",children:"User Access Permissions"}),dn(s?.organisation?.products)&&i.jsx(it,{value:"finance",children:"Finance Permissions"}),un(s?.organisation?.products)&&i.jsx(it,{value:"hr",children:"HR Permissions"})]}),i.jsxs("div",{className:"relative min-h-[350px] overflow-scroll mt-2.5",children:[i.jsx(at,{value:"general",className:"absolute inset-0 data-[state=active]:block hidden",children:i.jsx("div",{className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:Object.keys(x.permissions).map(w=>w.includes("Actions")||w.includes("finance")||w.includes("hr")?null:i.jsx(Wt,{values:x,permissionKey:w,setFieldValue:S},w))})}),dn(s?.organisation?.products)&&i.jsx(at,{value:"finance",className:"absolute inset-0 data-[state=active]:block hidden",children:i.jsx("div",{className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:Object.keys(x.permissions).map(w=>w.includes("Actions")||!w.includes("finance")?null:i.jsx(Wt,{values:x,permissionKey:w,setFieldValue:S},w))})}),un(s?.organisation?.products)&&i.jsx(at,{value:"hr",className:"absolute inset-0 data-[state=active]:block hidden",children:i.jsx("div",{className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:Object.keys(x.permissions).map(w=>w.includes("Actions")||!w.includes("hr")?null:i.jsx(Wt,{values:x,permissionKey:w,setFieldValue:S},w))})})]})]}),i.jsx(de,{isSubmitting:v})]})},e[15]=s?.organisation?.products,e[16]=p):p=e[16];let g;e[17]!==m||e[18]!==d||e[19]!==p?(g=i.jsx(ce,{initialValues:d,onSubmit:m,validationSchema:Tf,children:p}),e[17]=m,e[18]=d,e[19]=p,e[20]=g):g=e[20];let b;return e[21]!==f||e[22]!==g?(b=i.jsxs("section",{children:[f,g]}),e[21]=f,e[22]=g,e[23]=b):b=e[23],b};function If(e){return e.dialog}function Lf(e){return e.organisationsByAdmin}const $f=()=>{const e=H.c(18),t=V(),n=A(Of);let s;e[0]!==t||e[1]!==n.memberRole||e[2]!==n.organisation_id?(s=function(){uc(n?.organisation_id,n?.memberRole.id,t).then(()=>{t(J())})},e[0]=t,e[1]=n.memberRole,e[2]=n.organisation_id,e[3]=s):s=e[3];const r=s;let a,o;e[4]===Symbol.for("react.memo_cache_sentinel")?(a=i.jsx(ze,{className:"text-destructive size-10"}),o=i.jsx("h2",{className:"text-xl font-semibold",children:"Archive Member Role"}),e[4]=a,e[5]=o):(a=e[4],o=e[5]);const l=n?.name;let d;e[6]!==l?(d=i.jsxs("p",{className:"text-sm text-zinc-600 dark:text-zinc-300 w-full",children:["Are you sure you want to archive"," ",i.jsx("span",{className:"font-semibold",children:l}),"? This action cannot be undone."]}),e[6]=l,e[7]=d):d=e[7];let c;e[8]!==n.roleCount?(c=n.roleCount>0&&i.jsxs("p",{className:"-mt-3 text-sm text-zinc-600 dark:text-zinc-300",children:["Currently ",n.roleCount," member",n.roleCount>1?"s are":" is"," using this role. All of their permissions will be reset."]}),e[8]=n.roleCount,e[9]=c):c=e[9];let m;e[10]!==d||e[11]!==c?(m=i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[a,o,d,c]}),e[10]=d,e[11]=c,e[12]=m):m=e[12];let u;e[13]!==r?(u=i.jsx(ke,{handleConfirm:r}),e[13]=r,e[14]=u):u=e[14];let f;return e[15]!==m||e[16]!==u?(f=i.jsxs("div",{className:"-mt-4 text-center",children:[m,u]}),e[15]=m,e[16]=u,e[17]=f):f=e[17],f};function Of(e){return e.dialog.props}const qf=()=>{const e=H.c(77),t=A(Pf);let n,s,r,a,o,l,d,c,m,u,f,p,g,b,h,x;if(e[0]!==t.memberRole.permissions||e[1]!==t.organisation?.products){const w=Object.entries(t.memberRole.permissions||{}).filter(Bf).map(Hf),k=Object.entries(t.memberRole.permissions||{}).filter(Ff).map(Wf),E=F=>w.filter(P=>{const{name:Z}=P;return F==="general"?!Z.includes("finance")&&!Z.includes("hr"):Z.includes(F)}).map(Uf),R=F=>k.filter(P=>{const{name:Z}=P;return F==="general"?!Z.includes("finance")&&!Z.includes("hr"):Z.includes(F)}).map(Kf);l="-mt-4 pb-4",e[18]===Symbol.for("react.memo_cache_sentinel")?(d=i.jsx("h2",{className:"text-lg font-medium",children:"Permission Details"}),c=i.jsx(fe,{className:"mt-2 mb-4"}),e[18]=d,e[19]=c):(d=e[18],c=e[19]),o="relative min-h-[350px] overflow-scroll mt-2.5",s=tr,g="general";let T;e[20]===Symbol.for("react.memo_cache_sentinel")?(T=i.jsx(it,{value:"general",children:"User Access Permissions"}),e[20]=T):T=e[20];let I;e[21]!==t.organisation?.products?(I=dn(t?.organisation?.products)&&i.jsx(it,{value:"finance",children:"Finance Permissions"}),e[21]=t.organisation?.products,e[22]=I):I=e[22];let L;e[23]!==t.organisation?.products?(L=un(t?.organisation?.products)&&i.jsx(it,{value:"hr",children:"HR Permissions"}),e[23]=t.organisation?.products,e[24]=L):L=e[24],e[25]!==I||e[26]!==L?(b=i.jsxs(nr,{className:"grid w-full grid-cols-1 h-24 md:h-auto md:grid-cols-3 border",children:[T,I,L]}),e[25]=I,e[26]=L,e[27]=b):b=e[27];let M;e[28]===Symbol.for("react.memo_cache_sentinel")?(M=i.jsx("h3",{className:"mb-2 font-semibold",children:"Modules"}),e[28]=M):M=e[28];const $=i.jsx("div",{className:"grid grid-cols-1 gap-2 capitalize md:grid-cols-2 lg:grid-cols-4",children:E("general")});let O;e[29]!==$?(O=i.jsxs("div",{children:[M,$]}),e[29]=$,e[30]=O):O=e[30];let X;e[31]===Symbol.for("react.memo_cache_sentinel")?(X=i.jsx("h3",{className:"mb-2 font-semibold",children:"Actions"}),e[31]=X):X=e[31];const B=i.jsx("div",{className:"space-y-4 capitalize",children:R("general")});let Y;e[32]!==B?(Y=i.jsxs("div",{children:[X,B]}),e[32]=B,e[33]=Y):Y=e[33],e[34]!==O||e[35]!==Y?(h=i.jsxs(at,{value:"general",className:"space-y-6 pt-4",children:[O,Y]}),e[34]=O,e[35]=Y,e[36]=h):h=e[36];let U;e[37]===Symbol.for("react.memo_cache_sentinel")?(U=i.jsx("h3",{className:"mb-2 font-semibold",children:"Modules"}),e[37]=U):U=e[37];const W=i.jsx("div",{className:"grid grid-cols-1 gap-2 capitalize md:grid-cols-2 lg:grid-cols-4",children:E("finance")});let G;e[38]!==W?(G=i.jsxs("div",{children:[U,W]}),e[38]=W,e[39]=G):G=e[39];let ee;e[40]===Symbol.for("react.memo_cache_sentinel")?(ee=i.jsx("h3",{className:"mb-2 font-semibold",children:"Actions"}),e[40]=ee):ee=e[40];const ne=i.jsx("div",{className:"space-y-4 capitalize",children:R("finance")});let K;e[41]!==ne?(K=i.jsxs("div",{children:[ee,ne]}),e[41]=ne,e[42]=K):K=e[42],e[43]!==G||e[44]!==K?(x=i.jsxs(at,{value:"finance",className:"space-y-6 pt-4",children:[G,K]}),e[43]=G,e[44]=K,e[45]=x):x=e[45],n=at,u="hr",f="space-y-6 pt-4";let se;e[46]===Symbol.for("react.memo_cache_sentinel")?(se=i.jsx("h3",{className:"mb-2 font-semibold",children:"Modules"}),e[46]=se):se=e[46];const z=E("hr");e[47]!==z?(p=i.jsxs("div",{children:[se,i.jsx("div",{className:"grid grid-cols-1 gap-2 capitalize md:grid-cols-2 lg:grid-cols-4",children:z})]}),e[47]=z,e[48]=p):p=e[48],e[49]===Symbol.for("react.memo_cache_sentinel")?(m=i.jsx("h3",{className:"mb-2 font-semibold",children:"Actions"}),e[49]=m):m=e[49],r="space-y-4 capitalize",a=R("hr"),e[0]=t.memberRole.permissions,e[1]=t.organisation?.products,e[2]=n,e[3]=s,e[4]=r,e[5]=a,e[6]=o,e[7]=l,e[8]=d,e[9]=c,e[10]=m,e[11]=u,e[12]=f,e[13]=p,e[14]=g,e[15]=b,e[16]=h,e[17]=x}else n=e[2],s=e[3],r=e[4],a=e[5],o=e[6],l=e[7],d=e[8],c=e[9],m=e[10],u=e[11],f=e[12],p=e[13],g=e[14],b=e[15],h=e[16],x=e[17];let y;e[50]!==r||e[51]!==a?(y=i.jsx("div",{className:r,children:a}),e[50]=r,e[51]=a,e[52]=y):y=e[52];let j;e[53]!==y||e[54]!==m?(j=i.jsxs("div",{children:[m,y]}),e[53]=y,e[54]=m,e[55]=j):j=e[55];let N;e[56]!==n||e[57]!==j||e[58]!==u||e[59]!==f||e[60]!==p?(N=i.jsxs(n,{value:u,className:f,children:[p,j]}),e[56]=n,e[57]=j,e[58]=u,e[59]=f,e[60]=p,e[61]=N):N=e[61];let _;e[62]!==s||e[63]!==N||e[64]!==g||e[65]!==b||e[66]!==h||e[67]!==x?(_=i.jsxs(s,{defaultValue:g,children:[b,h,x,N]}),e[62]=s,e[63]=N,e[64]=g,e[65]=b,e[66]=h,e[67]=x,e[68]=_):_=e[68];let S;e[69]!==o||e[70]!==_?(S=i.jsx("div",{className:o,children:_}),e[69]=o,e[70]=_,e[71]=S):S=e[71];let v;return e[72]!==l||e[73]!==d||e[74]!==c||e[75]!==S?(v=i.jsxs("div",{className:l,children:[d,c,S]}),e[72]=l,e[73]=d,e[74]=c,e[75]=S,e[76]=v):v=e[76],v},zf=e=>{const t=H.c(6),{action:n,allowed:s}=e;let r;if(t[0]!==n){let l;t[2]===Symbol.for("react.memo_cache_sentinel")?(l=/_/g,t[2]=l):l=t[2],r=n.replace(l," "),t[0]=n,t[1]=r}else r=t[1];const a=r;let o;return t[3]!==s||t[4]!==a?(o=s?i.jsxs(dt,{className:"gap-1 rounded-full pr-3.5 pl-2 text-xs",children:[i.jsx(Xt,{className:"text-primary-foreground !size-4","aria-hidden":"true"}),a]}):i.jsx(dt,{variant:"outline",className:"gap-1 border pr-4 pl-3 text-xs dark:border-white/25 rounded-full",children:i.jsx("span",{className:"text-muted-foreground",children:a})}),t[3]=s,t[4]=a,t[5]=o):o=t[5],o};function Pf(e){return e.dialog.props}function Bf(e){const[,t]=e;return typeof t=="boolean"}function Hf(e){const[t,n]=e;return{name:t,enabled:n}}function Ff(e){const[,t]=e;return typeof t=="object"&&t!==null}function Wf(e){const[t,n]=e;return{name:t,actions:n}}function Uf(e){const{name:t,enabled:n}=e;return i.jsx("div",{className:be("bg-muted text-muted-foreground rounded-lg border px-2 py-1 text-sm",n&&"bg-primary text-primary-foreground"),children:t.replace(/_/g," ")},t)}function Vf(e){const[t,n]=e;return i.jsx(zf,{action:t,allowed:n},t)}function Kf(e){const{name:t,actions:n}=e;return i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-gray-800 dark:text-white",children:t.replace("Actions","").replace(/_/g," ").trim()}),i.jsx("ul",{className:"mt-1 flex flex-wrap gap-2",children:Object.entries(n).map(Vf)})]},t)}const na=()=>{const e=V(),{type:t,props:{organisation_id:n,memberInfo:s}}=A(c=>c.dialog),r=A(c=>c.organisationsByAdmin?.memberRoles);C.useEffect(()=>{r[n]||mc(n,e)},[]);const a=C.useMemo(()=>he(r[n],"name","id"),[r,n]),o={first_name:"",last_name:"",email:"",member_role_id:"",account_password:"",confirm_password:""},l={first_name:s?.first_name||"",last_name:s?.last_name||"",member_role_id:a.find(c=>c.label==s?.role)?.value||"",company_ids:t==="editMemberByAdmin"?s.company_ids:[],sub_department_ids:t==="editMemberByAdmin"?s.sub_department_ids:[]},d=function(c,{setSubmitting:m,setErrors:u}){const f={...c};(t==="editMemberByAdmin"?fc(n,s?.id,f,e):pc(n,f,e)).then(()=>{e(J())}).catch(g=>{m(!1);const b=g?.response?.data?.detail;try{const h=b&&JSON.parse(b.replace(/'/g,'"'));h?.email?.length>0?u({email:h.email[0]}):u({general:"An error occurred."})}catch{}})};return i.jsxs("section",{children:[i.jsxs("div",{className:"-mt-6 mb-8",children:[i.jsx(di,{className:"mx-auto size-12 mb-2 drop-shadow-md"}),i.jsx("h2",{className:"text-center text-xl font-medium",children:t==="editMemberByAdmin"?"Edit Member":"Add Member"})]}),i.jsx(ce,{initialValues:t==="editMemberByAdmin"?l:o,onSubmit:d,validationSchema:t==="editMemberByAdmin"?Mf:Rf,children:({values:c,errors:m,touched:u,handleChange:f,handleSubmit:p,setFieldValue:g,isSubmitting:b})=>i.jsxs("form",{onSubmit:p,className:"my-1 grid grid-cols-1 space-y-4 gap-x-4 md:grid-cols-2",children:[i.jsx(te,{fieldName:"first_name",label:"first name",value:c.first_name,error:m.first_name,touched:u.first_name,handleChange:f,placeholder:"Enter first name"}),i.jsx(te,{fieldName:"last_name",label:"last name",value:c.last_name,error:m.last_name,touched:u.last_name,handleChange:f,placeholder:"Enter last name"}),t==="addMemberByAdmin"&&i.jsx(te,{fieldName:"email",label:"email",value:c.email,error:m.email,touched:u.email,handleChange:f,placeholder:"Enter email",autoComplete:"off"}),i.jsx("div",{className:t==="editMemberByAdmin"?"col-span-2":"",children:i.jsx(Q,{options:a,fieldName:"member_role_id",label:"member role",value:c.member_role_id,error:m.member_role_id,touched:u.member_role_id,setFieldValue:g,placeholder:"Select role"})}),t==="addMemberByAdmin"&&i.jsxs(i.Fragment,{children:[i.jsx(ct,{fieldName:"account_password",label:"account password",value:c.account_password,error:m.account_password,touched:u.account_password,handleChange:f,placeholder:"Enter password",autoComplete:"off"}),i.jsx(ct,{fieldName:"confirm_password",label:"confirm password",value:c.confirm_password,error:m.confirm_password,touched:u.confirm_password,handleChange:f,placeholder:"Enter password again",autoComplete:"off"})]}),i.jsx(de,{isSubmitting:b})]})})]})},Jf=()=>{const e=H.c(15),t=V(),{organisation_id:n,memberInfo:s}=A(Gf);let r;e[0]!==t||e[1]!==s?.id||e[2]!==n?(r=()=>{hc(n,s?.id,t).then(()=>{t(J())})},e[0]=t,e[1]=s?.id,e[2]=n,e[3]=r):r=e[3];const a=r;let o;e[4]===Symbol.for("react.memo_cache_sentinel")?(o=i.jsx("h2",{className:"text-xl font-semibold",children:"Archive Member"}),e[4]=o):o=e[4];const l=`${s?.first_name} ${s?.last_name}`;let d;e[5]!==l?(d=i.jsxs("p",{className:"text-sm text-zinc-600 dark:text-zinc-300 w-full",children:["Are you sure you want to archive"," ",i.jsx("span",{className:"font-semibold",children:l}),"? This action cannot be undone."]}),e[5]=l,e[6]=d):d=e[6];let c;e[7]===Symbol.for("react.memo_cache_sentinel")?(c=i.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-300 w-full",children:"Archiving this member will also archive all its associated data. Make sure you have backed up any necessary information before proceeding."}),e[7]=c):c=e[7];let m;e[8]!==d?(m=i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[o,d,c]}),e[8]=d,e[9]=m):m=e[9];let u;e[10]!==a?(u=i.jsx(ke,{handleConfirm:a}),e[10]=a,e[11]=u):u=e[11];let f;return e[12]!==m||e[13]!==u?(f=i.jsxs("div",{className:"-mt-4",children:[m,u]}),e[12]=m,e[13]=u,e[14]=f):f=e[14],f};function Gf(e){return e.dialog.props}function Yf(e,t){const n=H.c(4),[s,r]=C.useState(e);let a,o;return n[0]!==t||n[1]!==e?(a=()=>{const l=setTimeout(()=>r(e),t);return()=>{clearTimeout(l)}},o=[e,t],n[0]=t,n[1]=e,n[2]=a,n[3]=o):(a=n[2],o=n[3]),C.useEffect(a,o),s}function ss(e,t){if(e.length===0)return{};if(!t)return{"":e};const n={};return e.forEach(s=>{const r=s[t]||"";n[r]||(n[r]=[]),n[r].push(s)}),n}function Xf(e,t){const n=JSON.parse(JSON.stringify(e));for(const[s,r]of Object.entries(n))n[s]=r.filter(a=>!t.find(o=>o.value===a.value));return n}function Qf(e,t){for(const[,n]of Object.entries(e))if(n.some(s=>t.find(r=>r.value===s.value)))return!0;return!1}const Do=e=>{const t=H.c(8);let n,s;if(t[0]!==e?({className:n,...s}=e,t[0]=e,t[1]=n,t[2]=s):(n=t[1],s=t[2]),!vc(Zf))return null;let a;t[3]!==n?(a=be("px-2 py-4 text-center text-sm",n),t[3]=n,t[4]=a):a=t[4];let o;return t[5]!==s||t[6]!==a?(o=i.jsx("div",{className:a,"cmdk-empty":"",role:"presentation",...s}),t[5]=s,t[6]=a,t[7]=o):o=t[7],o};Do.displayName="CommandEmpty";const Io=({value:e,onChange:t,placeholder:n,defaultOptions:s=[],options:r,delay:a,onSearch:o,onSearchSync:l,loadingIndicator:d,emptyIndicator:c,maxSelected:m=Number.MAX_SAFE_INTEGER,onMaxSelected:u,hidePlaceholderWhenSelected:f,disabled:p,groupBy:g,className:b,badgeClassName:h,selectFirstItem:x=!0,creatable:y=!1,triggerSearchOnFocus:j=!1,commandProps:N,inputProps:_,hideClearAllButton:S=!1})=>{const v=C.useRef(null),[w,k]=C.useState(!1),[E,R]=C.useState(!1),[T,I]=C.useState(!1),L=C.useRef(null),[M,$]=C.useState(e||[]),[O,X]=C.useState(ss(s,g)),[B,Y]=C.useState(""),U=Yf(B,a||500),W=z=>{L.current&&!L.current.contains(z.target)&&v.current&&!v.current.contains(z.target)&&(k(!1),v.current.blur())},G=C.useCallback(z=>{const F=M.filter(P=>P.value!==z.value);$(F),t?.(F)},[t,M]),ee=C.useCallback(z=>{const F=v.current;F&&((z.key==="Delete"||z.key==="Backspace")&&F.value===""&&M.length>0&&(M[M.length-1].fixed||G(M[M.length-1])),z.key==="Escape"&&F.blur())},[G,M]);C.useEffect(()=>(w?(document.addEventListener("mousedown",W),document.addEventListener("touchend",W)):(document.removeEventListener("mousedown",W),document.removeEventListener("touchend",W)),()=>{document.removeEventListener("mousedown",W),document.removeEventListener("touchend",W)}),[w]),C.useEffect(()=>{e&&$(e)},[e]),C.useEffect(()=>{if(!r||o)return;const z=ss(r||[],g);JSON.stringify(z)!==JSON.stringify(O)&&X(z)},[s,r,g,o,O]),C.useEffect(()=>{const z=()=>{const P=l?.(U);X(ss(P||[],g))};(async()=>!l||!w||(j&&z(),U&&z()))()},[U,g,w,j]),C.useEffect(()=>{const z=async()=>{I(!0);const P=await o?.(U);X(ss(P||[],g)),I(!1)};(async()=>!o||!w||(j&&await z(),U&&await z()))()},[U,g,w,j]);const ne=()=>{if(!y||Qf(O,[{value:B,label:B}])||M.find(F=>F.value===B))return;const z=i.jsx(ns,{value:B,className:"cursor-pointer",onMouseDown:F=>{F.preventDefault(),F.stopPropagation()},onSelect:F=>{if(M.length>=m){u?.(M.length);return}Y("");const P=[...M,{value:F,label:F}];$(P),t?.(P)},children:`Create "${B}"`});if(!o&&B.length>0||o&&U.length>0&&!T)return z},K=C.useCallback(()=>{if(c)return o&&!y&&Object.keys(O).length===0?i.jsx(ns,{value:"-",disabled:!0,children:c}):i.jsx(Do,{children:c})},[y,c,o,O]),se=C.useMemo(()=>Xf(O,M),[O,M]);return C.useCallback(()=>{if(N?.filter)return N.filter;if(y)return(z,F)=>z.toLowerCase().includes(F.toLowerCase())?1:-1},[y,N?.filter]),i.jsxs(gc,{ref:L,...N,onKeyDown:z=>{ee(z),N?.onKeyDown?.(z)},className:be("h-auto overflow-visible bg-white dark:bg-white/5",N?.className),shouldFilter:!1,children:[i.jsxs("div",{className:be("border-input focus-within:border-ring focus-within:ring-ring/50 has-aria-invalid:ring-destructive/20 dark:has-aria-invalid:ring-destructive/40 has-aria-invalid:border-destructive relative min-h-[38px] rounded-md border py-0.5 text-sm transition-[color,box-shadow] outline-none focus-within:ring-[3px] has-disabled:pointer-events-none has-disabled:cursor-not-allowed has-disabled:opacity-50",{"p-1":M.length!==0,"cursor-text":!p&&M.length!==0},!S&&"pe-9",b),onClick:()=>{p||v?.current?.focus()},children:[i.jsxs("div",{className:"flex flex-wrap gap-1",children:[M.map(z=>i.jsxs("div",{className:be("animate-fadeIn bg-background text-secondary-foreground hover:bg-background relative inline-flex h-7 cursor-default items-center rounded-md border ps-2 pe-7 pl-2 text-xs font-medium transition-all disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 data-fixed:pe-2",h),"data-fixed":z.fixed,"data-disabled":p||void 0,children:[z.label,i.jsx("button",{className:"text-muted-foreground/80 hover:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 absolute -inset-y-px -end-px flex size-7 items-center justify-center rounded-e-md border border-transparent p-0 outline-hidden transition-[color,box-shadow] outline-none focus-visible:ring-[3px]",onKeyDown:F=>{F.key==="Enter"&&G(z)},onMouseDown:F=>{F.preventDefault(),F.stopPropagation()},onClick:()=>G(z),"aria-label":"Remove",children:i.jsx(Vt,{size:14,"aria-hidden":"true"})})]},z.value)),i.jsx(bc.Input,{..._,ref:v,value:B,disabled:p,onValueChange:z=>{Y(z),_?.onValueChange?.(z)},onBlur:z=>{E||k(!1),_?.onBlur?.(z)},onFocus:z=>{k(!0),j&&o?.(U),_?.onFocus?.(z)},placeholder:f&&M.length!==0?"":n,className:be("placeholder:text-muted-foreground/70 flex-1 bg-transparent outline-hidden disabled:cursor-not-allowed",{"w-full":f,"px-3 py-2":M.length===0,"ml-1":M.length!==0},_?.className)}),i.jsx("button",{type:"button",onClick:()=>{$(M.filter(z=>z.fixed)),t?.(M.filter(z=>z.fixed))},className:be("text-muted-foreground/80 hover:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 absolute end-0 top-0 flex size-9 items-center justify-center rounded-md border border-transparent transition-[color,box-shadow] outline-none focus-visible:ring-[3px]",(S||p||M.length<1||M.filter(z=>z.fixed).length===M.length)&&"hidden"),"aria-label":"Clear all",children:i.jsx(Vt,{size:16,"aria-hidden":"true"})})]}),i.jsx(xc,{className:be("pointer-events-none absolute right-2 top-1/2 -translate-y-1/2 text-muted-foreground transition-transform size-4 opacity-60",w&&"rotate-180")})]}),i.jsx("div",{className:"relative",children:i.jsx("div",{className:be("border-input absolute top-2 z-10 w-full overflow-hidden rounded-md border","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95",!w&&"hidden"),"data-state":w?"open":"closed",children:w&&i.jsx(yc,{className:"bg-popover text-popover-foreground shadow-lg outline-hidden",onMouseLeave:()=>{R(!1)},onMouseEnter:()=>{R(!0)},onMouseUp:()=>{v?.current?.focus()},children:T?i.jsx(i.Fragment,{children:d}):i.jsxs(i.Fragment,{children:[K(),ne(),!x&&i.jsx(ns,{value:"-",className:"hidden"}),Object.entries(se).map(([z,F])=>i.jsx(_c,{heading:z,className:"h-full overflow-auto",children:i.jsx(i.Fragment,{children:F.map(P=>i.jsx(ns,{value:P.value,disabled:P.disable,keywards:[P.label],onMouseDown:Z=>{Z.preventDefault(),Z.stopPropagation()},onSelect:()=>{if(M.length>=m){u?.(M.length);return}Y("");const Z=[...M,P];$(Z),t?.(Z)},className:be("cursor-pointer",P.disable&&"pointer-events-none cursor-not-allowed opacity-50"),children:P.label},P.value))})},z))]})})})})]})};Io.displayName="MultipleSelector";function Zf(e){return e.filtered.count===0}function ln(e){const t=H.c(34);let n,s,r,a,o,l,d,c,m,u;t[0]!==e?({options:l,name:o,label:a,isRequired:c,value:u,handleChange:r,error:s,touched:m,className:n,...d}=e,t[0]=e,t[1]=n,t[2]=s,t[3]=r,t[4]=a,t[5]=o,t[6]=l,t[7]=d,t[8]=c,t[9]=m,t[10]=u):(n=t[1],s=t[2],r=t[3],a=t[4],o=t[5],l=t[6],d=t[7],c=t[8],m=t[9],u=t[10]);const f=c===void 0?!0:c;let p;t[11]!==f?(p=f&&i.jsx("span",{className:"text-destructive/75 text-sm",children:"*"}),t[11]=f,t[12]=p):p=t[12];let g;t[13]!==a||t[14]!==o||t[15]!==p?(g=i.jsxs(Be,{htmlFor:o,className:"gap-0.5 text-xs uppercase",children:[a,p]}),t[13]=a,t[14]=o,t[15]=p,t[16]=g):g=t[16];let b;t[17]===Symbol.for("react.memo_cache_sentinel")?(b={label:"Select organisations"},t[17]=b):b=t[17];let h;t[18]!==n?(h=be("",n),t[18]=n,t[19]=h):h=t[19];let x;t[20]===Symbol.for("react.memo_cache_sentinel")?(x=i.jsx("p",{className:"text-center text-sm",children:"No results found"}),t[20]=x):x=t[20];let y;t[21]!==r||t[22]!==l||t[23]!==d||t[24]!==h||t[25]!==u?(y=i.jsx(Io,{commandProps:b,className:h,value:u,options:l,onChange:r,hideClearAllButton:!0,hidePlaceholderWhenSelected:!0,emptyIndicator:x,...d}),t[21]=r,t[22]=l,t[23]=d,t[24]=h,t[25]=u,t[26]=y):y=t[26];let j;t[27]!==s||t[28]!==m?(j=s&&m&&i.jsx("p",{className:"text-destructive mt-1 text-xs",children:s}),t[27]=s,t[28]=m,t[29]=j):j=t[29];let N;return t[30]!==g||t[31]!==y||t[32]!==j?(N=i.jsxs("div",{className:"*:not-first:mt-2",children:[g,y,j]}),t[30]=g,t[31]=y,t[32]=j,t[33]=N):N=t[33],N}const sa=()=>{const e=H.c(31),t=V(),{organisationProducts:n}=A(ep),{type:s,props:r}=A(tp);let a;e[0]!==t||e[1]!==n?(a=()=>{n||jc(t)},e[0]=t,e[1]=n,e[2]=a):a=e[2];let o;e[3]===Symbol.for("react.memo_cache_sentinel")?(o=[],e[3]=o):o=e[3],C.useEffect(a,o);let l;e[4]!==n?(l=he(n,"name","id"),e[4]=n,e[5]=l):l=e[5];const d=l,c=r?.name||"",m=r?.address||"";let u;e[6]!==r?(u=r?he(r?.products,"name","id"):[],e[6]=r,e[7]=u):u=e[7];let f;e[8]!==r?(f=r?.logo?{id:"existing-logo",url:r.logo}:null,e[8]=r,e[9]=f):f=e[9];let p;e[10]!==c||e[11]!==m||e[12]!==u||e[13]!==f?(p={name:c,address:m,products:u,logo:f},e[10]=c,e[11]=m,e[12]=u,e[13]=f,e[14]=p):p=e[14];const g=p;let b;e[15]!==t||e[16]!==s||e[17]!==r?.id?(b=function(v,w){const{setSubmitting:k}=w,E=new FormData;E.append("name",v.name),v.address!==""&&E.append("address",v.address),v.logo&&E.append("logo",v.logo),v.products.forEach(T=>{E.append("product_ids",T.value)}),(s==="editOrganisation"?Nc(r?.id,E,t):wc(E,t)).then(()=>{t(J())}).catch(()=>{k(!1)})},e[15]=t,e[16]=s,e[17]=r?.id,e[18]=b):b=e[18];const h=b;let x;e[19]===Symbol.for("react.memo_cache_sentinel")?(x=i.jsx(mo,{className:"mx-auto size-16 drop-shadow-md"}),e[19]=x):x=e[19];const y=s==="editOrganisation"?"Edit Organisation":"Create Organisation";let j;e[20]!==y?(j=i.jsxs("div",{className:"-mt-6 mb-8",children:[x,i.jsx("h2",{className:"text-center text-xl font-medium",children:y})]}),e[20]=y,e[21]=j):j=e[21];let N;e[22]!==d?(N=v=>{const{values:w,errors:k,touched:E,handleChange:R,handleSubmit:T,setFieldValue:I,isSubmitting:L}=v;return i.jsxs("form",{onSubmit:T,className:"my-1 space-y-4",children:[i.jsx(te,{fieldName:"name",label:"organisation name",value:w.name,error:k.name,touched:E.name,handleChange:R,placeholder:"Enter organisation name"}),i.jsx(te,{fieldName:"address",label:"address",value:w.address,error:k.address,touched:E.address,handleChange:R,placeholder:"Enter organisation address",isRequired:!1}),i.jsx(ln,{fieldName:"products",label:"Products",value:w.products,error:k.products,touched:E.products,placeholder:"Select products",options:d,handleChange:M=>I("products",M),isRequired:!1}),i.jsxs("div",{children:[i.jsx(Be,{className:"mb-1 gap-0.5 text-xs uppercase",children:"LOGO"}),i.jsx(_s,{onFileChange:M=>{I("logo",M)},initialFiles:w.logo&&typeof w.logo=="object"&&w.logo.url?[w.logo]:[]})]}),i.jsx(de,{isSubmitting:L})]})},e[22]=d,e[23]=N):N=e[23];let _;e[24]!==h||e[25]!==g||e[26]!==N?(_=i.jsx(ce,{initialValues:g,onSubmit:h,validationSchema:Df,children:N}),e[24]=h,e[25]=g,e[26]=N,e[27]=_):_=e[27];let S;return e[28]!==j||e[29]!==_?(S=i.jsxs("section",{children:[j,_]}),e[28]=j,e[29]=_,e[30]=S):S=e[30],S};function ep(e){return e.organisationsByAdmin}function tp(e){return e.dialog}const np=()=>{const e=H.c(14),t=V(),n=A(sp);let s;e[0]!==t||e[1]!==n?.id?(s=()=>{Sc(n?.id,t).then(()=>{t(J())})},e[0]=t,e[1]=n?.id,e[2]=s):s=e[2];const r=s;let a;e[3]===Symbol.for("react.memo_cache_sentinel")?(a=i.jsx("h2",{className:"text-xl font-semibold",children:"Archive Organisation"}),e[3]=a):a=e[3];const o=n?.name;let l;e[4]!==o?(l=i.jsxs("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:["Are you sure you want to archive"," ",i.jsx("span",{className:"font-semibold",children:o}),"? This action cannot be undone."]}),e[4]=o,e[5]=l):l=e[5];let d;e[6]===Symbol.for("react.memo_cache_sentinel")?(d=i.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-300 w-full",children:"Archiving this organisation will also archive all its associated data including members, roles, permissions, and settings. Make sure you have backed up any necessary information before proceeding."}),e[6]=d):d=e[6];let c;e[7]!==l?(c=i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[a,l,d]}),e[7]=l,e[8]=c):c=e[8];let m;e[9]!==r?(m=i.jsx(ke,{handleConfirm:r}),e[9]=r,e[10]=m):m=e[10];let u;return e[11]!==c||e[12]!==m?(u=i.jsxs("div",{className:"-mt-4",children:[c,m]}),e[11]=c,e[12]=m,e[13]=u):u=e[13],u};function sp(e){return e.dialog.props}const rp={addOrganisation:sa,editOrganisation:sa,archiveOrganisation:np,addMemberByAdmin:na,editMemberByAdmin:na,archiveMemberByAdmin:Jf,addMemberRoleByAdmin:ta,editMemberRoleByAdmin:ta,archiveMemberRoleByAdmin:$f,memberRoleDetailsByAdmin:qf,addAdmin:ea,editAdmin:ea,archiveAdmin:Af,resetAdminPassword:gf,addAdminRole:Zi,editAdminRole:Zi,archiveAdminRole:pf,adminRoleDetails:yf},We=e=>{const t=H.c(38);let n,s,r,a,o,l,d,c,m;t[0]!==e?({fieldName:r,label:a,isRequired:d,value:m,setFieldValue:l,error:s,touched:c,className:n,...o}=e,t[0]=e,t[1]=n,t[2]=s,t[3]=r,t[4]=a,t[5]=o,t[6]=l,t[7]=d,t[8]=c,t[9]=m):(n=t[1],s=t[2],r=t[3],a=t[4],o=t[5],l=t[6],d=t[7],c=t[8],m=t[9]);const u=d===void 0?!0:d,[f,p]=C.useState(""),g=C.useRef(null);let b,h;t[10]!==m?(b=()=>{p(po(m))},h=[m],t[10]=m,t[11]=b,t[12]=h):(b=t[11],h=t[12]),C.useEffect(b,h);let x;t[13]!==r||t[14]!==l?(x=E=>{const R=g.current,T=E.target.value,I=R.selectionStart,L=T.replace(/[^0-9.]/g,""),M=L.split(".");if(M.length>2)return;const $=M[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),O=M.length===2?`${$}.${M[1]}`:$,X=T.slice(0,I).replace(/[^0-9.]/g,"");let B=0;p(O);const Y=parseFloat(L);l(r,isNaN(Y)?"":Y),requestAnimationFrame(()=>{let U=0;for(let W=0;W<O.length;W++)if(/[0-9.]/.test(O[W])&&U++,U===X.length){B=W+1;break}R.setSelectionRange(B,B)})},t[13]=r,t[14]=l,t[15]=x):x=t[15];const y=x;let j;t[16]!==u?(j=u&&i.jsx("span",{className:"text-destructive/75 text-sm",children:" *"}),t[16]=u,t[17]=j):j=t[17];let N;t[18]!==r||t[19]!==a||t[20]!==j?(N=i.jsxs(Be,{htmlFor:r,className:"gap-0.5 text-sm capitalize",children:[a,j]}),t[18]=r,t[19]=a,t[20]=j,t[21]=N):N=t[21];const _=s&&c;let S;t[22]!==n?(S=be("mt-0.5 rounded-md border bg-white p-5 px-3 dark:border-[#dcdcdc]/10 dark:bg-white/5",n),t[22]=n,t[23]=S):S=t[23];let v;t[24]!==f||t[25]!==r||t[26]!==y||t[27]!==o||t[28]!==_||t[29]!==S?(v=i.jsx(fo,{ref:g,id:r,name:r,value:f,"aria-invalid":_,onChange:y,className:S,...o}),t[24]=f,t[25]=r,t[26]=y,t[27]=o,t[28]=_,t[29]=S,t[30]=v):v=t[30];let w;t[31]!==s||t[32]!==c?(w=s&&c&&i.jsx("p",{className:"text-destructive mt-1 text-xs",children:s}),t[31]=s,t[32]=c,t[33]=w):w=t[33];let k;return t[34]!==w||t[35]!==N||t[36]!==v?(k=i.jsxs("div",{children:[N,v,w]}),t[34]=w,t[35]=N,t[36]=v,t[37]=k):k=t[37],k},ip=le({bank:D().required("Bank is required"),bank_code:D().nullable(),bank_type:D().required("Bank type is required"),bank_holder:D().required("Bank holder is required"),bank_number:D().required("Bank number is required"),maximum_bank_balance:pe().required("Maximum bank balance is required").min(0,"Maximum Bank Balance must be 0 or a positive number").typeError("Maximum Bank Balance must be a valid number"),initial_balance:pe().nullable().min(0,"Initial Balance must be 0 or a positive number").typeError("Initial Balance must be a valid number").when("maximum_bank_balance",(e,t)=>e!=null?t.max(e,"Initial Balance cannot be greater than Maximum Bank Balance"):t),daily_limit:pe().nullable().min(0,"Daily limit must be 0 or a positive number").typeError("Daily limit must be a valid number"),bank_currency:pe().required("Currency is required")}),ap=le({bank:pe().required("Bank is required"),bank_code:D().nullable(),bank_type:pe().required("Bank Type is required"),bank_holder:D().required("Bank Holder is required"),bank_number:D().required("Bank Number is required"),maximum_bank_balance:pe().required("Maximum Bank Balance is required").min(0,"Maximum Bank Balance must be 0 or a positive number").typeError("Maximum Bank Balance must be a valid number"),daily_limit:pe().nullable().min(0,"Daily limit must be 0 or a positive number").typeError("Daily limit must be a valid number"),display:pe().required("Display is required"),status:pe().required("Status is required"),bank_currency:pe().required("Currency is required")}),op=le({from_bank_id:D().required("From bank is required"),to_bank_id:D().required("To bank is required"),initial_amount:pe().required("Initial amount is required").positive("Initial amount must be greater than zero").typeError("Initial amount must be a valid number"),exchange_rate:pe().required("Exchange rate is required").positive("Exchange rate must be greater than zero").typeError("Exchange rate must be a valid number"),amount:pe().required("Amount is required").positive("Amount must be greater than zero").typeError("Amount must be a valid number"),operation:D().oneOf(["*","/"],"Invalid operation").required("Operation is required"),description:D().nullable(),transaction_date:Ze().required("Transaction Date is required")}),lp=le({from_bank_id:D().required("From bank is required"),transaction_type:pe().required("Transaction type is required"),amount:pe().required("Amount is required").positive("Amount must be greater than zero").typeError("Amount must be a valid number"),description:D().nullable(),extra_description:D().nullable(),transaction_date:Ze().required("Transaction Date is required")}),cp=le().shape({description:D().required("Description is required"),purpose:pe().required("Purpose is required")}),ra=()=>{const e=V(),{user:t}=A(u=>u.auth),{type:n,props:s}=A(u=>u.dialog),{bankTypes:r,currencyTypes:a}=A(u=>u.banks);C.useEffect(()=>{!r&&Cc(e),!a&&ho(e)},[]);const o=C.useMemo(()=>he(r,"string","int"),[r]),l=C.useMemo(()=>he(a,"string","int"),[a]),d={bank:"",bank_code:"",bank_type:"",bank_holder:"",bank_number:"",maximum_bank_balance:0,initial_balance:0,daily_limit:0,bank_currency:""},c={bank:s?.bank?o.find(u=>u.label===s?.bank)?.value:"",bank_code:s?.bank_code||"",bank_type:s?.bank_type?Wi.find(u=>u.label===s?.bank_type)?.value:"",bank_holder:s?.bank_holder||"",bank_number:s?.bank_number||"",maximum_bank_balance:s?.maximum_bank_balance||0,daily_limit:s?.daily_limit||0,display:s?.display?"1":"2",status:s?.status==="Active"?"1":"2",bank_currency:s?.bank_currency?l.find(u=>u.label===s?.bank_currency)?.value:""},m=(u,{setSubmitting:f})=>{const p={...u};(n==="editBank"?Ac(t.organisation_id,s?.id,p,e):Ec(t.organisation_id,p,e)).then(()=>{e(J(!1))}).catch(()=>f(!1))};return i.jsxs("section",{children:[i.jsxs("div",{className:"-mt-6 mb-8",children:[i.jsx(Qt,{className:"mx-auto size-16 drop-shadow-md"}),i.jsx("h2",{className:"mt-2 text-center text-xl font-medium",children:n==="editBank"?"Edit Bank":"Add New Bank"})]}),i.jsx(ce,{initialValues:n==="editBank"?c:d,validationSchema:n==="editBank"?ap:ip,onSubmit:m,children:({values:u,errors:f,touched:p,handleChange:g,handleSubmit:b,setFieldValue:h,isSubmitting:x})=>i.jsxs("form",{onSubmit:b,className:"my-1 grid grid-cols-1 space-y-4 gap-x-4 md:grid-cols-2 -mt-2",children:[i.jsx("div",{className:be(n==="addNewBank"&&"md:col-span-2"),children:i.jsx(Q,{fieldName:"bank",label:"Bank",options:o,value:u.bank?Number(u?.bank):"",error:f.bank,touched:p.bank,setFieldValue:h,placeholder:"Select Bank"})}),i.jsx(te,{fieldName:"bank_code",label:"Bank Code",value:u.bank_code,error:f.bank_code,touched:p.bank_code,handleChange:g,placeholder:"Enter bank code",isRequired:!1}),i.jsx(Q,{fieldName:"bank_type",label:"Bank Type",options:Wi,value:u.bank_type,error:f.bank_type,touched:p.bank_type,setFieldValue:h,placeholder:"Select Bank Type"}),i.jsx(Q,{fieldName:"bank_currency",label:"Currency",options:l,value:u.bank_currency?Number(u?.bank_currency):"",error:f.bank_currency,touched:p.bank_currency,setFieldValue:h,placeholder:"Select currency type"}),i.jsx(te,{fieldName:"bank_holder",label:"Bank Holder",value:u.bank_holder,error:f.bank_holder,touched:p.bank_holder,handleChange:g,placeholder:"Enter bank holder name"}),i.jsx(te,{fieldName:"bank_number",label:"Bank Number",value:u.bank_number,error:f.bank_number,touched:p.bank_number,handleChange:g,placeholder:"Enter bank number"}),i.jsx(We,{fieldName:"maximum_bank_balance",label:"Maximum Bank Balance",value:u.maximum_bank_balance,error:f.maximum_bank_balance,touched:p.maximum_bank_balance,setFieldValue:h}),n==="addNewBank"&&i.jsx(We,{fieldName:"initial_balance",label:"initial balance",value:u.initial_balance,error:f.initial_balance,touched:p.initial_balance,setFieldValue:h}),i.jsx(We,{fieldName:"daily_limit",label:"daily limit",value:u.daily_limit,error:f.daily_limit,touched:p.daily_limit,setFieldValue:h}),n==="editBank"&&i.jsxs(i.Fragment,{children:[i.jsx(Q,{fieldName:"display",label:"display",options:[{value:"1",label:"Yes"},{value:"2",label:"No"}],value:u.display,error:f.display,touched:p.display,setFieldValue:h}),i.jsx(Q,{fieldName:"status",label:"status",options:kc,value:u.status,error:f.status,touched:p.status,setFieldValue:h})]}),i.jsx(de,{isSubmitting:x})]})})]})},dp=()=>{const e=H.c(22),t=V(),{user:n}=A(up),{members:s}=A(mp),{props:r}=A(fp);let a;e[0]!==t||e[1]!==s||e[2]!==n?.organisation_id?(a=()=>{!s&&ui(n?.organisation_id,t)},e[0]=t,e[1]=s,e[2]=n?.organisation_id,e[3]=a):a=e[3];let o;e[4]===Symbol.for("react.memo_cache_sentinel")?(o=[],e[4]=o):o=e[4],C.useEffect(a,o);const l=hp;let d;e[5]!==s?(d=l(s),e[5]=s,e[6]=d):d=e[6];const c=d,m=r?.members;let u;e[7]!==m?(u=l(m),e[7]=m,e[8]=u):u=e[8];let f;e[9]!==u?(f={members:u},e[9]=u,e[10]=f):f=e[10];const p=f;let g;e[11]!==r?.id||e[12]!==t||e[13]!==n?.organisation_id?(g=function(j,N){const{setSubmitting:_}=N,S={};S.member_ids=[],j.members.map(v=>S.member_ids.push(v.value)),Rc(n?.organisation_id,r?.id,S,t).then(()=>t(J())).catch(()=>_(!1))},e[11]=r?.id,e[12]=t,e[13]=n?.organisation_id,e[14]=g):g=e[14];const b=g;let h;e[15]===Symbol.for("react.memo_cache_sentinel")?(h=i.jsxs("div",{className:"-mt-6 mb-8",children:[i.jsx(di,{className:"mx-auto size-14 drop-shadow-md"}),i.jsx("h2",{className:"mt-2 text-center text-xl font-medium",children:"Assign Member"})]}),e[15]=h):h=e[15];let x;e[16]!==c?(x=j=>{const{values:N,errors:_,touched:S,handleSubmit:v,setFieldValue:w,isSubmitting:k}=j;return i.jsxs("form",{onSubmit:v,className:"my-1 space-y-4",children:[i.jsx(ln,{fieldName:"members",label:"Members",value:N.members,error:_.members,touched:S.members,placeholder:"Select members",options:c,handleChange:E=>w("members",E),isRequired:!1}),i.jsx(de,{isSubmitting:k})]})},e[16]=c,e[17]=x):x=e[17];let y;return e[18]!==b||e[19]!==p||e[20]!==x?(y=i.jsxs("section",{children:[h,i.jsx(ce,{initialValues:p,onSubmit:b,children:x})]}),e[18]=b,e[19]=p,e[20]=x,e[21]=y):y=e[21],y};function up(e){return e.auth}function mp(e){return e.organisation}function fp(e){return e.dialog}function pp(e){return{label:`${e.first_name} ${e.last_name}`,value:e.id}}function hp(e){return e?e.map(pp):[]}const gp=()=>{const e=H.c(86),{props:t}=A(bp),{currencyTypes:n}=A(xp);if(!t){let $e;return e[0]===Symbol.for("react.memo_cache_sentinel")?($e=i.jsx("p",{className:"text-muted-foreground text-center",children:"No bank data available."}),e[0]=$e):$e=e[0],$e}let s;e[1]!==t.bank_currency||e[2]!==n?(s=n?.find($e=>$e?.string===t?.bank_currency).symbol,e[1]=t.bank_currency,e[2]=n,e[3]=s):s=e[3];const r=s;let a;e[4]===Symbol.for("react.memo_cache_sentinel")?(a=i.jsx("div",{className:"-mt-4 mb-4 text-center",children:i.jsx("h2",{className:"text-2xl font-semibold",children:"Bank Details"})}),e[4]=a):a=e[4];let o;e[5]===Symbol.for("react.memo_cache_sentinel")?(o=i.jsx(fi,{className:"h-10 w-10 rounded-full border border-black/10",children:i.jsx(pi,{className:"flex w-full items-center justify-center dark:bg-white/10",children:i.jsx(Mc,{size:22,className:"opacity-60","aria-hidden":"true"})})}),e[5]=o):o=e[5];const l=t.bank||"Unnamed Bank";let d;e[6]!==l?(d=i.jsxs("div",{className:"flex items-center gap-2",children:[o,l]}),e[6]=l,e[7]=d):d=e[7];const c=t.status==="Active"?"bg-emerald-500":"bg-destructive";let m;e[8]!==c?(m=be("size-1.5 rounded-full",c),e[8]=c,e[9]=m):m=e[9];let u;e[10]!==m?(u=i.jsx("span",{className:m,"aria-hidden":"true"}),e[10]=m,e[11]=u):u=e[11];let f;e[12]!==t.status||e[13]!==u?(f=i.jsx("div",{className:"flex gap-2",children:i.jsxs(dt,{variant:"outline",className:"gap-1 rounded-md",children:[u,t.status]})}),e[12]=t.status,e[13]=u,e[14]=f):f=e[14];let p;e[15]!==d||e[16]!==f?(p=i.jsx(Tc,{children:i.jsxs(Dc,{className:"flex items-center justify-between",children:[d,f]})}),e[15]=d,e[16]=f,e[17]=p):p=e[17];let g;e[18]===Symbol.for("react.memo_cache_sentinel")?(g=i.jsx("span",{className:"text-muted-foreground",children:"Bank Number"}),e[18]=g):g=e[18];const b=t.bank_number||"N/A";let h;e[19]!==b?(h=i.jsxs("div",{children:[g,i.jsx("p",{children:b})]}),e[19]=b,e[20]=h):h=e[20];let x;e[21]===Symbol.for("react.memo_cache_sentinel")?(x=i.jsx("span",{className:"text-muted-foreground",children:"Bank Code"}),e[21]=x):x=e[21];const y=t.bank_code||"N/A";let j;e[22]!==y?(j=i.jsxs("div",{children:[x,i.jsx("p",{children:y})]}),e[22]=y,e[23]=j):j=e[23];let N;e[24]===Symbol.for("react.memo_cache_sentinel")?(N=i.jsx("span",{className:"text-muted-foreground",children:"Bank Type"}),e[24]=N):N=e[24];const _=t.bank_type||"N/A";let S;e[25]!==_?(S=i.jsxs("div",{children:[N,i.jsx("p",{children:_})]}),e[25]=_,e[26]=S):S=e[26];let v;e[27]===Symbol.for("react.memo_cache_sentinel")?(v=i.jsx("span",{className:"text-muted-foreground",children:"Bank Holder"}),e[27]=v):v=e[27];const w=t.bank_holder||"N/A";let k;e[28]!==w?(k=i.jsxs("div",{children:[v,i.jsx("p",{children:w})]}),e[28]=w,e[29]=k):k=e[29];let E;e[30]===Symbol.for("react.memo_cache_sentinel")?(E=i.jsx("span",{className:"text-muted-foreground",children:"Currency"}),e[30]=E):E=e[30];const R=t.bank_currency||"N/A";let T;e[31]!==R?(T=i.jsxs("div",{children:[E,i.jsx("p",{children:R})]}),e[31]=R,e[32]=T):T=e[32];let I;e[33]===Symbol.for("react.memo_cache_sentinel")?(I=i.jsx("span",{className:"text-muted-foreground",children:"Display"}),e[33]=I):I=e[33];const L=t.display?"Yes":"No";let M;e[34]!==L?(M=i.jsxs("div",{children:[I,i.jsx("p",{children:L})]}),e[34]=L,e[35]=M):M=e[35];let $;e[36]!==h||e[37]!==j||e[38]!==S||e[39]!==k||e[40]!==T||e[41]!==M?($=i.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3",children:[h,j,S,k,T,M]}),e[36]=h,e[37]=j,e[38]=S,e[39]=k,e[40]=T,e[41]=M,e[42]=$):$=e[42];let O;e[43]===Symbol.for("react.memo_cache_sentinel")?(O=i.jsx(fe,{}),e[43]=O):O=e[43];let X;e[44]===Symbol.for("react.memo_cache_sentinel")?(X=i.jsx("span",{className:"text-muted-foreground",children:"Maximum Balance"}),e[44]=X):X=e[44];let B;e[45]!==r?(B=i.jsx("span",{className:"mr-1",children:r}),e[45]=r,e[46]=B):B=e[46];let Y;e[47]!==t.maximum_bank_balance?(Y=on(t.maximum_bank_balance),e[47]=t.maximum_bank_balance,e[48]=Y):Y=e[48];let U;e[49]!==B||e[50]!==Y?(U=i.jsxs("div",{children:[X,i.jsxs("p",{children:[B,Y]})]}),e[49]=B,e[50]=Y,e[51]=U):U=e[51];let W;e[52]===Symbol.for("react.memo_cache_sentinel")?(W=i.jsx("span",{className:"text-muted-foreground",children:"Current Balance"}),e[52]=W):W=e[52];let G;e[53]!==r?(G=i.jsx("span",{className:"mr-1",children:r}),e[53]=r,e[54]=G):G=e[54];let ee;e[55]!==t.total_balance?(ee=on(t.total_balance),e[55]=t.total_balance,e[56]=ee):ee=e[56];let ne;e[57]!==G||e[58]!==ee?(ne=i.jsxs("div",{children:[W,i.jsxs("p",{children:[G,ee]})]}),e[57]=G,e[58]=ee,e[59]=ne):ne=e[59];let K;e[60]===Symbol.for("react.memo_cache_sentinel")?(K=i.jsx("span",{className:"text-muted-foreground",children:"Daily Limit"}),e[60]=K):K=e[60];let se;e[61]!==r?(se=i.jsx("span",{className:"mr-1",children:r}),e[61]=r,e[62]=se):se=e[62];let z;e[63]!==t.daily_limit?(z=on(t.daily_limit),e[63]=t.daily_limit,e[64]=z):z=e[64];let F;e[65]!==se||e[66]!==z?(F=i.jsxs("div",{children:[K,i.jsxs("p",{children:[se,z]})]}),e[65]=se,e[66]=z,e[67]=F):F=e[67];let P;e[68]!==U||e[69]!==ne||e[70]!==F?(P=i.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 md:grid-cols-3",children:[U,ne,F]}),e[68]=U,e[69]=ne,e[70]=F,e[71]=P):P=e[71];let Z;e[72]!==$||e[73]!==P?(Z=i.jsxs(hn,{className:"space-y-4 text-sm",children:[$,O,P]}),e[72]=$,e[73]=P,e[74]=Z):Z=e[74];let re;e[75]!==Z||e[76]!==p?(re=i.jsxs(pn,{className:"dark:bg-card bg-white shadow-none",children:[p,Z]}),e[75]=Z,e[76]=p,e[77]=re):re=e[77];let ie;e[78]===Symbol.for("react.memo_cache_sentinel")?(ie=i.jsx("h3",{className:"mb-2 text-lg font-medium",children:"Members with Access"}),e[78]=ie):ie=e[78];let ae;e[79]!==t.members?(ae=t.members?.map(yp)||i.jsx("p",{className:"text-muted-foreground text-sm",children:"No members found."}),e[79]=t.members,e[80]=ae):ae=e[80];let ge;e[81]!==ae?(ge=i.jsxs("div",{className:"mt-6",children:[ie,i.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:ae})]}),e[81]=ae,e[82]=ge):ge=e[82];let Ae;return e[83]!==re||e[84]!==ge?(Ae=i.jsxs("section",{className:"p-1",children:[a,re,ge]}),e[83]=re,e[84]=ge,e[85]=Ae):Ae=e[85],Ae};function bp(e){return e.dialog}function xp(e){return e.banks}function yp(e){return i.jsx(pn,{className:"dark:bg-card overflow-hidden rounded-xl bg-white py-2 shadow-none",children:i.jsx(hn,{className:"px-4 text-sm",children:i.jsx(mi,{member:e,view:"table"})})},e.id)}const ia=e=>{const t=H.c(44);let n,s,r,a,o,l,d,c,m,u;t[0]!==e?({fieldName:r,label:a,isRequired:d,value:u,setFieldValue:l,error:s,touched:m,className:n,symbol:c,...o}=e,t[0]=e,t[1]=n,t[2]=s,t[3]=r,t[4]=a,t[5]=o,t[6]=l,t[7]=d,t[8]=c,t[9]=m,t[10]=u):(n=t[1],s=t[2],r=t[3],a=t[4],o=t[5],l=t[6],d=t[7],c=t[8],m=t[9],u=t[10]);const f=d===void 0?!0:d,p=c===void 0?"MR":c,[g,b]=C.useState(""),h=C.useRef(null);let x,y;t[11]!==u?(x=()=>{b(po(u))},y=[u],t[11]=u,t[12]=x,t[13]=y):(x=t[12],y=t[13]),C.useEffect(x,y);let j;t[14]!==r||t[15]!==l?(j=L=>{const M=h.current,$=L.target.value,O=M.selectionStart,X=$.replace(/[^0-9.]/g,""),B=X.split(".");if(B.length>2)return;const Y=B[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),U=B.length===2?`${Y}.${B[1]}`:Y,W=$.slice(0,O).replace(/[^0-9.]/g,"");let G=0;b(U);const ee=parseFloat(X);l(r,isNaN(ee)?"":ee),requestAnimationFrame(()=>{let ne=0;for(let K=0;K<U.length;K++)if(/[0-9.]/.test(U[K])&&ne++,ne===W.length){G=K+1;break}M.setSelectionRange(G,G)})},t[14]=r,t[15]=l,t[16]=j):j=t[16];const N=j;let _;t[17]!==f?(_=f&&i.jsx("span",{className:"text-destructive/75 text-sm",children:" *"}),t[17]=f,t[18]=_):_=t[18];let S;t[19]!==r||t[20]!==a||t[21]!==_?(S=i.jsxs(Be,{htmlFor:r,className:"gap-0.5 text-xs uppercase",children:[a,_]}),t[19]=r,t[20]=a,t[21]=_,t[22]=S):S=t[22];let v;t[23]!==p?(v=i.jsx("div",{className:"absolute text-sm font-medium top-1/2 -translate-y-1/2 left-3 text-muted-foreground border-r pr-2 w-8 border-r-foreground",children:p}),t[23]=p,t[24]=v):v=t[24];const w=s&&m;let k;t[25]!==n?(k=be("mt-0.5 rounded-md border bg-white p-5 px-3 dark:border-[#dcdcdc]/10 dark:bg-white/5 ps-16",n),t[25]=n,t[26]=k):k=t[26];let E;t[27]!==g||t[28]!==r||t[29]!==N||t[30]!==o||t[31]!==k||t[32]!==w?(E=i.jsx(fo,{ref:h,id:r,name:r,value:g,"aria-invalid":w,onChange:N,className:k,...o}),t[27]=g,t[28]=r,t[29]=N,t[30]=o,t[31]=k,t[32]=w,t[33]=E):E=t[33];let R;t[34]!==E||t[35]!==v?(R=i.jsxs("div",{className:"relative",children:[v,E]}),t[34]=E,t[35]=v,t[36]=R):R=t[36];let T;t[37]!==s||t[38]!==m?(T=s&&m&&i.jsx("p",{className:"text-destructive mt-1 text-xs",children:s}),t[37]=s,t[38]=m,t[39]=T):T=t[39];let I;return t[40]!==R||t[41]!==T||t[42]!==S?(I=i.jsxs("div",{children:[S,R,T]}),t[40]=R,t[41]=T,t[42]=S,t[43]=I):I=t[43],I},_p=e=>{const t=H.c(10),{from_bank_id:n,to_bank_id:s,initial_amount:r,exchange_rate:a,amount:o,operation:l,setFieldValue:d,getCurrencySymbol:c}=e;let m,u;return t[0]!==o||t[1]!==a||t[2]!==n||t[3]!==c||t[4]!==r||t[5]!==l||t[6]!==d||t[7]!==s?(m=()=>{const f=c(n),p=c(s);f&&p&&f===p&&a!==1&&d("exchange_rate",1);const b=parseFloat(r),h=parseFloat(a);if(!isNaN(b)&&!isNaN(h)){let x=l==="*"?b*h:b/h;x=+x.toFixed(4),o!==x&&d("amount",x)}},u=[n,s,r,a,o,l,d,c],t[0]=o,t[1]=a,t[2]=n,t[3]=c,t[4]=r,t[5]=l,t[6]=d,t[7]=s,t[8]=m,t[9]=u):(m=t[8],u=t[9]),C.useEffect(m,u),null},vp=()=>{const e=V(),{user:t}=A(u=>u.auth),{props:n}=A(u=>u.dialog),{transactionDescriptions:s,currencyTypes:r}=A(u=>u.banks),{getMyActiveBanks:a}=Vn();C.useEffect(()=>{s||go(t.organisation_id,e),r||ho(e)},[]);const o=a(),l=C.useMemo(()=>o?.map(u=>({label:`${u.bank_code} (Bank No: ${u.bank_number})`,value:u.id})),[o]),d={from_bank_id:n?.id||"",to_bank_id:"",transaction_date:new Date,initial_amount:0,exchange_rate:0,amount:0,description:"",operation:"*"},c=(u,{setSubmitting:f})=>{const p={...u,transaction_date:ve(u.transaction_date,"yyyy-MM-dd")};Ic(t.organisation_id,p,e).then(()=>e(J())).catch(()=>f(!1))},m=u=>{const f=o?.find(p=>p.id===u);return r?.find(p=>p.string===f?.bank_currency)?.symbol||""};return i.jsxs("section",{children:[i.jsxs("div",{className:"-mt-6 mb-8",children:[i.jsx(bo,{className:"mx-auto size-16 drop-shadow-md"}),i.jsx("h2",{className:"text-center text-xl font-medium",children:"Transfer"})]}),i.jsx(ce,{initialValues:d,onSubmit:c,validationSchema:op,children:({values:u,errors:f,touched:p,handleSubmit:g,handleChange:b,setFieldValue:h,isSubmitting:x})=>i.jsxs("form",{onSubmit:g,className:"my-1 grid grid-cols-1 space-y-4 gap-x-4 md:grid-cols-2",children:[i.jsx(_p,{from_bank_id:u.from_bank_id,to_bank_id:u.to_bank_id,initial_amount:u.initial_amount,exchange_rate:u.exchange_rate,amount:u.amount,operation:u.operation,setFieldValue:h,getCurrencySymbol:m}),i.jsx(Q,{options:l,fieldName:"from_bank_id",label:"From Bank",value:u.from_bank_id,error:f.from_bank_id,touched:p.from_bank_id,setFieldValue:h,placeholder:"Select bank",disabled:!!n}),i.jsx(Q,{options:l?.filter(y=>y.value!==u.from_bank_id),fieldName:"to_bank_id",label:"To Bank",value:u.to_bank_id,error:f.to_bank_id,touched:p.to_bank_id,setFieldValue:h,placeholder:"Select bank"}),i.jsx(ia,{fieldName:"initial_amount",label:"Initial Amount",value:u.initial_amount,error:f.initial_amount,touched:p.initial_amount,setFieldValue:h,symbol:m(u.from_bank_id)}),i.jsx(Q,{options:[{label:"Multiply (*)",value:"*"},{label:"Divide (/)",value:"/"}],fieldName:"operation",label:"Operation",value:u.operation,error:f.operation,touched:p.operation,setFieldValue:h,placeholder:"Select operation"}),i.jsx(We,{fieldName:"exchange_rate",label:"Exchange Rate",value:u.exchange_rate,error:f.exchange_rate,touched:p.exchange_rate,setFieldValue:h,readOnly:u.to_bank_id&&u.from_bank_id&&m(u.to_bank_id)===m(u.from_bank_id)}),i.jsx(ia,{fieldName:"amount",label:"Amount",value:u.amount,error:f.amount,touched:p.amount,setFieldValue:h,readOnly:!0,symbol:m(u.to_bank_id)}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(et,{fieldName:"transaction_date",label:"Date",error:f.transaction_date,touched:p.transaction_date,date:u.transaction_date,setDate:y=>h("transaction_date",y)})}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(Kt,{fieldName:"description",label:"Description",value:u.description,error:f.description,touched:p.description,handleChange:b,placeholder:"Enter description",isRequired:!0})}),i.jsx(de,{isSubmitting:x})]})})]})},jp=()=>{const e=V(),{user:t}=A(u=>u.auth),{props:n}=A(u=>u.dialog),{transactionDescriptions:s}=A(u=>u.banks),{getMyActiveBanks:r}=Vn();C.useEffect(()=>{s||go(t.organisation_id,e)},[]);const a=C.useMemo(()=>he(s?.filter(u=>u.purpose==="Deposit"),"description","description"),[s]),o=C.useMemo(()=>he(s?.filter(u=>u.purpose==="Withdraw"),"description","description"),[s]),l=r(),d=C.useMemo(()=>l?.map(u=>({label:`${u.bank_code} (Bank No: ${u.bank_number})`,value:u.id})),[l]),c={from_bank_id:n?.id||"",transaction_date:new Date,transaction_type:"",amount:0,description:""},m=function(u,{setSubmitting:f}){const p={...u,transaction_date:ve(u.transaction_date,"yyyy-MM-dd")};Lc(t.organisation_id,p.from_bank_id,p,e).then(()=>e(J())).catch(()=>f(!1))};return i.jsxs("section",{children:[i.jsxs("div",{className:"-mt-6 mb-8",children:[i.jsx(bo,{className:"mx-auto size-16 drop-shadow-md"}),i.jsx("h2",{className:"text-center text-xl font-medium",children:"Deposit/Withdraw"})]}),i.jsx(ce,{initialValues:c,onSubmit:m,validationSchema:lp,children:({values:u,errors:f,touched:p,handleSubmit:g,setFieldValue:b,handleChange:h,isSubmitting:x})=>i.jsxs("form",{onSubmit:g,className:"my-1 grid grid-cols-1 space-y-4 gap-x-4 md:grid-cols-2",children:[i.jsx(et,{fieldName:"transaction_date",label:"Date",error:f.transaction_date,touched:p.transaction_date,date:u.transaction_date,setDate:y=>b("transaction_date",y)}),i.jsx(Q,{options:xo,fieldName:"transaction_type",label:"transaction type",value:u.transaction_type,error:f.transaction_type,touched:p.transaction_type,setFieldValue:b,placeholder:"Select type"}),i.jsx(We,{fieldName:"amount",label:"amount",value:u.amount,error:f.amount,touched:p.amount,setFieldValue:b}),i.jsx(Q,{options:d,fieldName:"from_bank_id",label:"Bank",value:u.from_bank_id,error:f.from_bank_id,touched:p.from_bank_id,setFieldValue:b,placeholder:"Select bank",disabled:n}),i.jsxs("div",{className:"md:col-span-2 space-y-4",children:[i.jsx(Q,{options:u.transaction_type=="1"?a:o,fieldName:"description",label:"description",value:u.description,error:f.description,touched:p.description,setFieldValue:b,placeholder:"Select description",isRequired:!1}),i.jsx(Kt,{fieldName:"extra_description",label:"extra description",value:u.extra_description,error:f.extra_description,touched:p.extra_description,handleChange:h,placeholder:"Enter extra description",isRequired:!1})]}),i.jsx(de,{isSubmitting:x})]})})]})},Np=()=>{const e=H.c(7),t=V(),{user:n}=A(wp);let s;e[0]===Symbol.for("react.memo_cache_sentinel")?(s={description:"",purpose:""},e[0]=s):s=e[0];const r=s;let a;e[1]!==t||e[2]!==n?.organisation_id?(a=function(c,m){const{setSubmitting:u}=m,f={...c};$c(n?.organisation_id,f,t).then(()=>t(J())).catch(()=>u(!1))},e[1]=t,e[2]=n?.organisation_id,e[3]=a):a=e[3];const o=a;let l;e[4]===Symbol.for("react.memo_cache_sentinel")?(l=i.jsxs("div",{className:"-mt-6 mb-8",children:[i.jsx(Qt,{className:"mx-auto size-16 drop-shadow-md"}),i.jsx("h2",{className:"text-center text-xl font-medium",children:"Add Transaction Description"})]}),e[4]=l):l=e[4];let d;return e[5]!==o?(d=i.jsxs("section",{children:[l,i.jsx(ce,{initialValues:r,onSubmit:o,validationSchema:cp,children:Sp})]}),e[5]=o,e[6]=d):d=e[6],d};function wp(e){return e.auth}function Sp(e){const{values:t,errors:n,touched:s,handleChange:r,handleSubmit:a,setFieldValue:o,isSubmitting:l}=e;return i.jsxs("form",{onSubmit:a,className:"my-1 space-y-4",children:[i.jsx(te,{fieldName:"description",label:"description",value:t.description,error:n.description,touched:s.description,handleChange:r,placeholder:"Enter description"}),i.jsx(Q,{options:xo,fieldName:"purpose",label:"purpose",value:t.purpose?t.purpose:"",error:n.purpose,touched:s.purpose,setFieldValue:o,placeholder:"Select purpose"}),i.jsx(de,{isSubmitting:l})]})}const Cp=()=>{const e=H.c(13),t=V(),{user:n}=A(kp),s=A(Ap);let r;e[0]!==s?.id||e[1]!==t||e[2]!==n?.organisation_id?(r=function(){Oc(n?.organisation_id,s?.id,t).then(()=>{t(J())})},e[0]=s?.id,e[1]=t,e[2]=n?.organisation_id,e[3]=r):r=e[3];const a=r;let o,l;e[4]===Symbol.for("react.memo_cache_sentinel")?(o=i.jsx(ze,{className:"text-destructive size-10"}),l=i.jsx("h2",{className:"text-xl font-semibold",children:"Archive Transaction Description"}),e[4]=o,e[5]=l):(o=e[4],l=e[5]);const d=s?.description;let c;e[6]!==d?(c=i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[o,l,i.jsxs("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:["Are you sure you want to archive"," ",i.jsx("span",{className:"font-semibold",children:d}),"? This action cannot be undone."]})]}),e[6]=d,e[7]=c):c=e[7];let m;e[8]!==a?(m=i.jsx(ke,{handleConfirm:a}),e[8]=a,e[9]=m):m=e[9];let u;return e[10]!==c||e[11]!==m?(u=i.jsxs("div",{className:"-mt-4 text-center",children:[c,m]}),e[10]=c,e[11]=m,e[12]=u):u=e[12],u};function kp(e){return e.auth}function Ap(e){return e.dialog.props}const aa=()=>{const e=H.c(18),t=V(),{user:n}=A(Ep),{type:s,props:r}=A(Rp);let a;e[0]!==s||e[1]!==r?.id||e[2]!==t||e[3]!==n?.organisation_id?(a=function(){(s==="rejectBankTransaction"?qc(n?.organisation_id,r?.id,t):zc(n?.organisation_id,r?.id,t)).then(()=>{t(J())})},e[0]=s,e[1]=r?.id,e[2]=t,e[3]=n?.organisation_id,e[4]=a):a=e[4];const o=a,l=s==="rejectBankTransaction"?"Reject":"Archive";let d;e[5]!==l?(d=i.jsxs("h2",{className:"text-xl font-semibold",children:[l," Bank Transaction"]}),e[5]=l,e[6]=d):d=e[6];const c=s==="rejectTransaction"?"reject":"archive";let m;e[7]!==c?(m=i.jsxs("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:["Are you sure you want to"," ",c," this? This action cannot be undone."]}),e[7]=c,e[8]=m):m=e[8];let u;e[9]!==d||e[10]!==m?(u=i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[d,m]}),e[9]=d,e[10]=m,e[11]=u):u=e[11];const f=s==="archiveTransaction";let p;e[12]!==o||e[13]!==f?(p=i.jsx(ke,{handleConfirm:o,showIcons:f}),e[12]=o,e[13]=f,e[14]=p):p=e[14];let g;return e[15]!==u||e[16]!==p?(g=i.jsxs("div",{className:"-mt-4 text-center",children:[u,p]}),e[15]=u,e[16]=p,e[17]=g):g=e[17],g};function Ep(e){return e.auth}function Rp(e){return e.dialog}const Mp=le({forecast_month:Ze().required("Forecast month is required").typeError("Invalid date format"),company_id:D().required("Company is required"),department_id:D().required("Department is required"),sub_department_id:D().required("Sub-department is required"),expenses_category_id:D().required("Expense category is required"),expenses_sub_category_id:D().required("Expense sub-category is required"),expenses_sub_sub_category_id:D().nullable().notRequired(),quantity:pe().required("Quantity is required").min(0,"Quantity can't be less than 0").typeError("Quantity must be a valid number"),forecast_cost:pe().nullable().min(0,"Forecast bonus given must be 0 or a positive number").notRequired().typeError("Forecast cost must be a valid number"),description:D().nullable().notRequired(),goal:D().nullable().notRequired(),execution_period_start:Ze().required("Start date is required").typeError("Invalid start date format"),execution_period_end:Ze().required("End date is required").typeError("Invalid end date format").min(fn("execution_period_start"),"End date cannot be before start date")}),Tp=()=>{const e=H.c(30),t=V(),{user:n}=A(Dp),{companies:s}=A(Ip),{departments:r,subDepartments:a}=A(Lp),{expenseCategories:o,expenseSubCategories:l,expenseSubSubCategories:d}=A($p);let c;e[0]!==s||e[1]!==r||e[2]!==t||e[3]!==o||e[4]!==l||e[5]!==d||e[6]!==a||e[7]!==n?(c=()=>{s||zt(n?.organisation_id,t),r||Pt(n?.organisation_id,t),a||Kn(n?.organisation_id,t),o||gn(n.organisation_id,t),l||Jn(n.organisation_id,t),d||sr(n.organisation_id,t)},e[0]=s,e[1]=r,e[2]=t,e[3]=o,e[4]=l,e[5]=d,e[6]=a,e[7]=n,e[8]=c):c=e[8];let m;e[9]===Symbol.for("react.memo_cache_sentinel")?(m=[],e[9]=m):m=e[9],C.useEffect(c,m);let u;e[10]!==s?(u=he(s,"name","id"),e[10]=s,e[11]=u):u=e[11];const f=u;let p;e[12]!==o?(p=he(o,"name","id"),e[12]=o,e[13]=p):p=e[13];const g=p;let b;e[14]===Symbol.for("react.memo_cache_sentinel")?(b=ve(new Date,"yyyy-MM"),e[14]=b):b=e[14];let h;e[15]===Symbol.for("react.memo_cache_sentinel")?(h={forecast_month:b,company_id:"",department_id:"",sub_department_id:"",expenses_category_id:"",expenses_sub_category_id:"",expenses_sub_sub_category_id:"",description:"",quantity:0,forecast_cost:0,goal:"",execution_period_start:new Date,execution_period_end:new Date},e[15]=h):h=e[15];const x=h;let y;e[16]!==t||e[17]!==n?.organisation_id?(y=function(v,w){const{setSubmitting:k}=w,E={...v,forecast_month:ve(v.forecast_month,"yyyy-MM-dd"),execution_period_start:ve(v.execution_period_start,"yyyy-MM-dd"),execution_period_end:ve(v.execution_period_end,"yyyy-MM-dd")};v.expenses_sub_sub_category_id||delete E.expenses_sub_sub_category_id,Pc(n?.organisation_id,E,t).then(()=>{t(J())}).catch(()=>{k(!1)})},e[16]=t,e[17]=n?.organisation_id,e[18]=y):y=e[18];const j=y;let N;e[19]===Symbol.for("react.memo_cache_sentinel")?(N=i.jsxs("div",{className:"-mt-6 mb-8",children:[i.jsx(yo,{className:"mx-auto size-14 drop-shadow-md"}),i.jsx("h2",{className:"text-center text-xl font-medium mt-2",children:"Add Budget"})]}),e[19]=N):N=e[19];let _;e[20]!==f||e[21]!==r||e[22]!==g||e[23]!==l||e[24]!==d||e[25]!==a?(_=v=>{const{values:w,errors:k,touched:E,handleChange:R,handleSubmit:T,setFieldValue:I,isSubmitting:L}=v;return i.jsxs("form",{onSubmit:T,className:"my-1 grid grid-cols-1 space-y-4 gap-x-4 md:grid-cols-2 -mt-4",children:[i.jsxs("div",{children:[i.jsxs(Be,{htmlFor:"forecast_month",className:"gap-0.5 text-xs uppercase",children:["FORECAST MONTH",i.jsx("span",{className:be("text-destructive/75 text-sm"),children:"*"})]}),i.jsx(Bc,{date:w.forecast_month,setDate:M=>I("forecast_month",M)}),k.forecast_month&&E.forecast_month&&i.jsx("p",{className:"text-destructive mt-1 text-xs",children:k.forecast_month})]}),i.jsx(Q,{options:f,fieldName:"company_id",label:"Company",value:w.company_id,error:k.company_id,touched:E.company_id,setFieldValue:I,placeholder:"Select company",onValueChange:M=>{I("company_id",M),I("department_id",""),I("sub_department_id","")}}),i.jsx(Q,{options:rr(w.company_id,r),fieldName:"department_id",label:"Department",value:w.department_id,error:k.department_id,touched:E.department_id,setFieldValue:I,placeholder:"Select department",onValueChange:M=>{I("sub_department_id",""),I("department_id",M)}}),i.jsx(Q,{options:hi(w.department_id,a),fieldName:"sub_department_id",label:"Sub Department",value:w.sub_department_id,error:k.sub_department_id,touched:E.sub_department_id,setFieldValue:I,placeholder:"Select sub department"}),i.jsx(Q,{options:g,fieldName:"expenses_category_id",label:"Expense Category",value:w.expenses_category_id,error:k.expenses_category_id,touched:E.expenses_category_id,setFieldValue:I,placeholder:"Select expense category",onValueChange:M=>{I("expenses_category_id",M),I("expenses_sub_category_id",""),I("expenses_sub_sub_category_id","")}}),i.jsx(Q,{options:Gn(w.expenses_category_id,l),fieldName:"expenses_sub_category_id",label:"Expense Sub Category",value:w.expenses_sub_category_id,error:k.expenses_sub_category_id,touched:E.expenses_sub_category_id,setFieldValue:I,placeholder:"Select expense sub category",onValueChange:M=>{I("expenses_sub_sub_category_id",""),I("expenses_sub_category_id",M)}}),i.jsx(Q,{options:ir(w.expenses_sub_category_id,d),fieldName:"expenses_sub_sub_category_id",label:"Expense Sub Sub Category",value:w.expenses_sub_sub_category_id,error:k.expenses_sub_sub_category_id,touched:E.expenses_sub_sub_category_id,setFieldValue:I,placeholder:"Select sub sub category",isRequired:!1}),i.jsx(te,{fieldName:"quantity",label:"quantity",value:w.quantity,error:k.quantity,touched:E.quantity,handleChange:R,placeholder:"Enter quantity",type:"number",step:"0.1",isRequired:!0}),i.jsxs("div",{className:"col-span-2 space-y-3",children:[i.jsx(We,{fieldName:"forecast_cost",label:"forecast cost",value:w.forecast_cost,error:k.forecast_cost,touched:E.forecast_cost,setFieldValue:I,isRequired:!1}),i.jsx(Kt,{fieldName:"goal",label:"goal",value:w.goal,error:k.goal,touched:E.goal,handleChange:R,placeholder:"Enter goal",isRequired:!1}),i.jsx(Kt,{fieldName:"description",label:"description",value:w.description,error:k.description,touched:E.description,handleChange:R,placeholder:"Enter description",isRequired:!1})]}),i.jsx(et,{fieldName:"execution_period_start",label:"execution period start",error:k.execution_period_start,touched:E.execution_period_start,date:w.execution_period_start,setDate:M=>I("execution_period_start",M)}),i.jsx(et,{fieldName:"execution_period_end",label:"execution period end",error:k.execution_period_end,touched:E.execution_period_end,date:w.execution_period_end,setDate:M=>I("execution_period_end",M)}),i.jsx(de,{isSubmitting:L})]})},e[20]=f,e[21]=r,e[22]=g,e[23]=l,e[24]=d,e[25]=a,e[26]=_):_=e[26];let S;return e[27]!==j||e[28]!==_?(S=i.jsxs("section",{children:[N,i.jsx(ce,{initialValues:x,onSubmit:j,validationSchema:Mp,children:_})]}),e[27]=j,e[28]=_,e[29]=S):S=e[29],S};function Dp(e){return e.auth}function Ip(e){return e.company}function Lp(e){return e.department}function $p(e){return e.expenseCategory}const Op=()=>{const e=H.c(82),t=A(qp);if(!t){let ge;return e[0]===Symbol.for("react.memo_cache_sentinel")?(ge=i.jsx("p",{children:"Not budget found"}),e[0]=ge):ge=e[0],ge}let n,s;e[1]===Symbol.for("react.memo_cache_sentinel")?(n=i.jsx("div",{children:i.jsx(yo,{className:"drop-shadow-md mx-auto size-14 -mt-2"})}),s=i.jsx("h2",{className:"text-xl font-medium text-center mt-2",children:"Budget Details"}),e[1]=n,e[2]=s):(n=e[1],s=e[2]);let r;e[3]===Symbol.for("react.memo_cache_sentinel")?(r=i.jsxs("div",{className:"flex items-center gap-2 text-foreground font-medium",children:[i.jsx(bm,{className:"w-4 h-4 text-muted-foreground"}),i.jsx("span",{children:"Timing"})]}),e[3]=r):r=e[3];let a;e[4]===Symbol.for("react.memo_cache_sentinel")?(a=i.jsx("p",{className:"text-muted-foreground text-xs mb-1",children:"Forecast Month"}),e[4]=a):a=e[4];const o=t?.forecast_month;let l;e[5]!==o?(l=ve(new Date(o),"MMMM yyyy"),e[5]=o,e[6]=l):l=e[6];let d;e[7]!==l?(d=i.jsxs("div",{children:[a,i.jsx("p",{className:"text-foreground font-medium",children:l})]}),e[7]=l,e[8]=d):d=e[8];let c;e[9]===Symbol.for("react.memo_cache_sentinel")?(c=i.jsx("p",{className:"text-muted-foreground text-xs mb-1",children:"Execution Period"}),e[9]=c):c=e[9];let m;e[10]!==t.execution_period_start?(m=ve(new Date(t.execution_period_start),"MMMM dd, yyyy"),e[10]=t.execution_period_start,e[11]=m):m=e[11];let u;e[12]!==t.execution_period_end?(u=ve(new Date(t.execution_period_end),"MMMM dd, yyyy"),e[12]=t.execution_period_end,e[13]=u):u=e[13];let f;e[14]!==m||e[15]!==u?(f=i.jsxs("div",{children:[c,i.jsxs("p",{className:"text-foreground font-medium",children:[m," ",""," ",u]})]}),e[14]=m,e[15]=u,e[16]=f):f=e[16];let p;e[17]!==f||e[18]!==d?(p=i.jsxs("div",{className:"space-y-2",children:[r,i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[d,f]})]}),e[17]=f,e[18]=d,e[19]=p):p=e[19];let g;e[20]===Symbol.for("react.memo_cache_sentinel")?(g=i.jsx(fe,{className:"bg-black/10 dark:bg-white/10"}),e[20]=g):g=e[20];let b;e[21]===Symbol.for("react.memo_cache_sentinel")?(b=i.jsxs("div",{className:"flex items-center gap-2 text-foreground font-medium",children:[i.jsx(gi,{className:"w-4 h-4 text-muted-foreground"}),i.jsx("span",{children:"Submission"})]}),e[21]=b):b=e[21];let h;e[22]===Symbol.for("react.memo_cache_sentinel")?(h=i.jsx("p",{className:"text-muted-foreground text-xs mb-1",children:"Submitted Date"}),e[22]=h):h=e[22];let x;e[23]!==t.submitted_date?(x=ve(new Date(t.submitted_date),"PPP"),e[23]=t.submitted_date,e[24]=x):x=e[24];let y;e[25]!==x?(y=i.jsxs("div",{children:[h,i.jsx("p",{className:"text-foreground font-medium",children:x})]}),e[25]=x,e[26]=y):y=e[26];let j;e[27]===Symbol.for("react.memo_cache_sentinel")?(j=i.jsx("p",{className:"text-muted-foreground text-xs mb-1",children:"Status"}),e[27]=j):j=e[27];const N=`px-3 py-1 text-black ${ar(t.status)}`;let _;e[28]!==t.status||e[29]!==N?(_=i.jsxs("div",{children:[j,i.jsx(dt,{className:N,children:t.status})]}),e[28]=t.status,e[29]=N,e[30]=_):_=e[30];let S;e[31]!==y||e[32]!==_?(S=i.jsxs("div",{className:"space-y-2",children:[b,i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[y,_]})]}),e[31]=y,e[32]=_,e[33]=S):S=e[33];let v;e[34]===Symbol.for("react.memo_cache_sentinel")?(v=i.jsx(fe,{className:"bg-black/10 dark:bg-white/10"}),e[34]=v):v=e[34];let w;e[35]===Symbol.for("react.memo_cache_sentinel")?(w=i.jsxs("div",{className:"flex items-center gap-2 text-foreground font-medium",children:[i.jsx(_o,{className:"w-4 h-4 text-muted-foreground"}),i.jsx("span",{children:"Basic Information"})]}),e[35]=w):w=e[35];let k;e[36]===Symbol.for("react.memo_cache_sentinel")?(k=i.jsx("p",{className:"text-muted-foreground text-xs mb-1",children:"Company"}),e[36]=k):k=e[36];let E;e[37]!==t.company?(E=i.jsxs("div",{children:[k,i.jsx("p",{className:"text-foreground font-medium",children:t.company})]}),e[37]=t.company,e[38]=E):E=e[38];let R;e[39]===Symbol.for("react.memo_cache_sentinel")?(R=i.jsx("p",{className:"text-muted-foreground text-xs mb-1",children:"Department"}),e[39]=R):R=e[39];let T;e[40]!==t.department?(T=i.jsxs("div",{children:[R,i.jsx("p",{className:"text-foreground font-medium",children:t.department})]}),e[40]=t.department,e[41]=T):T=e[41];let I;e[42]===Symbol.for("react.memo_cache_sentinel")?(I=i.jsx("p",{className:"text-muted-foreground text-xs mb-1",children:"Sub-Department"}),e[42]=I):I=e[42];let L;e[43]!==t.sub_department?(L=i.jsxs("div",{children:[I,i.jsx("p",{className:"text-foreground font-medium",children:t.sub_department})]}),e[43]=t.sub_department,e[44]=L):L=e[44];let M;e[45]===Symbol.for("react.memo_cache_sentinel")?(M=i.jsx("p",{className:"text-muted-foreground text-xs mb-1",children:"Project Handler"}),e[45]=M):M=e[45];let $;e[46]!==t.submitted_by?($=i.jsxs("div",{children:[M,i.jsx("p",{className:"text-foreground font-medium",children:t.submitted_by})]}),e[46]=t.submitted_by,e[47]=$):$=e[47];let O;e[48]===Symbol.for("react.memo_cache_sentinel")?(O=i.jsx("p",{className:"text-muted-foreground text-xs mb-1",children:"Sub Sub Category"}),e[48]=O):O=e[48];let X;e[49]!==t.expenses_sub_sub_category?(X=i.jsxs("div",{children:[O,i.jsx("p",{className:"text-foreground font-medium",children:t.expenses_sub_sub_category})]}),e[49]=t.expenses_sub_sub_category,e[50]=X):X=e[50];let B;e[51]===Symbol.for("react.memo_cache_sentinel")?(B=i.jsx("p",{className:"text-muted-foreground text-xs mb-1",children:"Quantity"}),e[51]=B):B=e[51];let Y;e[52]!==t.quantity?(Y=i.jsxs("div",{children:[B,i.jsx("p",{className:"text-foreground font-medium",children:t.quantity})]}),e[52]=t.quantity,e[53]=Y):Y=e[53];let U;e[54]!==E||e[55]!==T||e[56]!==L||e[57]!==$||e[58]!==X||e[59]!==Y?(U=i.jsxs("div",{className:"space-y-2",children:[w,i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[E,T,L,$,X,Y]})]}),e[54]=E,e[55]=T,e[56]=L,e[57]=$,e[58]=X,e[59]=Y,e[60]=U):U=e[60];let W;e[61]===Symbol.for("react.memo_cache_sentinel")?(W=i.jsx(fe,{className:"bg-black/10 dark:bg-white/10"}),e[61]=W):W=e[61];let G;e[62]===Symbol.for("react.memo_cache_sentinel")?(G=i.jsxs("div",{className:"flex items-center gap-2 text-foreground font-medium",children:[i.jsx(fm,{className:"w-4 h-4 text-muted-foreground"}),i.jsx("span",{children:"Financial Summary"})]}),e[62]=G):G=e[62];let ee;e[63]===Symbol.for("react.memo_cache_sentinel")?(ee=i.jsx("p",{className:"text-muted-foreground text-xs mb-1",children:"Forecast Cost"}),e[63]=ee):ee=e[63];let ne;e[64]!==t.forecast_cost?(ne=on(t.forecast_cost),e[64]=t.forecast_cost,e[65]=ne):ne=e[65];let K;e[66]!==ne?(K=i.jsxs("div",{className:"space-y-2",children:[G,i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:i.jsxs("div",{children:[ee,i.jsx("p",{className:"text-foreground font-medium",children:ne})]})})]}),e[66]=ne,e[67]=K):K=e[67];let se;e[68]===Symbol.for("react.memo_cache_sentinel")?(se=i.jsx(fe,{className:"bg-black/10 dark:bg-white/10"}),e[68]=se):se=e[68];let z;e[69]===Symbol.for("react.memo_cache_sentinel")?(z=i.jsxs("div",{className:"flex items-center gap-2 text-foreground font-medium",children:[i.jsx(dm,{className:"w-4 h-4 text-muted-foreground"}),i.jsx("span",{children:"Goal"})]}),e[69]=z):z=e[69];const F=t.goal||"-";let P;e[70]!==F?(P=i.jsxs("div",{className:"space-y-2",children:[z,i.jsx("div",{className:"bg-white/50 dark:bg-black/30 rounded-md p-3 text-foreground whitespace-pre-wrap",children:F})]}),e[70]=F,e[71]=P):P=e[71];let Z;e[72]===Symbol.for("react.memo_cache_sentinel")?(Z=i.jsxs("div",{className:"flex items-center gap-2 text-foreground font-medium",children:[i.jsx(bi,{className:"w-4 h-4 text-muted-foreground"}),i.jsx("span",{children:"Description"})]}),e[72]=Z):Z=e[72];const re=t.description||"-";let ie;e[73]!==re?(ie=i.jsxs("div",{className:"space-y-2",children:[Z,i.jsx("div",{className:"bg-white/50 dark:bg-black/30 rounded-md p-3 text-foreground whitespace-pre-wrap",children:re})]}),e[73]=re,e[74]=ie):ie=e[74];let ae;return e[75]!==p||e[76]!==S||e[77]!==U||e[78]!==K||e[79]!==P||e[80]!==ie?(ae=i.jsxs("div",{children:[n,s,i.jsxs("div",{className:"space-y-4 px-2 md:px-4 py-2 text-sm text-muted-foreground",children:[p,g,S,v,U,W,K,se,P,ie]})]}),e[75]=p,e[76]=S,e[77]=U,e[78]=K,e[79]=P,e[80]=ie,e[81]=ae):ae=e[81],ae};function qp(e){return e.dialog.props}const zp=()=>{const e=H.c(7),t=V(),{user:n}=A(Pp),{props:s}=A(Bp);let r;e[0]!==s.id||e[1]!==t||e[2]!==n.organisation_id?(r=function(){Hc(n.organisation_id,s.id,t).then(()=>{t(J())})},e[0]=s.id,e[1]=t,e[2]=n.organisation_id,e[3]=r):r=e[3];const a=r;let o;e[4]===Symbol.for("react.memo_cache_sentinel")?(o=i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Reject Budget"}),i.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Are you sure you want to reject this budget? This action cannot be undone."})]}),e[4]=o):o=e[4];let l;return e[5]!==a?(l=i.jsxs("div",{className:"-mt-4 text-center",children:[o,i.jsx(ke,{handleConfirm:a,showIcons:!1})]}),e[5]=a,e[6]=l):l=e[6],l};function Pp(e){return e.auth}function Bp(e){return e.dialog}const Hp=le().shape({name:D().required("Category name is required")}),Fp=le().shape({name:D().required("Sub category name is required"),expenses_category_id:D().required("Expense category is required")}),Wp=le().shape({name:D().required("Sub sub category name is required"),expenses_category_id:D().required("Expense category is required"),expenses_sub_category_id:D().required("Expense sub category is required"),type:D().required("Type is required"),strategy:D().required("Strategy is required")}),oa=()=>{const e=H.c(16),t=V(),{user:n}=A(Up),{type:s,props:r}=A(Vp),a=r?.name||"";let o;e[0]!==a?(o={name:a},e[0]=a,e[1]=o):o=e[1];const l=o;let d;e[2]!==s||e[3]!==t||e[4]!==r?.id||e[5]!==n?.organisation_id?(d=function(b,h){const{setSubmitting:x}=h,y={...b};(s==="editExpenseCategory"?Fc(n?.organisation_id,r?.id,y,t):Wc(n?.organisation_id,y,t)).then(()=>t(J())).catch(()=>x(!1))},e[2]=s,e[3]=t,e[4]=r?.id,e[5]=n?.organisation_id,e[6]=d):d=e[6];const c=d;let m;e[7]===Symbol.for("react.memo_cache_sentinel")?(m=i.jsx(Yn,{className:"mx-auto size-14 drop-shadow-md"}),e[7]=m):m=e[7];const u=s==="editExpenseCategory"?"Edit Expense Category":"Add Expense Category";let f;e[8]!==u?(f=i.jsxs("div",{className:"-mt-6 mb-8",children:[m,i.jsx("h2",{className:"mt-2 text-center text-xl font-medium",children:u})]}),e[8]=u,e[9]=f):f=e[9];let p;e[10]!==c||e[11]!==l?(p=i.jsx(ce,{initialValues:l,onSubmit:c,validationSchema:Hp,children:Kp}),e[10]=c,e[11]=l,e[12]=p):p=e[12];let g;return e[13]!==f||e[14]!==p?(g=i.jsxs("section",{children:[f,p]}),e[13]=f,e[14]=p,e[15]=g):g=e[15],g};function Up(e){return e.auth}function Vp(e){return e.dialog}function Kp(e){const{values:t,errors:n,touched:s,handleChange:r,handleSubmit:a,isSubmitting:o}=e;return i.jsxs("form",{onSubmit:a,className:"my-1 space-y-4",children:[i.jsx(te,{fieldName:"name",label:"name",value:t.name,error:n.name,touched:s.name,handleChange:r,placeholder:"Enter category name"}),i.jsx(de,{isSubmitting:o})]})}const Jp=()=>{const e=H.c(16),t=V(),{user:n}=A(Gp),s=A(Yp);let r;e[0]!==s?.id||e[1]!==t||e[2]!==n?.organisation_id?(r=function(){Uc(n?.organisation_id,s?.id,t).then(()=>{t(J())})},e[0]=s?.id,e[1]=t,e[2]=n?.organisation_id,e[3]=r):r=e[3];const a=r;let o,l;e[4]===Symbol.for("react.memo_cache_sentinel")?(o=i.jsx(ze,{className:"text-destructive size-10"}),l=i.jsx("h2",{className:"text-xl font-semibold",children:"Archive Expense Category"}),e[4]=o,e[5]=l):(o=e[4],l=e[5]);const d=s?.name;let c;e[6]!==d?(c=i.jsxs("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:["Are you sure you want to archive"," ",i.jsx("span",{className:"font-semibold",children:d}),"? This action cannot be undone."]}),e[6]=d,e[7]=c):c=e[7];let m;e[8]===Symbol.for("react.memo_cache_sentinel")?(m=i.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Archiving this category will also archive all its associated sub and sub sub categories. Make sure you have backed up any necessary information before proceeding."}),e[8]=m):m=e[8];let u;e[9]!==c?(u=i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[o,l,c,m]}),e[9]=c,e[10]=u):u=e[10];let f;e[11]!==a?(f=i.jsx(ke,{handleConfirm:a}),e[11]=a,e[12]=f):f=e[12];let p;return e[13]!==u||e[14]!==f?(p=i.jsxs("div",{className:"-mt-4 text-center",children:[u,f]}),e[13]=u,e[14]=f,e[15]=p):p=e[15],p};function Gp(e){return e.auth}function Yp(e){return e.dialog.props}function Xp(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return C.useMemo(()=>s=>{t.forEach(r=>r(s))},t)}const cr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function bn(e){const t=Object.prototype.toString.call(e);return t==="[object Window]"||t==="[object global]"}function _i(e){return"nodeType"in e}function Je(e){var t,n;return e?bn(e)?e:_i(e)&&(t=(n=e.ownerDocument)==null?void 0:n.defaultView)!=null?t:window:window}function vi(e){const{Document:t}=Je(e);return e instanceof t}function Xn(e){return bn(e)?!1:e instanceof Je(e).HTMLElement}function Lo(e){return e instanceof Je(e).SVGElement}function xn(e){return e?bn(e)?e.document:_i(e)?vi(e)?e:Xn(e)||Lo(e)?e.ownerDocument:document:document:document}const yt=cr?C.useLayoutEffect:C.useEffect;function ji(e){const t=C.useRef(e);return yt(()=>{t.current=e}),C.useCallback(function(){for(var n=arguments.length,s=new Array(n),r=0;r<n;r++)s[r]=arguments[r];return t.current==null?void 0:t.current(...s)},[])}function Qp(){const e=C.useRef(null),t=C.useCallback((s,r)=>{e.current=setInterval(s,r)},[]),n=C.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[t,n]}function Pn(e,t){t===void 0&&(t=[e]);const n=C.useRef(e);return yt(()=>{n.current!==e&&(n.current=e)},t),n}function Qn(e,t){const n=C.useRef();return C.useMemo(()=>{const s=e(n.current);return n.current=s,s},[...t])}function vs(e){const t=ji(e),n=C.useRef(null),s=C.useCallback(r=>{r!==n.current&&t?.(r,n.current),n.current=r},[]);return[n,s]}function Hr(e){const t=C.useRef();return C.useEffect(()=>{t.current=e},[e]),t.current}let xr={};function Zn(e,t){return C.useMemo(()=>{if(t)return t;const n=xr[e]==null?0:xr[e]+1;return xr[e]=n,e+"-"+n},[e,t])}function $o(e){return function(t){for(var n=arguments.length,s=new Array(n>1?n-1:0),r=1;r<n;r++)s[r-1]=arguments[r];return s.reduce((a,o)=>{const l=Object.entries(o);for(const[d,c]of l){const m=a[d];m!=null&&(a[d]=m+e*c)}return a},{...t})}}const cn=$o(1),js=$o(-1);function Zp(e){return"clientX"in e&&"clientY"in e}function Ni(e){if(!e)return!1;const{KeyboardEvent:t}=Je(e.target);return t&&e instanceof t}function eh(e){if(!e)return!1;const{TouchEvent:t}=Je(e.target);return t&&e instanceof t}function Fr(e){if(eh(e)){if(e.touches&&e.touches.length){const{clientX:t,clientY:n}=e.touches[0];return{x:t,y:n}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:t,clientY:n}=e.changedTouches[0];return{x:t,y:n}}}return Zp(e)?{x:e.clientX,y:e.clientY}:null}const Bn=Object.freeze({Translate:{toString(e){if(!e)return;const{x:t,y:n}=e;return"translate3d("+(t?Math.round(t):0)+"px, "+(n?Math.round(n):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:t,scaleY:n}=e;return"scaleX("+t+") scaleY("+n+")"}},Transform:{toString(e){if(e)return[Bn.Translate.toString(e),Bn.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:t,duration:n,easing:s}=e;return t+" "+n+"ms "+s}}}),la="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function th(e){return e.matches(la)?e:e.querySelector(la)}const nh={display:"none"};function sh(e){let{id:t,value:n}=e;return Ce.createElement("div",{id:t,style:nh},n)}function rh(e){let{id:t,announcement:n,ariaLiveType:s="assertive"}=e;const r={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ce.createElement("div",{id:t,style:r,role:"status","aria-live":s,"aria-atomic":!0},n)}function ih(){const[e,t]=C.useState("");return{announce:C.useCallback(s=>{s!=null&&t(s)},[]),announcement:e}}const Oo=C.createContext(null);function ah(e){const t=C.useContext(Oo);C.useEffect(()=>{if(!t)throw new Error("useDndMonitor must be used within a children of <DndContext>");return t(e)},[e,t])}function oh(){const[e]=C.useState(()=>new Set),t=C.useCallback(s=>(e.add(s),()=>e.delete(s)),[e]);return[C.useCallback(s=>{let{type:r,event:a}=s;e.forEach(o=>{var l;return(l=o[r])==null?void 0:l.call(o,a)})},[e]),t]}const lh={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},ch={onDragStart(e){let{active:t}=e;return"Picked up draggable item "+t.id+"."},onDragOver(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was moved over droppable area "+n.id+".":"Draggable item "+t.id+" is no longer over a droppable area."},onDragEnd(e){let{active:t,over:n}=e;return n?"Draggable item "+t.id+" was dropped over droppable area "+n.id:"Draggable item "+t.id+" was dropped."},onDragCancel(e){let{active:t}=e;return"Dragging was cancelled. Draggable item "+t.id+" was dropped."}};function dh(e){let{announcements:t=ch,container:n,hiddenTextDescribedById:s,screenReaderInstructions:r=lh}=e;const{announce:a,announcement:o}=ih(),l=Zn("DndLiveRegion"),[d,c]=C.useState(!1);if(C.useEffect(()=>{c(!0)},[]),ah(C.useMemo(()=>({onDragStart(u){let{active:f}=u;a(t.onDragStart({active:f}))},onDragMove(u){let{active:f,over:p}=u;t.onDragMove&&a(t.onDragMove({active:f,over:p}))},onDragOver(u){let{active:f,over:p}=u;a(t.onDragOver({active:f,over:p}))},onDragEnd(u){let{active:f,over:p}=u;a(t.onDragEnd({active:f,over:p}))},onDragCancel(u){let{active:f,over:p}=u;a(t.onDragCancel({active:f,over:p}))}}),[a,t])),!d)return null;const m=Ce.createElement(Ce.Fragment,null,Ce.createElement(sh,{id:s,value:r.draggable}),Ce.createElement(rh,{id:l,announcement:o}));return n?kn.createPortal(m,n):m}var Re;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Re||(Re={}));function Ns(){}function uh(e,t){return C.useMemo(()=>({sensor:e,options:{}}),[e,t])}function mh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return C.useMemo(()=>[...t].filter(s=>s!=null),[...t])}const ut=Object.freeze({x:0,y:0});function fh(e,t){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function ph(e,t){let{data:{value:n}}=e,{data:{value:s}}=t;return n-s}function hh(e,t){let{data:{value:n}}=e,{data:{value:s}}=t;return s-n}function gh(e,t){if(!e||e.length===0)return null;const[n]=e;return n[t]}function ca(e,t,n){return t===void 0&&(t=e.left),n===void 0&&(n=e.top),{x:t+e.width*.5,y:n+e.height*.5}}const bh=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=e;const r=ca(t,t.left,t.top),a=[];for(const o of s){const{id:l}=o,d=n.get(l);if(d){const c=fh(ca(d),r);a.push({id:l,data:{droppableContainer:o,value:c}})}}return a.sort(ph)};function xh(e,t){const n=Math.max(t.top,e.top),s=Math.max(t.left,e.left),r=Math.min(t.left+t.width,e.left+e.width),a=Math.min(t.top+t.height,e.top+e.height),o=r-s,l=a-n;if(s<r&&n<a){const d=t.width*t.height,c=e.width*e.height,m=o*l,u=m/(d+c-m);return Number(u.toFixed(4))}return 0}const yh=e=>{let{collisionRect:t,droppableRects:n,droppableContainers:s}=e;const r=[];for(const a of s){const{id:o}=a,l=n.get(o);if(l){const d=xh(l,t);d>0&&r.push({id:o,data:{droppableContainer:a,value:d}})}}return r.sort(hh)};function _h(e,t,n){return{...e,scaleX:t&&n?t.width/n.width:1,scaleY:t&&n?t.height/n.height:1}}function qo(e,t){return e&&t?{x:e.left-t.left,y:e.top-t.top}:ut}function vh(e){return function(n){for(var s=arguments.length,r=new Array(s>1?s-1:0),a=1;a<s;a++)r[a-1]=arguments[a];return r.reduce((o,l)=>({...o,top:o.top+e*l.y,bottom:o.bottom+e*l.y,left:o.left+e*l.x,right:o.right+e*l.x}),{...n})}}const jh=vh(1);function Nh(e){if(e.startsWith("matrix3d(")){const t=e.slice(9,-1).split(/, /);return{x:+t[12],y:+t[13],scaleX:+t[0],scaleY:+t[5]}}else if(e.startsWith("matrix(")){const t=e.slice(7,-1).split(/, /);return{x:+t[4],y:+t[5],scaleX:+t[0],scaleY:+t[3]}}return null}function wh(e,t,n){const s=Nh(t);if(!s)return e;const{scaleX:r,scaleY:a,x:o,y:l}=s,d=e.left-o-(1-r)*parseFloat(n),c=e.top-l-(1-a)*parseFloat(n.slice(n.indexOf(" ")+1)),m=r?e.width/r:e.width,u=a?e.height/a:e.height;return{width:m,height:u,top:c,right:d+m,bottom:c+u,left:d}}const Sh={ignoreTransform:!1};function yn(e,t){t===void 0&&(t=Sh);let n=e.getBoundingClientRect();if(t.ignoreTransform){const{transform:c,transformOrigin:m}=Je(e).getComputedStyle(e);c&&(n=wh(n,c,m))}const{top:s,left:r,width:a,height:o,bottom:l,right:d}=n;return{top:s,left:r,width:a,height:o,bottom:l,right:d}}function da(e){return yn(e,{ignoreTransform:!0})}function Ch(e){const t=e.innerWidth,n=e.innerHeight;return{top:0,left:0,right:t,bottom:n,width:t,height:n}}function kh(e,t){return t===void 0&&(t=Je(e).getComputedStyle(e)),t.position==="fixed"}function Ah(e,t){t===void 0&&(t=Je(e).getComputedStyle(e));const n=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(r=>{const a=t[r];return typeof a=="string"?n.test(a):!1})}function wi(e,t){const n=[];function s(r){if(t!=null&&n.length>=t||!r)return n;if(vi(r)&&r.scrollingElement!=null&&!n.includes(r.scrollingElement))return n.push(r.scrollingElement),n;if(!Xn(r)||Lo(r)||n.includes(r))return n;const a=Je(e).getComputedStyle(r);return r!==e&&Ah(r,a)&&n.push(r),kh(r,a)?n:s(r.parentNode)}return e?s(e):n}function zo(e){const[t]=wi(e,1);return t??null}function yr(e){return!cr||!e?null:bn(e)?e:_i(e)?vi(e)||e===xn(e).scrollingElement?window:Xn(e)?e:null:null}function Po(e){return bn(e)?e.scrollX:e.scrollLeft}function Bo(e){return bn(e)?e.scrollY:e.scrollTop}function Wr(e){return{x:Po(e),y:Bo(e)}}var Te;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(Te||(Te={}));function Ho(e){return!cr||!e?!1:e===document.scrollingElement}function Fo(e){const t={x:0,y:0},n=Ho(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},s={x:e.scrollWidth-n.width,y:e.scrollHeight-n.height},r=e.scrollTop<=t.y,a=e.scrollLeft<=t.x,o=e.scrollTop>=s.y,l=e.scrollLeft>=s.x;return{isTop:r,isLeft:a,isBottom:o,isRight:l,maxScroll:s,minScroll:t}}const Eh={x:.2,y:.2};function Rh(e,t,n,s,r){let{top:a,left:o,right:l,bottom:d}=n;s===void 0&&(s=10),r===void 0&&(r=Eh);const{isTop:c,isBottom:m,isLeft:u,isRight:f}=Fo(e),p={x:0,y:0},g={x:0,y:0},b={height:t.height*r.y,width:t.width*r.x};return!c&&a<=t.top+b.height?(p.y=Te.Backward,g.y=s*Math.abs((t.top+b.height-a)/b.height)):!m&&d>=t.bottom-b.height&&(p.y=Te.Forward,g.y=s*Math.abs((t.bottom-b.height-d)/b.height)),!f&&l>=t.right-b.width?(p.x=Te.Forward,g.x=s*Math.abs((t.right-b.width-l)/b.width)):!u&&o<=t.left+b.width&&(p.x=Te.Backward,g.x=s*Math.abs((t.left+b.width-o)/b.width)),{direction:p,speed:g}}function Mh(e){if(e===document.scrollingElement){const{innerWidth:a,innerHeight:o}=window;return{top:0,left:0,right:a,bottom:o,width:a,height:o}}const{top:t,left:n,right:s,bottom:r}=e.getBoundingClientRect();return{top:t,left:n,right:s,bottom:r,width:e.clientWidth,height:e.clientHeight}}function Wo(e){return e.reduce((t,n)=>cn(t,Wr(n)),ut)}function Th(e){return e.reduce((t,n)=>t+Po(n),0)}function Dh(e){return e.reduce((t,n)=>t+Bo(n),0)}function Ih(e,t){if(t===void 0&&(t=yn),!e)return;const{top:n,left:s,bottom:r,right:a}=t(e);zo(e)&&(r<=0||a<=0||n>=window.innerHeight||s>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const Lh=[["x",["left","right"],Th],["y",["top","bottom"],Dh]];class Si{constructor(t,n){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const s=wi(n),r=Wo(s);this.rect={...t},this.width=t.width,this.height=t.height;for(const[a,o,l]of Lh)for(const d of o)Object.defineProperty(this,d,{get:()=>{const c=l(s),m=r[a]-c;return this.rect[d]+m},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Rn{constructor(t){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(n=>{var s;return(s=this.target)==null?void 0:s.removeEventListener(...n)})},this.target=t}add(t,n,s){var r;(r=this.target)==null||r.addEventListener(t,n,s),this.listeners.push([t,n,s])}}function $h(e){const{EventTarget:t}=Je(e);return e instanceof t?e:xn(e)}function _r(e,t){const n=Math.abs(e.x),s=Math.abs(e.y);return typeof t=="number"?Math.sqrt(n**2+s**2)>t:"x"in t&&"y"in t?n>t.x&&s>t.y:"x"in t?n>t.x:"y"in t?s>t.y:!1}var rt;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(rt||(rt={}));function ua(e){e.preventDefault()}function Oh(e){e.stopPropagation()}var ue;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(ue||(ue={}));const Uo={start:[ue.Space,ue.Enter],cancel:[ue.Esc],end:[ue.Space,ue.Enter,ue.Tab]},qh=(e,t)=>{let{currentCoordinates:n}=t;switch(e.code){case ue.Right:return{...n,x:n.x+25};case ue.Left:return{...n,x:n.x-25};case ue.Down:return{...n,y:n.y+25};case ue.Up:return{...n,y:n.y-25}}};class Vo{constructor(t){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=t;const{event:{target:n}}=t;this.props=t,this.listeners=new Rn(xn(n)),this.windowListeners=new Rn(Je(n)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(rt.Resize,this.handleCancel),this.windowListeners.add(rt.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(rt.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:t,onStart:n}=this.props,s=t.node.current;s&&Ih(s),n(ut)}handleKeyDown(t){if(Ni(t)){const{active:n,context:s,options:r}=this.props,{keyboardCodes:a=Uo,coordinateGetter:o=qh,scrollBehavior:l="smooth"}=r,{code:d}=t;if(a.end.includes(d)){this.handleEnd(t);return}if(a.cancel.includes(d)){this.handleCancel(t);return}const{collisionRect:c}=s.current,m=c?{x:c.left,y:c.top}:ut;this.referenceCoordinates||(this.referenceCoordinates=m);const u=o(t,{active:n,context:s.current,currentCoordinates:m});if(u){const f=js(u,m),p={x:0,y:0},{scrollableAncestors:g}=s.current;for(const b of g){const h=t.code,{isTop:x,isRight:y,isLeft:j,isBottom:N,maxScroll:_,minScroll:S}=Fo(b),v=Mh(b),w={x:Math.min(h===ue.Right?v.right-v.width/2:v.right,Math.max(h===ue.Right?v.left:v.left+v.width/2,u.x)),y:Math.min(h===ue.Down?v.bottom-v.height/2:v.bottom,Math.max(h===ue.Down?v.top:v.top+v.height/2,u.y))},k=h===ue.Right&&!y||h===ue.Left&&!j,E=h===ue.Down&&!N||h===ue.Up&&!x;if(k&&w.x!==u.x){const R=b.scrollLeft+f.x,T=h===ue.Right&&R<=_.x||h===ue.Left&&R>=S.x;if(T&&!f.y){b.scrollTo({left:R,behavior:l});return}T?p.x=b.scrollLeft-R:p.x=h===ue.Right?b.scrollLeft-_.x:b.scrollLeft-S.x,p.x&&b.scrollBy({left:-p.x,behavior:l});break}else if(E&&w.y!==u.y){const R=b.scrollTop+f.y,T=h===ue.Down&&R<=_.y||h===ue.Up&&R>=S.y;if(T&&!f.x){b.scrollTo({top:R,behavior:l});return}T?p.y=b.scrollTop-R:p.y=h===ue.Down?b.scrollTop-_.y:b.scrollTop-S.y,p.y&&b.scrollBy({top:-p.y,behavior:l});break}}this.handleMove(t,cn(js(u,this.referenceCoordinates),p))}}}handleMove(t,n){const{onMove:s}=this.props;t.preventDefault(),s(n)}handleEnd(t){const{onEnd:n}=this.props;t.preventDefault(),this.detach(),n()}handleCancel(t){const{onCancel:n}=this.props;t.preventDefault(),this.detach(),n()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}Vo.activators=[{eventName:"onKeyDown",handler:(e,t,n)=>{let{keyboardCodes:s=Uo,onActivation:r}=t,{active:a}=n;const{code:o}=e.nativeEvent;if(s.start.includes(o)){const l=a.activatorNode.current;return l&&e.target!==l?!1:(e.preventDefault(),r?.({event:e.nativeEvent}),!0)}return!1}}];function ma(e){return!!(e&&"distance"in e)}function fa(e){return!!(e&&"delay"in e)}class Ci{constructor(t,n,s){var r;s===void 0&&(s=$h(t.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=t,this.events=n;const{event:a}=t,{target:o}=a;this.props=t,this.events=n,this.document=xn(o),this.documentListeners=new Rn(this.document),this.listeners=new Rn(s),this.windowListeners=new Rn(Je(o)),this.initialCoordinates=(r=Fr(a))!=null?r:ut,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:t,props:{options:{activationConstraint:n,bypassActivationConstraint:s}}}=this;if(this.listeners.add(t.move.name,this.handleMove,{passive:!1}),this.listeners.add(t.end.name,this.handleEnd),t.cancel&&this.listeners.add(t.cancel.name,this.handleCancel),this.windowListeners.add(rt.Resize,this.handleCancel),this.windowListeners.add(rt.DragStart,ua),this.windowListeners.add(rt.VisibilityChange,this.handleCancel),this.windowListeners.add(rt.ContextMenu,ua),this.documentListeners.add(rt.Keydown,this.handleKeydown),n){if(s!=null&&s({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(fa(n)){this.timeoutId=setTimeout(this.handleStart,n.delay),this.handlePending(n);return}if(ma(n)){this.handlePending(n);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(t,n){const{active:s,onPending:r}=this.props;r(s,t,this.initialCoordinates,n)}handleStart(){const{initialCoordinates:t}=this,{onStart:n}=this.props;t&&(this.activated=!0,this.documentListeners.add(rt.Click,Oh,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(rt.SelectionChange,this.removeTextSelection),n(t))}handleMove(t){var n;const{activated:s,initialCoordinates:r,props:a}=this,{onMove:o,options:{activationConstraint:l}}=a;if(!r)return;const d=(n=Fr(t))!=null?n:ut,c=js(r,d);if(!s&&l){if(ma(l)){if(l.tolerance!=null&&_r(c,l.tolerance))return this.handleCancel();if(_r(c,l.distance))return this.handleStart()}if(fa(l)&&_r(c,l.tolerance))return this.handleCancel();this.handlePending(l,c);return}t.cancelable&&t.preventDefault(),o(d)}handleEnd(){const{onAbort:t,onEnd:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleCancel(){const{onAbort:t,onCancel:n}=this.props;this.detach(),this.activated||t(this.props.active),n()}handleKeydown(t){t.code===ue.Esc&&this.handleCancel()}removeTextSelection(){var t;(t=this.document.getSelection())==null||t.removeAllRanges()}}const zh={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class ki extends Ci{constructor(t){const{event:n}=t,s=xn(n.target);super(t,zh,s)}}ki.activators=[{eventName:"onPointerDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;return!n.isPrimary||n.button!==0?!1:(s?.({event:n}),!0)}}];const Ph={move:{name:"mousemove"},end:{name:"mouseup"}};var Ur;(function(e){e[e.RightClick=2]="RightClick"})(Ur||(Ur={}));class Bh extends Ci{constructor(t){super(t,Ph,xn(t.event.target))}}Bh.activators=[{eventName:"onMouseDown",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;return n.button===Ur.RightClick?!1:(s?.({event:n}),!0)}}];const vr={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Hh extends Ci{constructor(t){super(t,vr)}static setup(){return window.addEventListener(vr.move.name,t,{capture:!1,passive:!1}),function(){window.removeEventListener(vr.move.name,t)};function t(){}}}Hh.activators=[{eventName:"onTouchStart",handler:(e,t)=>{let{nativeEvent:n}=e,{onActivation:s}=t;const{touches:r}=n;return r.length>1?!1:(s?.({event:n}),!0)}}];var Mn;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Mn||(Mn={}));var ws;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(ws||(ws={}));function Fh(e){let{acceleration:t,activator:n=Mn.Pointer,canScroll:s,draggingRect:r,enabled:a,interval:o=5,order:l=ws.TreeOrder,pointerCoordinates:d,scrollableAncestors:c,scrollableAncestorRects:m,delta:u,threshold:f}=e;const p=Uh({delta:u,disabled:!a}),[g,b]=Qp(),h=C.useRef({x:0,y:0}),x=C.useRef({x:0,y:0}),y=C.useMemo(()=>{switch(n){case Mn.Pointer:return d?{top:d.y,bottom:d.y,left:d.x,right:d.x}:null;case Mn.DraggableRect:return r}},[n,r,d]),j=C.useRef(null),N=C.useCallback(()=>{const S=j.current;if(!S)return;const v=h.current.x*x.current.x,w=h.current.y*x.current.y;S.scrollBy(v,w)},[]),_=C.useMemo(()=>l===ws.TreeOrder?[...c].reverse():c,[l,c]);C.useEffect(()=>{if(!a||!c.length||!y){b();return}for(const S of _){if(s?.(S)===!1)continue;const v=c.indexOf(S),w=m[v];if(!w)continue;const{direction:k,speed:E}=Rh(S,w,y,t,f);for(const R of["x","y"])p[R][k[R]]||(E[R]=0,k[R]=0);if(E.x>0||E.y>0){b(),j.current=S,g(N,o),h.current=E,x.current=k;return}}h.current={x:0,y:0},x.current={x:0,y:0},b()},[t,N,s,b,a,o,JSON.stringify(y),JSON.stringify(p),g,c,_,m,JSON.stringify(f)])}const Wh={x:{[Te.Backward]:!1,[Te.Forward]:!1},y:{[Te.Backward]:!1,[Te.Forward]:!1}};function Uh(e){let{delta:t,disabled:n}=e;const s=Hr(t);return Qn(r=>{if(n||!s||!r)return Wh;const a={x:Math.sign(t.x-s.x),y:Math.sign(t.y-s.y)};return{x:{[Te.Backward]:r.x[Te.Backward]||a.x===-1,[Te.Forward]:r.x[Te.Forward]||a.x===1},y:{[Te.Backward]:r.y[Te.Backward]||a.y===-1,[Te.Forward]:r.y[Te.Forward]||a.y===1}}},[n,t,s])}function Vh(e,t){const n=t!=null?e.get(t):void 0,s=n?n.node.current:null;return Qn(r=>{var a;return t==null?null:(a=s??r)!=null?a:null},[s,t])}function Kh(e,t){return C.useMemo(()=>e.reduce((n,s)=>{const{sensor:r}=s,a=r.activators.map(o=>({eventName:o.eventName,handler:t(o.handler,s)}));return[...n,...a]},[]),[e,t])}var Hn;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(Hn||(Hn={}));var Vr;(function(e){e.Optimized="optimized"})(Vr||(Vr={}));const pa=new Map;function Jh(e,t){let{dragging:n,dependencies:s,config:r}=t;const[a,o]=C.useState(null),{frequency:l,measure:d,strategy:c}=r,m=C.useRef(e),u=h(),f=Pn(u),p=C.useCallback(function(x){x===void 0&&(x=[]),!f.current&&o(y=>y===null?x:y.concat(x.filter(j=>!y.includes(j))))},[f]),g=C.useRef(null),b=Qn(x=>{if(u&&!n)return pa;if(!x||x===pa||m.current!==e||a!=null){const y=new Map;for(let j of e){if(!j)continue;if(a&&a.length>0&&!a.includes(j.id)&&j.rect.current){y.set(j.id,j.rect.current);continue}const N=j.node.current,_=N?new Si(d(N),N):null;j.rect.current=_,_&&y.set(j.id,_)}return y}return x},[e,a,n,u,d]);return C.useEffect(()=>{m.current=e},[e]),C.useEffect(()=>{u||p()},[n,u]),C.useEffect(()=>{a&&a.length>0&&o(null)},[JSON.stringify(a)]),C.useEffect(()=>{u||typeof l!="number"||g.current!==null||(g.current=setTimeout(()=>{p(),g.current=null},l))},[l,u,p,...s]),{droppableRects:b,measureDroppableContainers:p,measuringScheduled:a!=null};function h(){switch(c){case Hn.Always:return!1;case Hn.BeforeDragging:return n;default:return!n}}}function Ko(e,t){return Qn(n=>e?n||(typeof t=="function"?t(e):e):null,[t,e])}function Gh(e,t){return Ko(e,t)}function Yh(e){let{callback:t,disabled:n}=e;const s=ji(t),r=C.useMemo(()=>{if(n||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:a}=window;return new a(s)},[s,n]);return C.useEffect(()=>()=>r?.disconnect(),[r]),r}function dr(e){let{callback:t,disabled:n}=e;const s=ji(t),r=C.useMemo(()=>{if(n||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:a}=window;return new a(s)},[n]);return C.useEffect(()=>()=>r?.disconnect(),[r]),r}function Xh(e){return new Si(yn(e),e)}function ha(e,t,n){t===void 0&&(t=Xh);const[s,r]=C.useState(null);function a(){r(d=>{if(!e)return null;if(e.isConnected===!1){var c;return(c=d??n)!=null?c:null}const m=t(e);return JSON.stringify(d)===JSON.stringify(m)?d:m})}const o=Yh({callback(d){if(e)for(const c of d){const{type:m,target:u}=c;if(m==="childList"&&u instanceof HTMLElement&&u.contains(e)){a();break}}}}),l=dr({callback:a});return yt(()=>{a(),e?(l?.observe(e),o?.observe(document.body,{childList:!0,subtree:!0})):(l?.disconnect(),o?.disconnect())},[e]),s}function Qh(e){const t=Ko(e);return qo(e,t)}const ga=[];function Zh(e){const t=C.useRef(e),n=Qn(s=>e?s&&s!==ga&&e&&t.current&&e.parentNode===t.current.parentNode?s:wi(e):ga,[e]);return C.useEffect(()=>{t.current=e},[e]),n}function eg(e){const[t,n]=C.useState(null),s=C.useRef(e),r=C.useCallback(a=>{const o=yr(a.target);o&&n(l=>l?(l.set(o,Wr(o)),new Map(l)):null)},[]);return C.useEffect(()=>{const a=s.current;if(e!==a){o(a);const l=e.map(d=>{const c=yr(d);return c?(c.addEventListener("scroll",r,{passive:!0}),[c,Wr(c)]):null}).filter(d=>d!=null);n(l.length?new Map(l):null),s.current=e}return()=>{o(e),o(a)};function o(l){l.forEach(d=>{const c=yr(d);c?.removeEventListener("scroll",r)})}},[r,e]),C.useMemo(()=>e.length?t?Array.from(t.values()).reduce((a,o)=>cn(a,o),ut):Wo(e):ut,[e,t])}function ba(e,t){t===void 0&&(t=[]);const n=C.useRef(null);return C.useEffect(()=>{n.current=null},t),C.useEffect(()=>{const s=e!==ut;s&&!n.current&&(n.current=e),!s&&n.current&&(n.current=null)},[e]),n.current?js(e,n.current):ut}function tg(e){C.useEffect(()=>{if(!cr)return;const t=e.map(n=>{let{sensor:s}=n;return s.setup==null?void 0:s.setup()});return()=>{for(const n of t)n?.()}},e.map(t=>{let{sensor:n}=t;return n}))}function ng(e,t){return C.useMemo(()=>e.reduce((n,s)=>{let{eventName:r,handler:a}=s;return n[r]=o=>{a(o,t)},n},{}),[e,t])}function Jo(e){return C.useMemo(()=>e?Ch(e):null,[e])}const xa=[];function sg(e,t){t===void 0&&(t=yn);const[n]=e,s=Jo(n?Je(n):null),[r,a]=C.useState(xa);function o(){a(()=>e.length?e.map(d=>Ho(d)?s:new Si(t(d),d)):xa)}const l=dr({callback:o});return yt(()=>{l?.disconnect(),o(),e.forEach(d=>l?.observe(d))},[e]),r}function rg(e){if(!e)return null;if(e.children.length>1)return e;const t=e.children[0];return Xn(t)?t:e}function ig(e){let{measure:t}=e;const[n,s]=C.useState(null),r=C.useCallback(c=>{for(const{target:m}of c)if(Xn(m)){s(u=>{const f=t(m);return u?{...u,width:f.width,height:f.height}:f});break}},[t]),a=dr({callback:r}),o=C.useCallback(c=>{const m=rg(c);a?.disconnect(),m&&a?.observe(m),s(m?t(m):null)},[t,a]),[l,d]=vs(o);return C.useMemo(()=>({nodeRef:l,rect:n,setRef:d}),[n,l,d])}const ag=[{sensor:ki,options:{}},{sensor:Vo,options:{}}],og={current:{}},hs={draggable:{measure:da},droppable:{measure:da,strategy:Hn.WhileDragging,frequency:Vr.Optimized},dragOverlay:{measure:yn}};class Tn extends Map{get(t){var n;return t!=null&&(n=super.get(t))!=null?n:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(t=>{let{disabled:n}=t;return!n})}getNodeFor(t){var n,s;return(n=(s=this.get(t))==null?void 0:s.node.current)!=null?n:void 0}}const lg={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Tn,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ns},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:hs,measureDroppableContainers:Ns,windowRect:null,measuringScheduled:!1},cg={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ns,draggableNodes:new Map,over:null,measureDroppableContainers:Ns},ur=C.createContext(cg),Go=C.createContext(lg);function dg(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Tn}}}function ug(e,t){switch(t.type){case Re.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:t.initialCoordinates,active:t.active}};case Re.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:t.coordinates.x-e.draggable.initialCoordinates.x,y:t.coordinates.y-e.draggable.initialCoordinates.y}}};case Re.DragEnd:case Re.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Re.RegisterDroppable:{const{element:n}=t,{id:s}=n,r=new Tn(e.droppable.containers);return r.set(s,n),{...e,droppable:{...e.droppable,containers:r}}}case Re.SetDroppableDisabled:{const{id:n,key:s,disabled:r}=t,a=e.droppable.containers.get(n);if(!a||s!==a.key)return e;const o=new Tn(e.droppable.containers);return o.set(n,{...a,disabled:r}),{...e,droppable:{...e.droppable,containers:o}}}case Re.UnregisterDroppable:{const{id:n,key:s}=t,r=e.droppable.containers.get(n);if(!r||s!==r.key)return e;const a=new Tn(e.droppable.containers);return a.delete(n),{...e,droppable:{...e.droppable,containers:a}}}default:return e}}function mg(e){let{disabled:t}=e;const{active:n,activatorEvent:s,draggableNodes:r}=C.useContext(ur),a=Hr(s),o=Hr(n?.id);return C.useEffect(()=>{if(!t&&!s&&a&&o!=null){if(!Ni(a)||document.activeElement===a.target)return;const l=r.get(o);if(!l)return;const{activatorNode:d,node:c}=l;if(!d.current&&!c.current)return;requestAnimationFrame(()=>{for(const m of[d.current,c.current]){if(!m)continue;const u=th(m);if(u){u.focus();break}}})}},[s,t,r,o,a]),null}function fg(e,t){let{transform:n,...s}=t;return e!=null&&e.length?e.reduce((r,a)=>a({transform:r,...s}),n):n}function pg(e){return C.useMemo(()=>({draggable:{...hs.draggable,...e?.draggable},droppable:{...hs.droppable,...e?.droppable},dragOverlay:{...hs.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function hg(e){let{activeNode:t,measure:n,initialRect:s,config:r=!0}=e;const a=C.useRef(!1),{x:o,y:l}=typeof r=="boolean"?{x:r,y:r}:r;yt(()=>{if(!o&&!l||!t){a.current=!1;return}if(a.current||!s)return;const c=t?.node.current;if(!c||c.isConnected===!1)return;const m=n(c),u=qo(m,s);if(o||(u.x=0),l||(u.y=0),a.current=!0,Math.abs(u.x)>0||Math.abs(u.y)>0){const f=zo(c);f&&f.scrollBy({top:u.y,left:u.x})}},[t,o,l,s,n])}const Yo=C.createContext({...ut,scaleX:1,scaleY:1});var Tt;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Tt||(Tt={}));const gg=C.memo(function(t){var n,s,r,a;let{id:o,accessibility:l,autoScroll:d=!0,children:c,sensors:m=ag,collisionDetection:u=yh,measuring:f,modifiers:p,...g}=t;const b=C.useReducer(ug,void 0,dg),[h,x]=b,[y,j]=oh(),[N,_]=C.useState(Tt.Uninitialized),S=N===Tt.Initialized,{draggable:{active:v,nodes:w,translate:k},droppable:{containers:E}}=h,R=v!=null?w.get(v):null,T=C.useRef({initial:null,translated:null}),I=C.useMemo(()=>{var Oe;return v!=null?{id:v,data:(Oe=R?.data)!=null?Oe:og,rect:T}:null},[v,R]),L=C.useRef(null),[M,$]=C.useState(null),[O,X]=C.useState(null),B=Pn(g,Object.values(g)),Y=Zn("DndDescribedBy",o),U=C.useMemo(()=>E.getEnabled(),[E]),W=pg(f),{droppableRects:G,measureDroppableContainers:ee,measuringScheduled:ne}=Jh(U,{dragging:S,dependencies:[k.x,k.y],config:W.droppable}),K=Vh(w,v),se=C.useMemo(()=>O?Fr(O):null,[O]),z=Gl(),F=Gh(K,W.draggable.measure);hg({activeNode:v!=null?w.get(v):null,config:z.layoutShiftCompensation,initialRect:F,measure:W.draggable.measure});const P=ha(K,W.draggable.measure,F),Z=ha(K?K.parentElement:null),re=C.useRef({activatorEvent:null,active:null,activeNode:K,collisionRect:null,collisions:null,droppableRects:G,draggableNodes:w,draggingNode:null,draggingNodeRect:null,droppableContainers:E,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ie=E.getNodeFor((n=re.current.over)==null?void 0:n.id),ae=ig({measure:W.dragOverlay.measure}),ge=(s=ae.nodeRef.current)!=null?s:K,Ae=S?(r=ae.rect)!=null?r:P:null,$e=!!(ae.nodeRef.current&&ae.rect),vn=Qh($e?null:P),Ee=Jo(ge?Je(ge):null),Me=Zh(S?ie??K:null),en=sg(Me),Bt=fg(p,{transform:{x:k.x-vn.x,y:k.y-vn.y,scaleX:1,scaleY:1},activatorEvent:O,active:I,activeNodeRect:P,containerNodeRect:Z,draggingNodeRect:Ae,over:re.current.over,overlayNodeRect:ae.rect,scrollableAncestors:Me,scrollableAncestorRects:en,windowRect:Ee}),pr=se?cn(se,k):null,hr=eg(Me),ts=ba(hr),Fl=ba(hr,[P]),tn=cn(Bt,ts),nn=Ae?jh(Ae,Bt):null,jn=I&&nn?u({active:I,collisionRect:nn,droppableRects:G,droppableContainers:U,pointerCoordinates:pr}):null,Pi=gh(jn,"id"),[kt,Bi]=C.useState(null),Wl=$e?Bt:cn(Bt,Fl),Ul=_h(Wl,(a=kt?.rect)!=null?a:null,P),gr=C.useRef(null),Hi=C.useCallback((Oe,Ge)=>{let{sensor:Ye,options:At}=Ge;if(L.current==null)return;const tt=w.get(L.current);if(!tt)return;const Xe=Oe.nativeEvent,ft=new Ye({active:L.current,activeNode:tt,event:Xe,options:At,context:re,onAbort(Le){if(!w.get(Le))return;const{onDragAbort:pt}=B.current,vt={id:Le};pt?.(vt),y({type:"onDragAbort",event:vt})},onPending(Le,Et,pt,vt){if(!w.get(Le))return;const{onDragPending:wn}=B.current,Rt={id:Le,constraint:Et,initialCoordinates:pt,offset:vt};wn?.(Rt),y({type:"onDragPending",event:Rt})},onStart(Le){const Et=L.current;if(Et==null)return;const pt=w.get(Et);if(!pt)return;const{onDragStart:vt}=B.current,Nn={activatorEvent:Xe,active:{id:Et,data:pt.data,rect:T}};kn.unstable_batchedUpdates(()=>{vt?.(Nn),_(Tt.Initializing),x({type:Re.DragStart,initialCoordinates:Le,active:Et}),y({type:"onDragStart",event:Nn}),$(gr.current),X(Xe)})},onMove(Le){x({type:Re.DragMove,coordinates:Le})},onEnd:sn(Re.DragEnd),onCancel:sn(Re.DragCancel)});gr.current=ft;function sn(Le){return async function(){const{active:pt,collisions:vt,over:Nn,scrollAdjustedTranslate:wn}=re.current;let Rt=null;if(pt&&wn){const{cancelDrop:Sn}=B.current;Rt={activatorEvent:Xe,active:pt,collisions:vt,delta:wn,over:Nn},Le===Re.DragEnd&&typeof Sn=="function"&&await Promise.resolve(Sn(Rt))&&(Le=Re.DragCancel)}L.current=null,kn.unstable_batchedUpdates(()=>{x({type:Le}),_(Tt.Uninitialized),Bi(null),$(null),X(null),gr.current=null;const Sn=Le===Re.DragEnd?"onDragEnd":"onDragCancel";if(Rt){const br=B.current[Sn];br?.(Rt),y({type:Sn,event:Rt})}})}}},[w]),Vl=C.useCallback((Oe,Ge)=>(Ye,At)=>{const tt=Ye.nativeEvent,Xe=w.get(At);if(L.current!==null||!Xe||tt.dndKit||tt.defaultPrevented)return;const ft={active:Xe};Oe(Ye,Ge.options,ft)===!0&&(tt.dndKit={capturedBy:Ge.sensor},L.current=At,Hi(Ye,Ge))},[w,Hi]),Fi=Kh(m,Vl);tg(m),yt(()=>{P&&N===Tt.Initializing&&_(Tt.Initialized)},[P,N]),C.useEffect(()=>{const{onDragMove:Oe}=B.current,{active:Ge,activatorEvent:Ye,collisions:At,over:tt}=re.current;if(!Ge||!Ye)return;const Xe={active:Ge,activatorEvent:Ye,collisions:At,delta:{x:tn.x,y:tn.y},over:tt};kn.unstable_batchedUpdates(()=>{Oe?.(Xe),y({type:"onDragMove",event:Xe})})},[tn.x,tn.y]),C.useEffect(()=>{const{active:Oe,activatorEvent:Ge,collisions:Ye,droppableContainers:At,scrollAdjustedTranslate:tt}=re.current;if(!Oe||L.current==null||!Ge||!tt)return;const{onDragOver:Xe}=B.current,ft=At.get(Pi),sn=ft&&ft.rect.current?{id:ft.id,rect:ft.rect.current,data:ft.data,disabled:ft.disabled}:null,Le={active:Oe,activatorEvent:Ge,collisions:Ye,delta:{x:tt.x,y:tt.y},over:sn};kn.unstable_batchedUpdates(()=>{Bi(sn),Xe?.(Le),y({type:"onDragOver",event:Le})})},[Pi]),yt(()=>{re.current={activatorEvent:O,active:I,activeNode:K,collisionRect:nn,collisions:jn,droppableRects:G,draggableNodes:w,draggingNode:ge,draggingNodeRect:Ae,droppableContainers:E,over:kt,scrollableAncestors:Me,scrollAdjustedTranslate:tn},T.current={initial:Ae,translated:nn}},[I,K,jn,nn,w,ge,Ae,G,E,kt,Me,tn]),Fh({...z,delta:k,draggingRect:nn,pointerCoordinates:pr,scrollableAncestors:Me,scrollableAncestorRects:en});const Kl=C.useMemo(()=>({active:I,activeNode:K,activeNodeRect:P,activatorEvent:O,collisions:jn,containerNodeRect:Z,dragOverlay:ae,draggableNodes:w,droppableContainers:E,droppableRects:G,over:kt,measureDroppableContainers:ee,scrollableAncestors:Me,scrollableAncestorRects:en,measuringConfiguration:W,measuringScheduled:ne,windowRect:Ee}),[I,K,P,O,jn,Z,ae,w,E,G,kt,ee,Me,en,W,ne,Ee]),Jl=C.useMemo(()=>({activatorEvent:O,activators:Fi,active:I,activeNodeRect:P,ariaDescribedById:{draggable:Y},dispatch:x,draggableNodes:w,over:kt,measureDroppableContainers:ee}),[O,Fi,I,P,x,Y,w,kt,ee]);return Ce.createElement(Oo.Provider,{value:j},Ce.createElement(ur.Provider,{value:Jl},Ce.createElement(Go.Provider,{value:Kl},Ce.createElement(Yo.Provider,{value:Ul},c)),Ce.createElement(mg,{disabled:l?.restoreFocus===!1})),Ce.createElement(dh,{...l,hiddenTextDescribedById:Y}));function Gl(){const Oe=M?.autoScrollEnabled===!1,Ge=typeof d=="object"?d.enabled===!1:d===!1,Ye=S&&!Oe&&!Ge;return typeof d=="object"?{...d,enabled:Ye}:{enabled:Ye}}}),bg=C.createContext(null),ya="button",xg="Draggable";function yg(e){let{id:t,data:n,disabled:s=!1,attributes:r}=e;const a=Zn(xg),{activators:o,activatorEvent:l,active:d,activeNodeRect:c,ariaDescribedById:m,draggableNodes:u,over:f}=C.useContext(ur),{role:p=ya,roleDescription:g="draggable",tabIndex:b=0}=r??{},h=d?.id===t,x=C.useContext(h?Yo:bg),[y,j]=vs(),[N,_]=vs(),S=ng(o,t),v=Pn(n);yt(()=>(u.set(t,{id:t,key:a,node:y,activatorNode:N,data:v}),()=>{const k=u.get(t);k&&k.key===a&&u.delete(t)}),[u,t]);const w=C.useMemo(()=>({role:p,tabIndex:b,"aria-disabled":s,"aria-pressed":h&&p===ya?!0:void 0,"aria-roledescription":g,"aria-describedby":m.draggable}),[s,p,b,h,g,m.draggable]);return{active:d,activatorEvent:l,activeNodeRect:c,attributes:w,isDragging:h,listeners:s?void 0:S,node:y,over:f,setNodeRef:j,setActivatorNodeRef:_,transform:x}}function _g(){return C.useContext(Go)}const vg="Droppable",jg={timeout:25};function Ng(e){let{data:t,disabled:n=!1,id:s,resizeObserverConfig:r}=e;const a=Zn(vg),{active:o,dispatch:l,over:d,measureDroppableContainers:c}=C.useContext(ur),m=C.useRef({disabled:n}),u=C.useRef(!1),f=C.useRef(null),p=C.useRef(null),{disabled:g,updateMeasurementsFor:b,timeout:h}={...jg,...r},x=Pn(b??s),y=C.useCallback(()=>{if(!u.current){u.current=!0;return}p.current!=null&&clearTimeout(p.current),p.current=setTimeout(()=>{c(Array.isArray(x.current)?x.current:[x.current]),p.current=null},h)},[h]),j=dr({callback:y,disabled:g||!o}),N=C.useCallback((w,k)=>{j&&(k&&(j.unobserve(k),u.current=!1),w&&j.observe(w))},[j]),[_,S]=vs(N),v=Pn(t);return C.useEffect(()=>{!j||!_.current||(j.disconnect(),u.current=!1,j.observe(_.current))},[_,j]),C.useEffect(()=>(l({type:Re.RegisterDroppable,element:{id:s,key:a,disabled:n,node:_,rect:f,data:v}}),()=>l({type:Re.UnregisterDroppable,key:a,id:s})),[s]),C.useEffect(()=>{n!==m.current.disabled&&(l({type:Re.SetDroppableDisabled,id:s,key:a,disabled:n}),m.current.disabled=n)},[s,a,n,l]),{active:o,rect:f,isOver:d?.id===s,node:_,over:d,setNodeRef:S}}function Xo(e,t,n){const s=e.slice();return s.splice(n<0?s.length+n:n,0,s.splice(t,1)[0]),s}function wg(e,t){return e.reduce((n,s,r)=>{const a=t.get(s);return a&&(n[r]=a),n},Array(e.length))}function rs(e){return e!==null&&e>=0}function Sg(e,t){if(e===t)return!0;if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0}function Cg(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const Qo=e=>{let{rects:t,activeIndex:n,overIndex:s,index:r}=e;const a=Xo(t,s,n),o=t[r],l=a[r];return!l||!o?null:{x:l.left-o.left,y:l.top-o.top,scaleX:l.width/o.width,scaleY:l.height/o.height}},is={scaleX:1,scaleY:1},kg=e=>{var t;let{activeIndex:n,activeNodeRect:s,index:r,rects:a,overIndex:o}=e;const l=(t=a[n])!=null?t:s;if(!l)return null;if(r===n){const c=a[o];return c?{x:0,y:n<o?c.top+c.height-(l.top+l.height):c.top-l.top,...is}:null}const d=Ag(a,r,n);return r>n&&r<=o?{x:0,y:-l.height-d,...is}:r<n&&r>=o?{x:0,y:l.height+d,...is}:{x:0,y:0,...is}};function Ag(e,t,n){const s=e[t],r=e[t-1],a=e[t+1];return s?n<t?r?s.top-(r.top+r.height):a?a.top-(s.top+s.height):0:a?a.top-(s.top+s.height):r?s.top-(r.top+r.height):0:0}const Zo="Sortable",el=Ce.createContext({activeIndex:-1,containerId:Zo,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Qo,disabled:{draggable:!1,droppable:!1}});function Eg(e){let{children:t,id:n,items:s,strategy:r=Qo,disabled:a=!1}=e;const{active:o,dragOverlay:l,droppableRects:d,over:c,measureDroppableContainers:m}=_g(),u=Zn(Zo,n),f=l.rect!==null,p=C.useMemo(()=>s.map(S=>typeof S=="object"&&"id"in S?S.id:S),[s]),g=o!=null,b=o?p.indexOf(o.id):-1,h=c?p.indexOf(c.id):-1,x=C.useRef(p),y=!Sg(p,x.current),j=h!==-1&&b===-1||y,N=Cg(a);yt(()=>{y&&g&&m(p)},[y,p,g,m]),C.useEffect(()=>{x.current=p},[p]);const _=C.useMemo(()=>({activeIndex:b,containerId:u,disabled:N,disableTransforms:j,items:p,overIndex:h,useDragOverlay:f,sortedRects:wg(p,d),strategy:r}),[b,u,N.draggable,N.droppable,j,p,h,d,f,r]);return Ce.createElement(el.Provider,{value:_},t)}const Rg=e=>{let{id:t,items:n,activeIndex:s,overIndex:r}=e;return Xo(n,s,r).indexOf(t)},Mg=e=>{let{containerId:t,isSorting:n,wasDragging:s,index:r,items:a,newIndex:o,previousItems:l,previousContainerId:d,transition:c}=e;return!c||!s||l!==a&&r===o?!1:n?!0:o!==r&&t===d},Tg={duration:200,easing:"ease"},tl="transform",Dg=Bn.Transition.toString({property:tl,duration:0,easing:"linear"}),Ig={roleDescription:"sortable"};function Lg(e){let{disabled:t,index:n,node:s,rect:r}=e;const[a,o]=C.useState(null),l=C.useRef(n);return yt(()=>{if(!t&&n!==l.current&&s.current){const d=r.current;if(d){const c=yn(s.current,{ignoreTransform:!0}),m={x:d.left-c.left,y:d.top-c.top,scaleX:d.width/c.width,scaleY:d.height/c.height};(m.x||m.y)&&o(m)}}n!==l.current&&(l.current=n)},[t,n,s,r]),C.useEffect(()=>{a&&o(null)},[a]),a}function $g(e){let{animateLayoutChanges:t=Mg,attributes:n,disabled:s,data:r,getNewIndex:a=Rg,id:o,strategy:l,resizeObserverConfig:d,transition:c=Tg}=e;const{items:m,containerId:u,activeIndex:f,disabled:p,disableTransforms:g,sortedRects:b,overIndex:h,useDragOverlay:x,strategy:y}=C.useContext(el),j=Og(s,p),N=m.indexOf(o),_=C.useMemo(()=>({sortable:{containerId:u,index:N,items:m},...r}),[u,r,N,m]),S=C.useMemo(()=>m.slice(m.indexOf(o)),[m,o]),{rect:v,node:w,isOver:k,setNodeRef:E}=Ng({id:o,data:_,disabled:j.droppable,resizeObserverConfig:{updateMeasurementsFor:S,...d}}),{active:R,activatorEvent:T,activeNodeRect:I,attributes:L,setNodeRef:M,listeners:$,isDragging:O,over:X,setActivatorNodeRef:B,transform:Y}=yg({id:o,data:_,attributes:{...Ig,...n},disabled:j.draggable}),U=Xp(E,M),W=!!R,G=W&&!g&&rs(f)&&rs(h),ee=!x&&O,ne=ee&&G?Y:null,se=G?ne??(l??y)({rects:b,activeNodeRect:I,activeIndex:f,overIndex:h,index:N}):null,z=rs(f)&&rs(h)?a({id:o,items:m,activeIndex:f,overIndex:h}):N,F=R?.id,P=C.useRef({activeId:F,items:m,newIndex:z,containerId:u}),Z=m!==P.current.items,re=t({active:R,containerId:u,isDragging:O,isSorting:W,id:o,index:N,items:m,newIndex:P.current.newIndex,previousItems:P.current.items,previousContainerId:P.current.containerId,transition:c,wasDragging:P.current.activeId!=null}),ie=Lg({disabled:!re,index:N,node:w,rect:v});return C.useEffect(()=>{W&&P.current.newIndex!==z&&(P.current.newIndex=z),u!==P.current.containerId&&(P.current.containerId=u),m!==P.current.items&&(P.current.items=m)},[W,z,u,m]),C.useEffect(()=>{if(F===P.current.activeId)return;if(F!=null&&P.current.activeId==null){P.current.activeId=F;return}const ge=setTimeout(()=>{P.current.activeId=F},50);return()=>clearTimeout(ge)},[F]),{active:R,activeIndex:f,attributes:L,data:_,rect:v,index:N,newIndex:z,items:m,isOver:k,isSorting:W,isDragging:O,listeners:$,node:w,overIndex:h,over:X,setNodeRef:U,setActivatorNodeRef:B,setDroppableNodeRef:E,setDraggableNodeRef:M,transform:ie??se,transition:ae()};function ae(){if(ie||Z&&P.current.newIndex===N)return Dg;if(!(ee&&!Ni(T)||!c)&&(W||re))return Bn.Transition.toString({...c,property:tl})}}function Og(e,t){var n,s;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(n=e?.draggable)!=null?n:t.draggable,droppable:(s=e?.droppable)!=null?s:t.droppable}}ue.Down,ue.Right,ue.Up,ue.Left;const qg=e=>{const t=H.c(19),{row:n}=e;let s;t[0]!==n.id?(s={id:n.id},t[0]=n.id,t[1]=s):s=t[1];const{attributes:r,listeners:a,setNodeRef:o,transform:l,transition:d,isDragging:c}=$g(s);let m;t[2]!==l?(m=Bn.Transform.toString(l),t[2]=l,t[3]=m):m=t[3];const u=c?.5:1;let f;t[4]!==m||t[5]!==u||t[6]!==d?(f={transform:m,transition:d,opacity:u},t[4]=m,t[5]=u,t[6]=d,t[7]=f):f=t[7];const p=f;let g;t[8]===Symbol.for("react.memo_cache_sentinel")?(g=i.jsx(jm,{size:18}),t[8]=g):g=t[8];let b;t[9]!==r||t[10]!==a?(b=i.jsx($r,{className:"w-10 px-2 text-gray-400",children:i.jsx("span",{...r,...a,className:"cursor-grab hover:text-black dark:hover:text-white",children:g})}),t[9]=r,t[10]=a,t[11]=b):b=t[11];let h;t[12]!==n.name?(h=i.jsx($r,{className:"px-2",children:n.name}),t[12]=n.name,t[13]=h):h=t[13];let x;return t[14]!==o||t[15]!==p||t[16]!==b||t[17]!==h?(x=i.jsxs(Lr,{ref:o,style:p,className:"border-b-black/10 dark:border-b-white/5",children:[b,h]}),t[14]=o,t[15]=p,t[16]=b,t[17]=h,t[18]=x):x=t[18],x},jr=()=>{const e=H.c(40),t=V(),{user:n}=A(zg),{type:s,props:r}=A(Pg);let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=[],e[0]=a):a=e[0];const[o,l]=C.useState(a);let d;e[1]===Symbol.for("react.memo_cache_sentinel")?(d=[],e[1]=d):d=e[1];const[c,m]=C.useState(d),[u,f]=C.useState(!1),[p,g]=C.useState(!1),b=mh(uh(ki));let h,x;e[2]!==r?(h=()=>{l(r||[]),m(r||[])},x=[r],e[2]=r,e[3]=h,e[4]=x):(h=e[3],x=e[4]),C.useEffect(h,x);let y;e[5]!==c||e[6]!==o?(y=X=>{const{active:B,over:Y}=X;if(!Y||B.id===Y.id)return;const U=o.findIndex(K=>K.id===B.id),W=o.findIndex(K=>K.id===Y.id),G=[...o],[ee]=G.splice(U,1);G.splice(W,0,ee),l(G);const ne=G.some((K,se)=>K.id!==c[se]?.id);f(ne)},e[5]=c,e[6]=o,e[7]=y):y=e[7];const j=y;let N;e[8]!==s||e[9]!==t||e[10]!==o||e[11]!==n?(N=()=>{const X=o.map(Bg);let B;s==="sortExpenseCategory"?B=Gc:s==="sortExpenseSubCategory"?B=Yc:s==="sortExpenseSubSubCategory"&&(B=Xc),B&&(B(n.organisation_id,{categories:X},g,t).then(()=>{t(J())}),f(!1))},e[8]=s,e[9]=t,e[10]=o,e[11]=n,e[12]=N):N=e[12];const _=N;let S;e[13]!==s?(S=()=>{switch(s){case"sortExpenseCategory":return"Sort Expense Category";case"sortExpenseSubCategory":return"Sort Expense Sub Category";case"sortExpenseSubSubCategory":return"Sort Expense Sub Sub Category";default:return"Sort Expenses"}},e[13]=s,e[14]=S):S=e[14];const w=S();let k;e[15]!==w?(k=i.jsx("div",{className:"-mt-6 mb-8",children:i.jsx("h2",{className:"mt-2 text-center text-xl font-medium",children:w})}),e[15]=w,e[16]=k):k=e[16];let E;e[17]===Symbol.for("react.memo_cache_sentinel")?(E=i.jsx(Vc,{className:"bg-gray-100/75 dark:bg-[#dcdcdc]/10",children:i.jsxs(Lr,{children:[i.jsx(Ui,{className:"w-10 px-2"}),i.jsx(Ui,{className:"px-2",children:"Name"})]})}),e[17]=E):E=e[17];let R;e[18]!==o?(R=o.map(Hg),e[18]=o,e[19]=R):R=e[19];let T;e[20]!==o?(T=o.length>0?o.map(Fg):i.jsx(Lr,{children:i.jsx($r,{colSpan:2,className:"py-4 text-center",children:"No data to sort"})}),e[20]=o,e[21]=T):T=e[21];let I;e[22]!==R||e[23]!==T?(I=i.jsxs(Kc,{children:[E,i.jsx(Jc,{children:i.jsx(Eg,{items:R,strategy:kg,children:T})})]}),e[22]=R,e[23]=T,e[24]=I):I=e[24];let L;e[25]!==j||e[26]!==b||e[27]!==I?(L=i.jsx(gg,{sensors:b,collisionDetection:bh,onDragEnd:j,children:I}),e[25]=j,e[26]=b,e[27]=I,e[28]=L):L=e[28];let M;e[29]!==t||e[30]!==_||e[31]!==u||e[32]!==p?(M=u&&i.jsxs("div",{className:"col-span-2 mt-6 grid grid-cols-2 gap-4",children:[i.jsxs(me,{variant:"secondary",type:"button",className:"border/50 border bg-white dark:bg-white/5",disabled:p,onClick:()=>t(J(!1)),children:[i.jsx(Vt,{className:"-ms-1 opacity-80",size:16,"aria-hidden":"true"}),"Cancel"]}),i.jsxs(me,{type:"button",disabled:p,onClick:_,children:[p?i.jsx(zn,{className:"-ms-1 animate-spin opacity-80",size:16,"aria-hidden":"true"}):i.jsx(Xt,{className:"-ms-1 opacity-80",size:16,"aria-hidden":"true"}),"Confirm"]})]}),e[29]=t,e[30]=_,e[31]=u,e[32]=p,e[33]=M):M=e[33];let $;e[34]!==L||e[35]!==M?($=i.jsxs("div",{className:"overflow-hidden rounded-lg",children:[L,M]}),e[34]=L,e[35]=M,e[36]=$):$=e[36];let O;return e[37]!==$||e[38]!==k?(O=i.jsxs("div",{children:[k,$]}),e[37]=$,e[38]=k,e[39]=O):O=e[39],O};function zg(e){return e.auth}function Pg(e){return e.dialog}function Bg(e,t){return{category_id:e.id,sort_order:t+1}}function Hg(e){return e.id}function Fg(e){return i.jsx(qg,{row:e},e.id)}const _a=()=>{const e=H.c(27),t=V(),{user:n}=A(Wg),{expenseCategories:s}=A(Ug);let r;e[0]!==t||e[1]!==s||e[2]!==n?(r=()=>{!s&&gn(n.organisation_id,t)},e[0]=t,e[1]=s,e[2]=n,e[3]=r):r=e[3];let a;e[4]===Symbol.for("react.memo_cache_sentinel")?(a=[],e[4]=a):a=e[4],C.useEffect(r,a);const{type:o,props:l}=A(Vg);let d;e[5]!==s?(d=he(s,"name","id"),e[5]=s,e[6]=d):d=e[6];const c=d,m=l?.name||"",u=l?.expenses_category_id||"";let f;e[7]!==m||e[8]!==u?(f={name:m,expenses_category_id:u},e[7]=m,e[8]=u,e[9]=f):f=e[9];const p=f;let g;e[10]!==o||e[11]!==t||e[12]!==l?.id||e[13]!==n?.organisation_id?(g=function(S,v){const{setSubmitting:w}=v,k={...S};(o==="editExpenseSubCategory"?Qc(n?.organisation_id,l?.id,k,t):Zc(n?.organisation_id,k,t)).then(()=>t(J())).catch(()=>w(!1))},e[10]=o,e[11]=t,e[12]=l?.id,e[13]=n?.organisation_id,e[14]=g):g=e[14];const b=g;let h;e[15]===Symbol.for("react.memo_cache_sentinel")?(h=i.jsx(Yn,{className:"mx-auto size-14 drop-shadow-md"}),e[15]=h):h=e[15];const x=o==="editExpenseSubCategory"?"Edit Expense Sub Category":"Add Expense Sub Category";let y;e[16]!==x?(y=i.jsxs("div",{className:"-mt-6 mb-8",children:[h,i.jsx("h2",{className:"mt-2 text-center text-xl font-medium",children:x})]}),e[16]=x,e[17]=y):y=e[17];let j;e[18]!==c?(j=S=>{const{values:v,errors:w,touched:k,handleChange:E,handleSubmit:R,setFieldValue:T,isSubmitting:I}=S;return i.jsxs("form",{onSubmit:R,className:"my-1 space-y-4",children:[i.jsx(te,{fieldName:"name",label:"name",value:v.name,error:w.name,touched:k.name,handleChange:E,placeholder:"Enter sub category name"}),i.jsx(Q,{options:c,fieldName:"expenses_category_id",label:"Expense Category",value:v.expenses_category_id,error:w.expenses_category_id,touched:k.expenses_category_id,setFieldValue:T,placeholder:"Select category"}),i.jsx(de,{isSubmitting:I})]})},e[18]=c,e[19]=j):j=e[19];let N;e[20]!==b||e[21]!==p||e[22]!==j?(N=i.jsx(ce,{initialValues:p,onSubmit:b,validationSchema:Fp,children:j}),e[20]=b,e[21]=p,e[22]=j,e[23]=N):N=e[23];let _;return e[24]!==N||e[25]!==y?(_=i.jsxs("section",{children:[y,N]}),e[24]=N,e[25]=y,e[26]=_):_=e[26],_};function Wg(e){return e.auth}function Ug(e){return e.expenseCategory}function Vg(e){return e.dialog}const Kg=()=>{const e=H.c(16),t=V(),{user:n}=A(Jg),s=A(Gg);let r;e[0]!==t||e[1]!==s?.id||e[2]!==n?.organisation_id?(r=function(){ed(n?.organisation_id,s?.id,t).then(()=>{t(J())})},e[0]=t,e[1]=s?.id,e[2]=n?.organisation_id,e[3]=r):r=e[3];const a=r;let o,l;e[4]===Symbol.for("react.memo_cache_sentinel")?(o=i.jsx(ze,{className:"text-destructive size-10"}),l=i.jsx("h2",{className:"text-xl font-semibold",children:"Archive Expense Sub Category"}),e[4]=o,e[5]=l):(o=e[4],l=e[5]);const d=s?.name;let c;e[6]!==d?(c=i.jsxs("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:["Are you sure you want to archive"," ",i.jsx("span",{className:"font-semibold",children:d}),"? This action cannot be undone."]}),e[6]=d,e[7]=c):c=e[7];let m;e[8]===Symbol.for("react.memo_cache_sentinel")?(m=i.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Archiving this category will also archive all its associated sub sub categories. Make sure you have backed up any necessary information before proceeding."}),e[8]=m):m=e[8];let u;e[9]!==c?(u=i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[o,l,c,m]}),e[9]=c,e[10]=u):u=e[10];let f;e[11]!==a?(f=i.jsx(ke,{handleConfirm:a}),e[11]=a,e[12]=f):f=e[12];let p;return e[13]!==u||e[14]!==f?(p=i.jsxs("div",{className:"-mt-4 text-center",children:[u,f]}),e[13]=u,e[14]=f,e[15]=p):p=e[15],p};function Jg(e){return e.auth}function Gg(e){return e.dialog.props}const va=()=>{const e=H.c(38),t=V(),{user:n}=A(Yg),{expenseCategories:s,expenseSubCategories:r}=A(Xg);let a;e[0]!==t||e[1]!==s||e[2]!==r||e[3]!==n?(a=()=>{!s&&gn(n.organisation_id,t),!r&&Jn(n.organisation_id,t)},e[0]=t,e[1]=s,e[2]=r,e[3]=n,e[4]=a):a=e[4];let o;e[5]===Symbol.for("react.memo_cache_sentinel")?(o=[],e[5]=o):o=e[5],C.useEffect(a,o);const{type:l,props:d}=A(Qg);let c;e[6]!==s?(c=he(s,"name","id"),e[6]=s,e[7]=c):c=e[7];const m=c;let u;e[8]!==s||e[9]!==r?(u=function(L){if(!L||!s||!r)return"";const M=r.find(O=>O.id===L);return s.find(O=>O.id===M.expenses_category_id).id||""},e[8]=s,e[9]=r,e[10]=u):u=e[10];const f=u,p=d?.name||"",g=d?.expenses_sub_category_id;let b;e[11]!==f||e[12]!==g?(b=f(g),e[11]=f,e[12]=g,e[13]=b):b=e[13];const h=d?.expenses_sub_category_id||"",x=d?.type?d?.type==="FIX"?"2":"1":"",y=d?.strategy||"";let j;e[14]!==p||e[15]!==b||e[16]!==h||e[17]!==x||e[18]!==y?(j={name:p,expenses_category_id:b,expenses_sub_category_id:h,type:x,strategy:y},e[14]=p,e[15]=b,e[16]=h,e[17]=x,e[18]=y,e[19]=j):j=e[19];const N=j;let _;e[20]!==l||e[21]!==t||e[22]!==d?.id||e[23]!==n?.organisation_id?(_=function(I,L){const{setSubmitting:M}=L,$={...I};(l==="editExpenseSubSubCategory"?td(n?.organisation_id,d?.id,$,t):nd(n?.organisation_id,$,t)).then(()=>t(J())).catch(()=>M(!1))},e[20]=l,e[21]=t,e[22]=d?.id,e[23]=n?.organisation_id,e[24]=_):_=e[24];const S=_;let v;e[25]===Symbol.for("react.memo_cache_sentinel")?(v=i.jsx(Yn,{className:"mx-auto size-14 drop-shadow-md"}),e[25]=v):v=e[25];const w=l==="editExpenseSubSubCategory"?"Edit Expense Sub Sub Category":"Add Expense Sub Sub Category";let k;e[26]!==w?(k=i.jsxs("div",{className:"-mt-6 mb-8",children:[v,i.jsx("h2",{className:"mt-2 text-center text-xl font-medium",children:w})]}),e[26]=w,e[27]=k):k=e[27];let E;e[28]!==m||e[29]!==r?(E=I=>{const{values:L,errors:M,touched:$,handleChange:O,handleSubmit:X,setFieldValue:B,isSubmitting:Y}=I;return i.jsxs("form",{onSubmit:X,className:"my-1 space-y-4",children:[i.jsx(te,{fieldName:"name",label:"name",value:L.name,error:M.name,touched:$.name,handleChange:O,placeholder:"Enter sub sub category name"}),i.jsx(Q,{options:m,fieldName:"expenses_category_id",label:"Expense Category",value:L.expenses_category_id,error:M.expenses_category_id,touched:$.expenses_category_id,setFieldValue:B,placeholder:"Select category"}),i.jsx(Q,{options:Gn(L.expenses_category_id,r),fieldName:"expenses_sub_category_id",label:"Expense Sub Category",value:L.expenses_sub_category_id,error:M.expenses_sub_category_id,touched:$.expenses_sub_category_id,setFieldValue:B,placeholder:"Select sub category"}),i.jsx(Q,{options:[{value:"1",label:"VARIABLE"},{value:"2",label:"FIX"}],fieldName:"type",label:"type",value:L.type,error:M.type,touched:$.type,setFieldValue:B,placeholder:"Select type"}),i.jsx(te,{fieldName:"strategy",label:"strategy",value:L.strategy,error:M.strategy,touched:$.strategy,handleChange:O,placeholder:"Enter strategy"}),i.jsx(de,{isSubmitting:Y})]})},e[28]=m,e[29]=r,e[30]=E):E=e[30];let R;e[31]!==S||e[32]!==N||e[33]!==E?(R=i.jsx(ce,{initialValues:N,onSubmit:S,validationSchema:Wp,children:E}),e[31]=S,e[32]=N,e[33]=E,e[34]=R):R=e[34];let T;return e[35]!==k||e[36]!==R?(T=i.jsxs("section",{children:[k,R]}),e[35]=k,e[36]=R,e[37]=T):T=e[37],T};function Yg(e){return e.auth}function Xg(e){return e.expenseCategory}function Qg(e){return e.dialog}const Zg=()=>{const e=H.c(16),t=V(),{user:n}=A(eb),s=A(tb);let r;e[0]!==t||e[1]!==s?.id||e[2]!==n?.organisation_id?(r=function(){sd(n?.organisation_id,s?.id,t).then(()=>{t(J())})},e[0]=t,e[1]=s?.id,e[2]=n?.organisation_id,e[3]=r):r=e[3];const a=r;let o,l;e[4]===Symbol.for("react.memo_cache_sentinel")?(o=i.jsx(ze,{className:"text-destructive size-10"}),l=i.jsx("h2",{className:"text-xl font-semibold",children:"Archive Expense Sub Sub Category"}),e[4]=o,e[5]=l):(o=e[4],l=e[5]);const d=s?.name;let c;e[6]!==d?(c=i.jsxs("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:["Are you sure you want to archive"," ",i.jsx("span",{className:"font-semibold",children:d}),"? This action cannot be undone."]}),e[6]=d,e[7]=c):c=e[7];let m;e[8]===Symbol.for("react.memo_cache_sentinel")?(m=i.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Archiving this category will also archive all its associated data. Make sure you have backed up any necessary information before proceeding."}),e[8]=m):m=e[8];let u;e[9]!==c?(u=i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[o,l,c,m]}),e[9]=c,e[10]=u):u=e[10];let f;e[11]!==a?(f=i.jsx(ke,{handleConfirm:a}),e[11]=a,e[12]=f):f=e[12];let p;return e[13]!==u||e[14]!==f?(p=i.jsxs("div",{className:"-mt-4 text-center",children:[u,f]}),e[13]=u,e[14]=f,e[15]=p):p=e[15],p};function eb(e){return e.auth}function tb(e){return e.dialog.props}const nb=le({claim_date:Ze().required("Date is required"),claimed_by:D().required("Claim by is required"),claim_amount:pe().required("Claim amount is required").positive("Claim amount must be greater than 0"),company_id:D().required("Company is required"),details:D().nullable()}),sb=le({department_id:D().required("Department is required"),expenses_category_id:D().required("Expense category is required"),expenses_sub_category_id:D().required("Expense sub-category is required"),expenses_sub_sub_category_id:D().required("Expense sub-sub category is required"),bank_id:D().required("Bank selection is required")}),rb=le({remark:D().required("Remark is required")}),ib=le({transaction_date:Ze().required("Date is required"),amount:pe().required("Amount is required").min(0,"Amount can't be less than 0"),company_id:D().required("Company is required"),expenses_category_id:D().required("Expenses category is required"),expenses_sub_category_id:D().required("Expense sub-category is required"),description:D().required("Description is required")}),ab=le({description:D().required("Description is required")}),ob=le({transaction_date:Ze().required("Date is required"),amount:pe().required("Amount is required").min(0,"Amount can't be less than 0"),company_id:D().required("Company is required"),expenses_category_id:D().required("Expenses category is required"),expenses_sub_category_id:D().required("Expense sub-category is required"),description:D().required("Description is required")}),lb=le({transaction_date:Ze().required("Date is required"),deposit_amount:pe().required("Deposit amount is required").min(0,"Deposit amount can't be less than 0"),withdraw_amount:pe().required("Withdraw amount is required").min(0,"Withdraw amount can't be less than 0"),bonus_given_amount:pe().required("Bonus given amount is required").min(0,"Bonus given amount can't be less than 0"),company_id:D().required("Company is required"),description:D().nullable()}),cb=()=>{const e=H.c(20),t=V(),{user:n}=A(db),{companies:s}=A(ub);let r;e[0]!==s||e[1]!==t||e[2]!==n.organisation_id?(r=()=>{s||zt(n?.organisation_id,t)},e[0]=s,e[1]=t,e[2]=n.organisation_id,e[3]=r):r=e[3];let a;e[4]===Symbol.for("react.memo_cache_sentinel")?(a=[],e[4]=a):a=e[4],C.useEffect(r,a);let o;e[5]!==s?(o=he(s,"name","id"),e[5]=s,e[6]=o):o=e[6];const l=o;let d;e[7]===Symbol.for("react.memo_cache_sentinel")?(d=new Date,e[7]=d):d=e[7];const c=`${n.first_name} ${n.last_name}`;let m;e[8]!==c?(m={claim_date:d,claim_amount:0,claimed_by:c,company_id:"",details:"",receipt:null},e[8]=c,e[9]=m):m=e[9];const u=m;let f;e[10]!==t||e[11]!==n.organisation_id?(f=function(x,y){const{setSubmitting:j}=y,N={...x,claim_date:ve(x.claim_date,"yyyy-MM-dd")};rd(n?.organisation_id,N,t).then(()=>{t(J())}).catch(()=>{j(!1)})},e[10]=t,e[11]=n.organisation_id,e[12]=f):f=e[12];const p=f;let g;e[13]===Symbol.for("react.memo_cache_sentinel")?(g=i.jsxs("div",{className:"-mt-6 mb-8",children:[i.jsx(Yn,{className:"mx-auto size-14 drop-shadow-md"}),i.jsx("h2",{className:"text-center text-xl font-medium",children:"Employee Claim Form"})]}),e[13]=g):g=e[13];let b;e[14]!==l?(b=x=>{const{values:y,errors:j,touched:N,handleChange:_,handleSubmit:S,setFieldValue:v,isSubmitting:w}=x;return i.jsxs("form",{onSubmit:S,className:"my-1 grid grid-cols-1 space-y-4 gap-x-4 md:grid-cols-2 -mt-2",children:[i.jsx(et,{fieldName:"claim_date",label:"Date",error:j.claim_date,touched:N.claim_date,date:y.claim_date,setDate:k=>v("claim_date",k)}),i.jsx(te,{fieldName:"claimed_by",label:"claim by",value:y.claimed_by,error:j.claimed_by,touched:N.claimed_by,handleChange:_,isRequired:!0,disabled:!0}),i.jsx(We,{fieldName:"claim_amount",label:"claim amount",value:y.claim_amount,error:j.claim_amount,touched:N.claim_amount,setFieldValue:v}),i.jsx(Q,{options:l,fieldName:"company_id",label:"Company",value:y.company_id,error:j.company_id,touched:N.company_id,setFieldValue:v,placeholder:"Select company"}),i.jsx("div",{className:"col-span-2",children:i.jsx(te,{fieldName:"details",label:"details",value:y.details,error:j.details,touched:N.details,handleChange:_,placeholder:"Enter details",isRequired:!1})}),i.jsxs("div",{className:"col-span-2",children:[i.jsx(Be,{className:"mb-1 gap-0.5 text-xs uppercase",children:"Receipt"}),i.jsx(xi,{onFileChange:k=>{v("receipt",k)}})]}),i.jsx(de,{isSubmitting:w})]})},e[14]=l,e[15]=b):b=e[15];let h;return e[16]!==p||e[17]!==u||e[18]!==b?(h=i.jsxs("section",{children:[g,i.jsx(ce,{initialValues:u,onSubmit:p,validationSchema:nb,children:b})]}),e[16]=p,e[17]=u,e[18]=b,e[19]=h):h=e[19],h};function db(e){return e.auth}function ub(e){return e.company}const mb=()=>{const e=V(),{user:t}=A(b=>b.auth),{getMyActiveBanks:n}=Vn(),s=A(b=>b.dialog.props),{companies:r}=A(b=>b.company),{departments:a,subDepartments:o}=A(b=>b.department),{expenseCategories:l,expenseSubCategories:d,expenseSubSubCategories:c}=A(b=>b.expenseCategory);C.useEffect(()=>{r||zt(t?.organisation_id,e),a||Pt(t?.organisation_id,e),o||Kn(t?.organisation_id,e),l||gn(t.organisation_id,e),d||Jn(t.organisation_id,e),c||sr(t.organisation_id,e)},[]);const m=n(),u=C.useMemo(()=>m?.map(b=>({label:`${b.bank_code} (Bank No: ${b.bank_number})`,value:b.id})),[m]),f=C.useMemo(()=>he(l,"name","id"),[l]),p={department_id:"",expenses_category_id:"",expenses_sub_category_id:"",expenses_sub_sub_category_id:"",bank_id:""},g=function(b,{setSubmitting:h}){ad(t?.organisation_id,s.id,b,e).then(()=>{e(J())}).catch(()=>{h(!1)})};return i.jsxs("section",{children:[i.jsxs("div",{className:"-mt-6 mb-8",children:[i.jsx(id,{className:"mx-auto size-14 drop-shadow-md"}),i.jsx("h2",{className:"text-center text-xl font-medium",children:"Finance Claim Form"})]}),i.jsx(ce,{initialValues:p,onSubmit:g,validationSchema:sb,children:({values:b,errors:h,touched:x,handleChange:y,handleSubmit:j,setFieldValue:N,isSubmitting:_})=>i.jsxs("form",{onSubmit:j,className:"my-1 grid grid-cols-1 space-y-4 gap-x-4 md:grid-cols-2 -mt-2",children:[i.jsx(et,{fieldName:"claim_date",label:"Date",error:h?.claim_date,touched:x?.claim_date,date:s.claim_date,setDate:S=>N("claim_date",S),isRequired:!1,disabled:!0}),i.jsx(te,{fieldName:"claimed_by",label:"claim by",value:s?.claimed_by,error:h?.claimed_by,touched:x?.claimed_by,handleChange:y,isRequired:!1,disabled:!0}),i.jsx(We,{fieldName:"claim_amount",label:"claim amount",value:s?.claim_amount,error:h?.claim_amount,touched:x?.claim_amount,setFieldValue:N,isRequired:!1,disabled:!0}),i.jsx(te,{fieldName:"company_id",label:"Company",value:s?.company,error:h?.company_id,touched:x?.company_id,handleChange:y,isRequired:!1,disabled:!0}),i.jsx(Q,{options:rr(r.find(S=>S.name===s.company).id,a),fieldName:"department_id",label:"Department",value:b.department_id,error:h.department_id,touched:x.department_id,setFieldValue:N,placeholder:"Select department"}),i.jsx(Q,{options:u,fieldName:"bank_id",label:"Bank",value:b.bank_id,error:h.bank_id,touched:x.bank_id,setFieldValue:N,placeholder:"Select bank"}),i.jsx(Q,{options:f,fieldName:"expenses_category_id",label:"Transaction Category",value:b.expenses_category_id,error:h.expenses_category_id,touched:x.expenses_category_id,setFieldValue:N,placeholder:"Select transaction category",onValueChange:S=>{N("expenses_category_id",S),N("expenses_sub_category_id",""),N("expenses_sub_sub_category_id","")}}),i.jsx(Q,{options:Gn(b.expenses_category_id,d),fieldName:"expenses_sub_category_id",label:"Transaction Sub Category",value:b.expenses_sub_category_id,error:h.expenses_sub_category_id,touched:x.expenses_sub_category_id,setFieldValue:N,placeholder:"Select transaction sub category",onValueChange:S=>{N("expenses_sub_sub_category_id",""),N("expenses_sub_category_id",S)}}),i.jsx("div",{className:"col-span-2",children:i.jsx(Q,{options:ir(b.expenses_sub_category_id,c),fieldName:"expenses_sub_sub_category_id",label:"Transaction Sub Sub Category",value:b.expenses_sub_sub_category_id,error:h.expenses_sub_sub_category_id,touched:x.expenses_sub_sub_category_id,setFieldValue:N,placeholder:"Select sub sub category"})}),i.jsx(de,{isSubmitting:_})]})})]})},fb=()=>{const e=H.c(86),t=A(pb);let n,s;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=i.jsx(Yn,{className:"drop-shadow-md mx-auto size-14"}),s=i.jsx("h2",{className:"text-xl font-medium text-center",children:"Claim Details"}),e[0]=n,e[1]=s):(n=e[0],s=e[1]);let r;e[2]===Symbol.for("react.memo_cache_sentinel")?(r=i.jsxs("div",{className:"flex items-center gap-2 text-foreground font-medium",children:[i.jsx(gi,{className:"w-4 h-4 text-muted-foreground"}),i.jsx("span",{children:"Claim Info"})]}),e[2]=r):r=e[2];let a;e[3]===Symbol.for("react.memo_cache_sentinel")?(a=i.jsx("p",{className:"text-xs mb-1",children:"Claim Date"}),e[3]=a):a=e[3];let o;e[4]!==t.claim_date?(o=ve(new Date(t.claim_date),"PPP"),e[4]=t.claim_date,e[5]=o):o=e[5];let l;e[6]!==o?(l=i.jsxs("div",{children:[a,i.jsx("p",{className:"text-foreground font-medium",children:o})]}),e[6]=o,e[7]=l):l=e[7];let d;e[8]===Symbol.for("react.memo_cache_sentinel")?(d=i.jsx("p",{className:"text-xs mb-1",children:"Submitted Date"}),e[8]=d):d=e[8];let c;e[9]!==t.submitted_date?(c=ve(new Date(t.submitted_date),"PPP"),e[9]=t.submitted_date,e[10]=c):c=e[10];let m;e[11]!==c?(m=i.jsxs("div",{children:[d,i.jsx("p",{className:"text-foreground font-medium",children:c})]}),e[11]=c,e[12]=m):m=e[12];let u;e[13]===Symbol.for("react.memo_cache_sentinel")?(u=i.jsx("p",{className:"text-xs mb-1",children:"Claim By"}),e[13]=u):u=e[13];let f;e[14]!==t.claimed_by?(f=i.jsxs("div",{children:[u,i.jsx("p",{className:"text-foreground font-medium",children:t.claimed_by})]}),e[14]=t.claimed_by,e[15]=f):f=e[15];let p;e[16]===Symbol.for("react.memo_cache_sentinel")?(p=i.jsx("p",{className:"text-xs mb-1",children:"Claim Amount"}),e[16]=p):p=e[16];let g;e[17]!==t.claim_amount?(g=on(t.claim_amount),e[17]=t.claim_amount,e[18]=g):g=e[18];let b;e[19]!==g?(b=i.jsxs("div",{children:[p,i.jsx("p",{className:"text-foreground font-medium",children:g})]}),e[19]=g,e[20]=b):b=e[20];let h;e[21]===Symbol.for("react.memo_cache_sentinel")?(h=i.jsx("p",{className:"text-xs mb-1",children:"Type"}),e[21]=h):h=e[21];let x;e[22]!==t.type?(x=i.jsxs("div",{children:[h,i.jsx("p",{className:"text-foreground font-medium",children:t.type})]}),e[22]=t.type,e[23]=x):x=e[23];let y;e[24]===Symbol.for("react.memo_cache_sentinel")?(y=i.jsx("p",{className:"text-xs mb-1",children:"Bank"}),e[24]=y):y=e[24];let j;e[25]!==t.bank?(j=i.jsxs("div",{children:[y,i.jsx("p",{className:"text-foreground font-medium",children:t.bank})]}),e[25]=t.bank,e[26]=j):j=e[26];let N;e[27]!==f||e[28]!==b||e[29]!==x||e[30]!==j||e[31]!==l||e[32]!==m?(N=i.jsxs("div",{className:"space-y-2",children:[r,i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[l,m,f,b,x,j]})]}),e[27]=f,e[28]=b,e[29]=x,e[30]=j,e[31]=l,e[32]=m,e[33]=N):N=e[33];let _;e[34]===Symbol.for("react.memo_cache_sentinel")?(_=i.jsx(fe,{className:"bg-black/10 dark:bg-white/10"}),e[34]=_):_=e[34];let S;e[35]===Symbol.for("react.memo_cache_sentinel")?(S=i.jsxs("div",{className:"flex items-center gap-2 text-foreground font-medium",children:[i.jsx(vo,{className:"w-4 h-4 text-muted-foreground"}),i.jsx("span",{children:"Organisational Info"})]}),e[35]=S):S=e[35];let v;e[36]===Symbol.for("react.memo_cache_sentinel")?(v=i.jsx("p",{className:"text-xs mb-1",children:"Company"}),e[36]=v):v=e[36];let w;e[37]!==t.company?(w=i.jsxs("div",{children:[v,i.jsx("p",{className:"text-foreground font-medium",children:t.company})]}),e[37]=t.company,e[38]=w):w=e[38];let k;e[39]===Symbol.for("react.memo_cache_sentinel")?(k=i.jsx("p",{className:"text-xs mb-1",children:"Department"}),e[39]=k):k=e[39];let E;e[40]!==t.department?(E=i.jsxs("div",{children:[k,i.jsx("p",{className:"text-foreground font-medium",children:t.department})]}),e[40]=t.department,e[41]=E):E=e[41];let R;e[42]===Symbol.for("react.memo_cache_sentinel")?(R=i.jsx("p",{className:"text-xs mb-1",children:"Sub-Department"}),e[42]=R):R=e[42];let T;e[43]!==t.sub_department?(T=i.jsxs("div",{children:[R,i.jsx("p",{className:"text-foreground font-medium",children:t.sub_department})]}),e[43]=t.sub_department,e[44]=T):T=e[44];let I;e[45]!==w||e[46]!==E||e[47]!==T?(I=i.jsxs("div",{className:"space-y-2",children:[S,i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[w,E,T]})]}),e[45]=w,e[46]=E,e[47]=T,e[48]=I):I=e[48];let L;e[49]===Symbol.for("react.memo_cache_sentinel")?(L=i.jsx(fe,{className:"bg-black/10 dark:bg-white/10"}),e[49]=L):L=e[49];let M;e[50]===Symbol.for("react.memo_cache_sentinel")?(M=i.jsxs("div",{className:"flex items-center gap-2 text-foreground font-medium",children:[i.jsx(bi,{className:"w-4 h-4 text-muted-foreground"}),i.jsx("span",{children:"Claim Categories"})]}),e[50]=M):M=e[50];let $;e[51]===Symbol.for("react.memo_cache_sentinel")?($=i.jsx("p",{className:"text-xs mb-1",children:"Category"}),e[51]=$):$=e[51];let O;e[52]!==t.expenses_category?(O=i.jsxs("div",{children:[$,i.jsx("p",{className:"text-foreground font-medium",children:t.expenses_category})]}),e[52]=t.expenses_category,e[53]=O):O=e[53];let X;e[54]===Symbol.for("react.memo_cache_sentinel")?(X=i.jsx("p",{className:"text-xs mb-1",children:"Sub Category"}),e[54]=X):X=e[54];let B;e[55]!==t.expenses_sub_category?(B=i.jsxs("div",{children:[X,i.jsx("p",{className:"text-foreground font-medium",children:t.expenses_sub_category})]}),e[55]=t.expenses_sub_category,e[56]=B):B=e[56];let Y;e[57]===Symbol.for("react.memo_cache_sentinel")?(Y=i.jsx("p",{className:"text-xs mb-1",children:"Sub Sub Category"}),e[57]=Y):Y=e[57];let U;e[58]!==t.expenses_sub_sub_category?(U=i.jsxs("div",{children:[Y,i.jsx("p",{className:"text-foreground font-medium",children:t.expenses_sub_sub_category})]}),e[58]=t.expenses_sub_sub_category,e[59]=U):U=e[59];let W;e[60]!==O||e[61]!==B||e[62]!==U?(W=i.jsxs("div",{className:"space-y-2",children:[M,i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[O,B,U]})]}),e[60]=O,e[61]=B,e[62]=U,e[63]=W):W=e[63];let G;e[64]===Symbol.for("react.memo_cache_sentinel")?(G=i.jsx(fe,{className:"bg-black/10 dark:bg-white/10"}),e[64]=G):G=e[64];let ee;e[65]===Symbol.for("react.memo_cache_sentinel")?(ee=i.jsx("p",{className:"text-xs mb-1",children:"Details"}),e[65]=ee):ee=e[65];const ne=t.details||"-";let K;e[66]!==ne?(K=i.jsx("div",{className:"grid grid-cols-1 gap-4",children:i.jsxs("div",{children:[ee,i.jsx("p",{className:"text-foreground font-medium whitespace-pre-wrap",children:ne})]})}),e[66]=ne,e[67]=K):K=e[67];let se;e[68]===Symbol.for("react.memo_cache_sentinel")?(se=i.jsx("p",{className:"text-xs mb-1",children:"Status"}),e[68]=se):se=e[68];const z=`px-3 py-1 text-black ${ar(t.status)}`;let F;e[69]!==t.status||e[70]!==z?(F=i.jsxs("div",{children:[se,i.jsx(dt,{className:z,children:t.status})]}),e[69]=t.status,e[70]=z,e[71]=F):F=e[71];let P;e[72]===Symbol.for("react.memo_cache_sentinel")?(P=i.jsx("p",{className:"text-xs mb-1",children:"Receipt"}),e[72]=P):P=e[72];let Z;e[73]!==t.attached_receipt?(Z=t.attached_receipt?i.jsx("a",{href:t.attached_receipt,target:"_blank",children:i.jsx(me,{size:"xs",className:"py-3.5",children:"Download"})}):"No recipt available.",e[73]=t.attached_receipt,e[74]=Z):Z=e[74];let re;e[75]!==Z?(re=i.jsxs("div",{children:[P,i.jsx("p",{className:"text-foreground font-medium whitespace-pre-wrap",children:Z})]}),e[75]=Z,e[76]=re):re=e[76];let ie;e[77]!==F||e[78]!==re?(ie=i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[F,re]}),e[77]=F,e[78]=re,e[79]=ie):ie=e[79];let ae;return e[80]!==N||e[81]!==I||e[82]!==W||e[83]!==K||e[84]!==ie?(ae=i.jsxs("div",{className:"-mt-6",children:[n,s,i.jsxs("div",{className:"space-y-4 px-2 md:px-4 py-2 text-sm text-muted-foreground",children:[N,_,I,L,W,G,K,ie]})]}),e[80]=N,e[81]=I,e[82]=W,e[83]=K,e[84]=ie,e[85]=ae):ae=e[85],ae};function pb(e){return e.dialog.props}const hb=()=>{const e=H.c(8),t=V(),{user:n}=A(gb),{props:s}=A(bb);let r;e[0]!==s.id||e[1]!==t||e[2]!==n.organisation_id?(r=function(c,m){const{setSubmitting:u}=m;od(n.organisation_id,s.id,c,t).then(()=>{t(J())}).catch(()=>u(!1))},e[0]=s.id,e[1]=t,e[2]=n.organisation_id,e[3]=r):r=e[3];const a=r;let o;e[4]===Symbol.for("react.memo_cache_sentinel")?(o=i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Reject Claim"}),i.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Are you sure you want to reject this claim? This action cannot be undone."})]}),e[4]=o):o=e[4];let l;e[5]===Symbol.for("react.memo_cache_sentinel")?(l={remark:""},e[5]=l):l=e[5];let d;return e[6]!==a?(d=i.jsxs("div",{className:"-mt-4 text-center",children:[o,i.jsx(ce,{initialValues:l,onSubmit:a,validationSchema:rb,children:xb})]}),e[6]=a,e[7]=d):d=e[7],d};function gb(e){return e.auth}function bb(e){return e.dialog}function xb(e){const{values:t,errors:n,touched:s,handleChange:r,handleSubmit:a,isSubmitting:o}=e;return i.jsxs("form",{onSubmit:a,className:"my-1 grid grid-cols-1 space-y-4 gap-x-4 mt-6 text-left",children:[i.jsx(te,{fieldName:"remark",label:"remark",value:t.remark,error:n.remark,touched:s.remark,handleChange:r}),i.jsx(de,{isSubmitting:o})]})}const ja=()=>{const e=V(),{user:t}=A(h=>h.auth),{type:n}=A(h=>h.dialog),{companies:s}=A(h=>h.company),{departments:r,subDepartments:a}=A(h=>h.department),{expenseCategories:o,expenseSubCategories:l,expenseSubSubCategories:d}=A(h=>h.expenseCategory),{getMyActiveBanks:c}=Vn();C.useEffect(()=>{s||zt(t?.organisation_id,e),r||Pt(t?.organisation_id,e),a||Kn(t?.organisation_id,e),o||gn(t.organisation_id,e),l||Jn(t.organisation_id,e),d||sr(t.organisation_id,e)},[]);const m=C.useMemo(()=>he(s,"name","id"),[s]),u=c(),f=C.useMemo(()=>u.map(h=>({label:`${h.bank_code} (Bank No: ${h.bank_number})`,value:h.id})),[u]),p=C.useMemo(()=>he(o,"name","id"),[o]),g={category:n==="addCreditTransaction"?1:2,transaction_date:new Date,amount:0,company_id:"",department_id:"",sub_department_id:"",expenses_category_id:"",expenses_sub_category_id:"",expenses_sub_sub_category_id:"",bank_id:"",description:"",receipt:null},b=function(h,{setSubmitting:x}){const y={...h,transaction_date:ve(h.transaction_date,"yyyy-MM-dd")};(n==="addCreditTransaction"?ld(t?.organisation_id,y,e):cd(t?.organisation_id,y,e)).then(()=>{e(J())}).catch(()=>{x(!1)})};return i.jsxs("section",{children:[i.jsxs("div",{className:"-mt-6 mb-8",children:[i.jsx(Qt,{className:"mx-auto size-14 drop-shadow-md"}),i.jsx("h2",{className:"text-center text-xl font-medium",children:n==="addCreditTransaction"?"New Credit Transaction":"New Debit Transaction"})]}),i.jsx(ce,{initialValues:g,onSubmit:b,validationSchema:ib,children:({values:h,errors:x,touched:y,handleChange:j,handleSubmit:N,setFieldValue:_,isSubmitting:S})=>i.jsxs("form",{onSubmit:N,className:"my-1 grid grid-cols-1 space-y-4 gap-x-4 md:grid-cols-2 -mt-4",children:[i.jsx(et,{fieldName:"transaction_date",label:"Date",error:x.transaction_date,touched:y.transaction_date,date:h.transaction_date,setDate:v=>_("transaction_date",v)}),i.jsx(We,{fieldName:"amount",label:"amount",value:h.amount,error:x.amount,touched:y.amount,setFieldValue:_}),i.jsx(Q,{options:m,fieldName:"company_id",label:"Company",value:h.company_id,error:x.company_id,touched:y.company_id,setFieldValue:_,placeholder:"Select company",onValueChange:v=>{_("company_id",v),_("department_id",""),_("sub_department_id","")}}),i.jsx(Q,{options:rr(h.company_id,r),fieldName:"department_id",label:"Department",value:h.department_id,error:x.department_id,touched:y.department_id,setFieldValue:_,placeholder:"Select department",isRequired:!1,onValueChange:v=>{_("sub_department_id",""),_("department_id",v)}}),i.jsx(Q,{options:hi(h.department_id,a),fieldName:"sub_department_id",label:"Sub Department",value:h.sub_department_id,error:x.sub_department_id,touched:y.sub_department_id,setFieldValue:_,placeholder:"Select sub department",isRequired:!1}),i.jsx(Q,{options:f,fieldName:"bank_id",label:"Bank",value:h.bank_id,error:x.bank_id,touched:y.bank_id,setFieldValue:_,placeholder:"Select bank",isRequired:!1}),i.jsx(Q,{options:p,fieldName:"expenses_category_id",label:"Transaction Category",value:h.expenses_category_id,error:x.expenses_category_id,touched:y.expenses_category_id,setFieldValue:_,placeholder:"Select transaction category",onValueChange:v=>{_("expenses_category_id",v),_("expenses_sub_category_id",""),_("expenses_sub_sub_category_id","")}}),i.jsx(Q,{options:Gn(h.expenses_category_id,l),fieldName:"expenses_sub_category_id",label:"Transaction Sub Category",value:h.expenses_sub_category_id,error:x.expenses_sub_category_id,touched:y.expenses_sub_category_id,setFieldValue:_,placeholder:"Select transaction sub category",onValueChange:v=>{_("expenses_sub_sub_category_id",""),_("expenses_sub_category_id",v)}}),i.jsx(Q,{options:ir(h.expenses_sub_category_id,d),fieldName:"expenses_sub_sub_category_id",label:"Transaction Sub Sub Category",value:h.expenses_sub_sub_category_id,error:x.expenses_sub_sub_category_id,touched:y.expenses_sub_sub_category_id,setFieldValue:_,placeholder:"Select sub sub category",isRequired:!1}),i.jsx(te,{fieldName:"description",label:"description",value:h.description,error:x.description,touched:y.description,handleChange:j,placeholder:"Enter description",isRequired:!0}),i.jsxs("div",{className:"col-span-2",children:[i.jsx(Be,{className:"mb-1 gap-0.5 text-xs uppercase",children:"Receipt"}),i.jsx(xi,{onFileChange:v=>{_("receipt",v)}})]}),i.jsx(de,{isSubmitting:S})]})})]})},yb=()=>{const e=H.c(10),t=V(),{user:n}=A(_b),{props:s}=A(vb);let r;e[0]!==s.description?(r={description:s.description},e[0]=s.description,e[1]=r):r=e[1];const a=r;let o;e[2]!==t||e[3]!==s.id||e[4]!==n?.organisation_id?(o=function(m,u){const{setSubmitting:f}=u,p={...m};dd(n?.organisation_id,s.id,p,t).then(()=>{t(J())}).catch(()=>{f(!1)})},e[2]=t,e[3]=s.id,e[4]=n?.organisation_id,e[5]=o):o=e[5];const l=o;let d;e[6]===Symbol.for("react.memo_cache_sentinel")?(d=i.jsxs("div",{className:"-mt-6 mb-8",children:[i.jsx(Qt,{className:"mx-auto size-14 drop-shadow-md"}),i.jsx("h2",{className:"text-center text-xl font-medium",children:"Edit Transaction"})]}),e[6]=d):d=e[6];let c;return e[7]!==l||e[8]!==a?(c=i.jsxs("section",{children:[d,i.jsx(ce,{initialValues:a,onSubmit:l,validationSchema:ab,children:jb})]}),e[7]=l,e[8]=a,e[9]=c):c=e[9],c};function _b(e){return e.auth}function vb(e){return e.dialog}function jb(e){const{values:t,errors:n,touched:s,handleChange:r,handleSubmit:a,setFieldValue:o,isSubmitting:l}=e;return i.jsxs("form",{onSubmit:a,className:"my-1 space-y-4 gap-x-4 -mt-4",children:[i.jsx(te,{fieldName:"description",label:"description",value:t.description,error:n.description,touched:s.description,handleChange:r,placeholder:"Enter description",isRequired:!1}),i.jsxs("div",{className:"",children:[i.jsx(Be,{className:"mb-1 gap-0.5 text-xs uppercase",children:"Receipt"}),i.jsx(xi,{onFileChange:d=>{o("receipt",d)}})]}),i.jsx(de,{isSubmitting:l})]})}const Nb=()=>{const e=V(),{user:t}=A(h=>h.auth),{props:n}=A(h=>h.dialog),{companies:s}=A(h=>h.company),{departments:r,subDepartments:a}=A(h=>h.department),{expenseCategories:o,expenseSubCategories:l,expenseSubSubCategories:d}=A(h=>h.expenseCategory),{getMyActiveBanks:c}=Vn();C.useEffect(()=>{s||zt(t?.organisation_id,e),r||Pt(t?.organisation_id,e),a||Kn(t?.organisation_id,e),o||gn(t.organisation_id,e),l||Jn(t.organisation_id,e),d||sr(t.organisation_id,e)},[]);const m=C.useMemo(()=>he(s,"name","id"),[s]),u=c(),f=C.useMemo(()=>u.map(h=>({label:`${h.bank_code} (Bank No: ${h.bank_number})`,value:h.id})),[u]),p=C.useMemo(()=>he(o,"name","id"),[o]),g={transaction_date:n.transaction_date,amount:n.amount,company_id:s?.find(h=>h.name===n.company)?.id||"",department_id:r?.find(h=>h.name===n.department)?.id||"",sub_department_id:a?.find(h=>h.name===n.sub_department)?.id||"",expenses_category_id:o?.find(h=>h.name===n.expenses_category)?.id||"",expenses_sub_category_id:l?.find(h=>h.name===n.expenses_sub_category)?.id||"",expenses_sub_sub_category_id:d?.find(h=>h.name===n.expenses_sub_sub_category)?.id||"",bank_id:u?.find(h=>h.bank_code===n.bank)?.id||"",description:n.description},b=function(h,{setSubmitting:x}){const y={...h,transaction_date:ve(h.transaction_date,"yyyy-MM-dd")};ud(t?.organisation_id,n.id,y,e).then(()=>{e(J())}).catch(()=>{x(!1)})};return i.jsxs("section",{children:[i.jsxs("div",{className:"-mt-6 mb-8",children:[i.jsx(Qt,{className:"mx-auto size-14 drop-shadow-md"}),i.jsx("h2",{className:"text-center text-xl font-medium",children:"Edit Transaction"})]}),i.jsx(ce,{initialValues:g,onSubmit:b,validationSchema:ob,children:({values:h,errors:x,touched:y,handleChange:j,handleSubmit:N,setFieldValue:_,isSubmitting:S})=>i.jsxs("form",{onSubmit:N,className:"my-1 grid grid-cols-1 space-y-4 gap-x-4 md:grid-cols-2 -mt-4",children:[i.jsx(et,{fieldName:"transaction_date",label:"Date",error:x.transaction_date,touched:y.transaction_date,date:h.transaction_date,setDate:v=>_("transaction_date",v)}),i.jsx(We,{fieldName:"amount",label:"amount",value:h.amount,error:x.amount,touched:y.amount,setFieldValue:_}),i.jsx(Q,{options:m,fieldName:"company_id",label:"Company",value:h.company_id,error:x.company_id,touched:y.company_id,setFieldValue:_,placeholder:"Select company",onValueChange:v=>{_("company_id",v),_("department_id",""),_("sub_department_id","")}}),i.jsx(Q,{options:rr(h.company_id,r),fieldName:"department_id",label:"Department",value:h.department_id,error:x.department_id,touched:y.department_id,setFieldValue:_,placeholder:"Select department",isRequired:!1,onValueChange:v=>{_("sub_department_id",""),_("department_id",v)}}),i.jsx(Q,{options:hi(h.department_id,a),fieldName:"sub_department_id",label:"Sub Department",value:h.sub_department_id,error:x.sub_department_id,touched:y.sub_department_id,setFieldValue:_,placeholder:"Select sub department",isRequired:!1}),i.jsx(Q,{options:f,fieldName:"bank_id",label:"Bank",value:h.bank_id,error:x.bank_id,touched:y.bank_id,setFieldValue:_,placeholder:"Select bank",isRequired:!1}),i.jsx(Q,{options:p,fieldName:"expenses_category_id",label:"Transaction Category",value:h.expenses_category_id,error:x.expenses_category_id,touched:y.expenses_category_id,setFieldValue:_,placeholder:"Select transaction category",onValueChange:v=>{_("expenses_category_id",v),_("expenses_sub_category_id",""),_("expenses_sub_sub_category_id","")}}),i.jsx(Q,{options:Gn(h.expenses_category_id,l),fieldName:"expenses_sub_category_id",label:"Transaction Sub Category",value:h.expenses_sub_category_id,error:x.expenses_sub_category_id,touched:y.expenses_sub_category_id,setFieldValue:_,placeholder:"Select transaction sub category",onValueChange:v=>{_("expenses_sub_sub_category_id",""),_("expenses_sub_category_id",v)}}),i.jsx(Q,{options:ir(h.expenses_sub_category_id,d),fieldName:"expenses_sub_sub_category_id",label:"Transaction Sub Sub Category",value:h.expenses_sub_sub_category_id,error:x.expenses_sub_sub_category_id,touched:y.expenses_sub_sub_category_id,setFieldValue:_,placeholder:"Select sub sub category",isRequired:!1}),i.jsx(te,{fieldName:"description",label:"description",value:h.description,error:x.description,touched:y.description,handleChange:j,placeholder:"Enter description",isRequired:!0}),i.jsx(de,{isSubmitting:S})]})})]})},Na=()=>{const e=H.c(19),t=V(),{user:n}=A(wb),{type:s,props:r}=A(Sb);let a;e[0]!==s||e[1]!==t||e[2]!==r.id||e[3]!==n.organisation_id?(a=function(){(s==="rejectTransaction"?md(n.organisation_id,r.id,t):fd(n.organisation_id,r.id,t)).then(()=>{t(J())})},e[0]=s,e[1]=t,e[2]=r.id,e[3]=n.organisation_id,e[4]=a):a=e[4];const o=a;let l;e[5]===Symbol.for("react.memo_cache_sentinel")?(l=i.jsx(ze,{className:"text-destructive size-10"}),e[5]=l):l=e[5];const d=s==="rejectTransaction"?"Reject":"Archive";let c;e[6]!==d?(c=i.jsxs("h2",{className:"text-xl font-semibold",children:[d," ","Transaction"]}),e[6]=d,e[7]=c):c=e[7];const m=s==="rejectTransaction"?"reject":"archive";let u;e[8]!==m?(u=i.jsxs("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:["Are you sure you want to"," ",m," this? This action cannot be undone."]}),e[8]=m,e[9]=u):u=e[9];let f;e[10]!==c||e[11]!==u?(f=i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[l,c,u]}),e[10]=c,e[11]=u,e[12]=f):f=e[12];const p=s==="archiveTransaction";let g;e[13]!==o||e[14]!==p?(g=i.jsx(ke,{handleConfirm:o,showIcons:p}),e[13]=o,e[14]=p,e[15]=g):g=e[15];let b;return e[16]!==f||e[17]!==g?(b=i.jsxs("div",{className:"-mt-4 text-center",children:[f,g]}),e[16]=f,e[17]=g,e[18]=b):b=e[18],b};function wb(e){return e.auth}function Sb(e){return e.dialog}const Cb=()=>{const e=H.c(86),t=A(kb);let n,s;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=i.jsx(Qt,{className:"drop-shadow-md mx-auto size-14"}),s=i.jsx("h2",{className:"text-xl font-medium text-center",children:"Transaction Details"}),e[0]=n,e[1]=s):(n=e[0],s=e[1]);let r;e[2]===Symbol.for("react.memo_cache_sentinel")?(r=i.jsxs("div",{className:"flex items-center gap-2 text-foreground font-medium",children:[i.jsx(gi,{className:"w-4 h-4 text-muted-foreground"}),i.jsx("span",{children:"Transaction Info"})]}),e[2]=r):r=e[2];let a;e[3]===Symbol.for("react.memo_cache_sentinel")?(a=i.jsx("p",{className:"text-xs mb-1",children:"Transaction Date"}),e[3]=a):a=e[3];let o;e[4]!==t.transaction_date?(o=ve(new Date(t.transaction_date),"PPP"),e[4]=t.transaction_date,e[5]=o):o=e[5];let l;e[6]!==o?(l=i.jsxs("div",{children:[a,i.jsx("p",{className:"text-foreground font-medium",children:o})]}),e[6]=o,e[7]=l):l=e[7];let d;e[8]===Symbol.for("react.memo_cache_sentinel")?(d=i.jsx("p",{className:"text-xs mb-1",children:"Amount"}),e[8]=d):d=e[8];let c;e[9]!==t.amount?(c=on(t.amount),e[9]=t.amount,e[10]=c):c=e[10];let m;e[11]!==c?(m=i.jsxs("div",{children:[d,i.jsx("p",{className:"text-foreground font-medium",children:c})]}),e[11]=c,e[12]=m):m=e[12];let u;e[13]===Symbol.for("react.memo_cache_sentinel")?(u=i.jsx("p",{className:"text-xs mb-1",children:"Category"}),e[13]=u):u=e[13];let f;e[14]!==t.category?(f=i.jsxs("div",{children:[u,i.jsx("p",{className:"text-foreground font-medium",children:t.category})]}),e[14]=t.category,e[15]=f):f=e[15];let p;e[16]===Symbol.for("react.memo_cache_sentinel")?(p=i.jsx("p",{className:"text-xs mb-1",children:"Bank"}),e[16]=p):p=e[16];let g;e[17]!==t.bank?(g=i.jsxs("div",{children:[p,i.jsx("p",{className:"text-foreground font-medium",children:t.bank})]}),e[17]=t.bank,e[18]=g):g=e[18];let b;e[19]!==f||e[20]!==g||e[21]!==l||e[22]!==m?(b=i.jsxs("div",{className:"space-y-2",children:[r,i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[l,m,f,g]})]}),e[19]=f,e[20]=g,e[21]=l,e[22]=m,e[23]=b):b=e[23];let h;e[24]===Symbol.for("react.memo_cache_sentinel")?(h=i.jsx(fe,{className:"bg-black/10 dark:bg-white/10"}),e[24]=h):h=e[24];let x;e[25]===Symbol.for("react.memo_cache_sentinel")?(x=i.jsxs("div",{className:"flex items-center gap-2 text-foreground font-medium",children:[i.jsx(vo,{className:"w-4 h-4 text-muted-foreground"}),i.jsx("span",{children:"Organisational Info"})]}),e[25]=x):x=e[25];let y;e[26]===Symbol.for("react.memo_cache_sentinel")?(y=i.jsx("p",{className:"text-xs mb-1",children:"Company"}),e[26]=y):y=e[26];let j;e[27]!==t.company?(j=i.jsxs("div",{children:[y,i.jsx("p",{className:"text-foreground font-medium",children:t.company})]}),e[27]=t.company,e[28]=j):j=e[28];let N;e[29]===Symbol.for("react.memo_cache_sentinel")?(N=i.jsx("p",{className:"text-xs mb-1",children:"Department"}),e[29]=N):N=e[29];let _;e[30]!==t.department?(_=i.jsxs("div",{children:[N,i.jsx("p",{className:"text-foreground font-medium",children:t.department})]}),e[30]=t.department,e[31]=_):_=e[31];let S;e[32]===Symbol.for("react.memo_cache_sentinel")?(S=i.jsx("p",{className:"text-xs mb-1",children:"Sub-Department"}),e[32]=S):S=e[32];let v;e[33]!==t.sub_department?(v=i.jsxs("div",{children:[S,i.jsx("p",{className:"text-foreground font-medium",children:t.sub_department})]}),e[33]=t.sub_department,e[34]=v):v=e[34];let w;e[35]!==j||e[36]!==_||e[37]!==v?(w=i.jsxs("div",{className:"space-y-2",children:[x,i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[j,_,v]})]}),e[35]=j,e[36]=_,e[37]=v,e[38]=w):w=e[38];let k;e[39]===Symbol.for("react.memo_cache_sentinel")?(k=i.jsx(fe,{className:"bg-black/10 dark:bg-white/10"}),e[39]=k):k=e[39];let E;e[40]===Symbol.for("react.memo_cache_sentinel")?(E=i.jsxs("div",{className:"flex items-center gap-2 text-foreground font-medium",children:[i.jsx(bi,{className:"w-4 h-4 text-muted-foreground"}),i.jsx("span",{children:"Transaction Categories"})]}),e[40]=E):E=e[40];let R;e[41]===Symbol.for("react.memo_cache_sentinel")?(R=i.jsx("p",{className:"text-xs mb-1",children:"Category"}),e[41]=R):R=e[41];let T;e[42]!==t.expenses_category?(T=i.jsxs("div",{children:[R,i.jsx("p",{className:"text-foreground font-medium",children:t.expenses_category})]}),e[42]=t.expenses_category,e[43]=T):T=e[43];let I;e[44]===Symbol.for("react.memo_cache_sentinel")?(I=i.jsx("p",{className:"text-xs mb-1",children:"Sub Category"}),e[44]=I):I=e[44];let L;e[45]!==t.expenses_sub_category?(L=i.jsxs("div",{children:[I,i.jsx("p",{className:"text-foreground font-medium",children:t.expenses_sub_category})]}),e[45]=t.expenses_sub_category,e[46]=L):L=e[46];let M;e[47]===Symbol.for("react.memo_cache_sentinel")?(M=i.jsx("p",{className:"text-xs mb-1",children:"Sub Sub Category"}),e[47]=M):M=e[47];let $;e[48]!==t.expenses_sub_sub_category?($=i.jsxs("div",{children:[M,i.jsx("p",{className:"text-foreground font-medium",children:t.expenses_sub_sub_category})]}),e[48]=t.expenses_sub_sub_category,e[49]=$):$=e[49];let O;e[50]!==T||e[51]!==L||e[52]!==$?(O=i.jsxs("div",{className:"space-y-2",children:[E,i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[T,L,$]})]}),e[50]=T,e[51]=L,e[52]=$,e[53]=O):O=e[53];let X;e[54]===Symbol.for("react.memo_cache_sentinel")?(X=i.jsx(fe,{className:"bg-black/10 dark:bg-white/10"}),e[54]=X):X=e[54];let B;e[55]===Symbol.for("react.memo_cache_sentinel")?(B=i.jsx("p",{className:"text-xs mb-1",children:"Description"}),e[55]=B):B=e[55];const Y=t.description||"-";let U;e[56]!==Y?(U=i.jsxs("div",{children:[B,i.jsx("p",{className:"text-foreground font-medium whitespace-pre-wrap",children:Y})]}),e[56]=Y,e[57]=U):U=e[57];let W;e[58]===Symbol.for("react.memo_cache_sentinel")?(W=i.jsx("p",{className:"text-xs mb-1",children:"Receipt"}),e[58]=W):W=e[58];let G;e[59]!==t.id||e[60]!==t.receipt?(G=t.receipt?i.jsx("a",{href:yi(t.receipt),download:`receipt-${t.id}.pdf`,target:"_blank",children:i.jsx(me,{size:"xs",className:"py-3.5",children:"View"})}):"No recipt available.",e[59]=t.id,e[60]=t.receipt,e[61]=G):G=e[61];let ee;e[62]!==G?(ee=i.jsxs("div",{children:[W,i.jsx("p",{className:"text-foreground font-medium whitespace-pre-wrap",children:G})]}),e[62]=G,e[63]=ee):ee=e[63];let ne;e[64]!==U||e[65]!==ee?(ne=i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[U,ee]}),e[64]=U,e[65]=ee,e[66]=ne):ne=e[66];let K;e[67]===Symbol.for("react.memo_cache_sentinel")?(K=i.jsx("p",{className:"text-xs mb-1",children:"Status"}),e[67]=K):K=e[67];const se=`px-3 py-1 text-black ${ar(t.status)}`;let z;e[68]!==se||e[69]!==t.status?(z=i.jsxs("div",{children:[K,i.jsx(dt,{className:se,children:t.status})]}),e[68]=se,e[69]=t.status,e[70]=z):z=e[70];let F;e[71]!==t.hod_approver?(F=t.hod_approver&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs mb-1",children:"HOD Approver"}),i.jsx("p",{className:"text-foreground font-medium whitespace-pre-wrap",children:t.hod_approver})]}),e[71]=t.hod_approver,e[72]=F):F=e[72];let P;e[73]!==t.finance_approver||e[74]!==t.hod_approver?(P=t.finance_approver&&i.jsxs("div",{children:[i.jsx("p",{className:"text-xs mb-1",children:"Finance Approver"}),i.jsx("p",{className:"text-foreground font-medium whitespace-pre-wrap",children:t.hod_approver})]}),e[73]=t.finance_approver,e[74]=t.hod_approver,e[75]=P):P=e[75];let Z;e[76]!==z||e[77]!==F||e[78]!==P?(Z=i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[z,F,P]}),e[76]=z,e[77]=F,e[78]=P,e[79]=Z):Z=e[79];let re;return e[80]!==b||e[81]!==w||e[82]!==O||e[83]!==ne||e[84]!==Z?(re=i.jsxs("div",{className:"-mt-6",children:[n,s,i.jsxs("div",{className:"space-y-4 px-2 md:px-4 py-2 text-sm text-muted-foreground",children:[b,h,w,k,O,X,ne,Z]})]}),e[80]=b,e[81]=w,e[82]=O,e[83]=ne,e[84]=Z,e[85]=re):re=e[85],re};function kb(e){return e.dialog.props}const Ab=()=>{const e=H.c(12),t=V(),{user:n}=A(Eb),{companies:s}=A(Rb);let r;e[0]!==s?(r=he(s,"name","id"),e[0]=s,e[1]=r):r=e[1];const a=r;let o;e[2]===Symbol.for("react.memo_cache_sentinel")?(o={transaction_date:new Date,deposit_amount:0,withdraw_amount:0,bonus_given_amount:0,company_id:"",description:""},e[2]=o):o=e[2];const l=o;let d;e[3]!==t||e[4]!==n?.organisation_id?(d=function(p,g){const{setSubmitting:b}=g,h={...p,transaction_date:ve(p.transaction_date,"yyyy-MM-dd")};pd(n?.organisation_id,h,t).then(()=>{t(J())}).catch(()=>{b(!1)})},e[3]=t,e[4]=n?.organisation_id,e[5]=d):d=e[5];const c=d;let m;e[6]===Symbol.for("react.memo_cache_sentinel")?(m=i.jsxs("div",{className:"-mt-6 mb-8",children:[i.jsx(Qt,{className:"mx-auto size-14 drop-shadow-md"}),i.jsx("h2",{className:"text-center text-xl font-medium",children:"New Wallet Activity"})]}),e[6]=m):m=e[6];let u;e[7]!==a?(u=p=>{const{values:g,errors:b,touched:h,handleChange:x,handleSubmit:y,setFieldValue:j,isSubmitting:N}=p;return i.jsxs("form",{onSubmit:y,className:"my-1 grid grid-cols-1 space-y-4 gap-x-4 md:grid-cols-2",children:[i.jsx(et,{fieldName:"transaction_date",label:"Date",error:b.transaction_date,touched:h.transaction_date,date:g.transaction_date,setDate:_=>j("transaction_date",_)}),i.jsx(Q,{options:a,fieldName:"company_id",label:"Company",value:g.company_id,error:b.company_id,touched:h.company_id,setFieldValue:j,placeholder:"Select company"}),i.jsx(We,{fieldName:"deposit_amount",label:"deposit amount",value:g.deposit_amount,error:b.deposit_amount,touched:h.deposit_amount,setFieldValue:j}),i.jsx(We,{fieldName:"withdraw_amount",label:"withdraw amount",value:g.withdraw_amount,error:b.withdraw_amount,touched:h.withdraw_amount,setFieldValue:j}),i.jsx(We,{fieldName:"bonus_given_amount",label:"bonus given amount",value:g.bonus_given_amount,error:b.bonus_given_amount,touched:h.bonus_given_amount,setFieldValue:j}),i.jsx(te,{fieldName:"description",label:"description",value:g.description,error:b.description,touched:h.description,handleChange:x,placeholder:"Enter description",isRequired:!1}),i.jsx(de,{isSubmitting:N})]})},e[7]=a,e[8]=u):u=e[8];let f;return e[9]!==c||e[10]!==u?(f=i.jsxs("section",{children:[m,i.jsx(ce,{initialValues:l,onSubmit:c,validationSchema:lb,children:u})]}),e[9]=c,e[10]=u,e[11]=f):f=e[11],f};function Eb(e){return e.auth}function Rb(e){return e.company}const Mb=()=>{const e=H.c(7),t=V(),{user:n}=A(Tb),s=A(Db);let r;e[0]!==t||e[1]!==n?.organisation_id||e[2]!==s?.id?(r=function(){hd(n?.organisation_id,s?.id,t).then(()=>{t(J())})},e[0]=t,e[1]=n?.organisation_id,e[2]=s?.id,e[3]=r):r=e[3];const a=r;let o;e[4]===Symbol.for("react.memo_cache_sentinel")?(o=i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[i.jsx(ze,{className:"text-destructive size-10"}),i.jsx("h2",{className:"text-xl font-semibold",children:"Archive Wallet Activity"}),i.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Are you sure you want to archive this? This action cannot be undone."})]}),e[4]=o):o=e[4];let l;return e[5]!==a?(l=i.jsxs("div",{className:"-mt-4 text-center",children:[o,i.jsx(ke,{handleConfirm:a})]}),e[5]=a,e[6]=l):l=e[6],l};function Tb(e){return e.auth}function Db(e){return e.dialog.props}const Ib={addExpenseCategory:oa,editExpenseCategory:oa,archiveExpenseCategory:Jp,addExpenseSubCategory:_a,editExpenseSubCategory:_a,archiveExpenseSubCategory:Kg,addExpenseSubSubCategory:va,editExpenseSubSubCategory:va,archiveExpenseSubSubCategory:Zg,sortExpenseCategory:jr,sortExpenseSubCategory:jr,sortExpenseSubSubCategory:jr,addEmployeeClaim:cb,rejectClaim:hb,claimDetails:fb,approveClaimByFinance:mb,addCreditTransaction:ja,addDebitTransaction:ja,editTransaction:Nb,editApprovedTransaction:yb,transactionDetails:Cb,rejectTransaction:Na,archiveTransaction:Na,addWalletActivity:Ab,archiveWalletActivity:Mb,addNewBank:ra,editBank:ra,assignMemberToBank:dp,bankDetailedView:gp,bankWithdrawDeposit:jp,bankTransfer:vp,rejectBankTransaction:aa,archiveBankTransaction:aa,addTransactionDescription:Np,archiveTransactionDescription:Cp,addBudget:Tp,budgetDetails:Op,rejectBudget:zp},nl={full_name:"",first_name:"",last_name:"",chinese_name:"",gender:"",gender_others:"",marital_status:"",marital_status_others:"",birth_date:null,race:"",race_others:"",religion:"",religion_others:"",address:"",id_number:"",nationality:"",nationality_others:"",contact_number:"",email:"",preferred_start_date:null,resume:null,image:null,family_members:[{name:"",relationship:"",gender:"",gender_others:"",age:"",occupation:""}],education_experiences:[{institution:"",qualification:"",field_of_study:"",start_date:null,end_date:null,result:"",location:""}],work_experiences:[{company_name:"",position:"",department:"",location:"",start_date:null,end_date:null,job_responsibilities:"",reason_of_leaving:""}]},sl={1:Object.keys(nl).filter(e=>!["family_members","education_experiences","work_experiences"].includes(e)),2:["family_members"],3:["education_experiences"],4:["work_experiences"]},Lb=(e,t,n)=>{const s={};sl[e]?.forEach(r=>{Array.isArray(n[r])?s[r]=n[r].map(a=>Object.keys(a).reduce((o,l)=>(o[l]=!0,o),{})):s[r]=!0}),t(s)},rn=[{id:1,title:"Personal Info",icon:_o},{id:2,title:"Family Members",icon:gd},{id:3,title:"Education",icon:bd},{id:4,title:"Work Experience",icon:xd},{id:5,title:"Review",icon:yd}],wa=()=>{const e=H.c(36),t=A($b),{user:n}=A(Ob),s=V(),[r,a]=C.useState(1);let o;e[0]!==r?(o=()=>{r<rn.length&&a(qb)},e[0]=r,e[1]=o):o=e[1];const l=o;let d;e[2]!==r?(d=()=>{r>1&&a(r-1)},e[2]=r,e[3]=d):d=e[3];const c=d;let m;e[4]!==s||e[5]!==t||e[6]!==n?.organisation_id?(m=w=>{const k=new FormData,E=zb,R=Pb;if(["full_name","first_name","last_name","chinese_name","gender","gender_others","marital_status","marital_status_others","race","race_others","religion","religion_others","address","id_number","nationality","nationality_others","contact_number","email"].forEach(M=>{E(w[M])&&k.append(M,w[M])}),["birth_date","preferred_start_date"].forEach(M=>{const $=R(w[M]);$&&k.append(M,$)}),Array.isArray(w.family_members)){const M=w.family_members.filter($=>Object.values($).some(E));k.append("family_members",JSON.stringify(M))}if(Array.isArray(w.education_experiences)){const M=w.education_experiences.map($=>({...$,start_date:R($.start_date),end_date:R($.end_date)}));k.append("education_experiences",JSON.stringify(M))}if(Array.isArray(w.work_experiences)){const M=w.work_experiences.map($=>({...$,start_date:R($.start_date),end_date:R($.end_date)}));k.append("work_experiences",JSON.stringify(M))}w.resume instanceof File&&k.append("resume",w.resume),w.image instanceof File&&k.append("image",w.image),(t==="addToBlacklistPool"?_d(n?.organisation_id,k,s):vd(n?.organisation_id,k,s)).then(()=>{s(J())})},e[4]=s,e[5]=t,e[6]=n?.organisation_id,e[7]=m):m=e[7];const u=m;let f;e[8]!==r?(f=()=>{switch(r){case 1:return Sd;case 2:return wd;case 3:return Nd;case 4:return jd;default:return le()}},e[8]=r,e[9]=f):f=e[9];const p=f,g=t==="addToBlacklistPool"?"Blacklist":"Whitelist";let b;e[10]!==g?(b=i.jsx("div",{className:"-mt-6 mb-8",children:i.jsxs("h2",{className:"text-center text-xl font-medium mt-2",children:["Add Candidate to"," ",g," Pool"]})}),e[10]=g,e[11]=b):b=e[11];let h;e[12]!==r?(h=rn.map((w,k)=>{const E=w.icon,R=r===w.id,T=r>w.id;return i.jsxs("div",{className:"flex items-center",children:[i.jsx("div",{className:be("flex items-center justify-center w-9 h-9 rounded-full border transition-colors",R?"border-primary bg-primary text-primary-foreground":T?"border-green-500 bg-green-500 text-white":""),children:i.jsx(E,{className:"w-5 h-5 opacity-75"})}),i.jsx("div",{className:"ml-3 hidden md:block",children:i.jsx("p",{className:be("text-sm font-medium",R?"text-primary":T?"text-green-600":"text-muted-foreground"),children:w.title})}),k<rn.length-1&&i.jsx("div",{className:be("w-12 h-0.5 mx-4",T?"bg-green-500":"bg-muted")})]},w.id)}),e[12]=r,e[13]=h):h=e[13];let x;e[14]!==h?(x=i.jsx("div",{className:"flex items-center justify-between",children:h}),e[14]=h,e[15]=x):x=e[15];let y;e[16]!==p?(y=p(),e[16]=p,e[17]=y):y=e[17];let j;e[18]!==r||e[19]!==l||e[20]!==u?(j=w=>{r===rn.length?u(w):l()},e[18]=r,e[19]=l,e[20]=u,e[21]=j):j=e[21];let N;e[22]!==r||e[23]!==l||e[24]!==c?(N=w=>{const{values:k,errors:E,touched:R,setFieldValue:T,setTouched:I,handleChange:L,handleSubmit:M,validateForm:$}=w;return i.jsxs("form",{onSubmit:M,children:[r===1&&i.jsx(Cd,{values:k,errors:E,touched:R,handleChange:L,setFieldValue:T,page:"pool"}),r===2&&i.jsx(kd,{values:k,errors:E,touched:R,handleChange:L,setFieldValue:T}),r===3&&i.jsx(Ad,{values:k,errors:E,touched:R,handleChange:L,setFieldValue:T}),r===4&&i.jsx(Ed,{values:k,errors:E,touched:R,handleChange:L,setFieldValue:T}),r===5&&i.jsx(Rd,{values:k,errors:E,touched:R,setFieldValue:T,page:"pool"}),i.jsxs("div",{className:"flex justify-between mt-4",children:[i.jsx(me,{type:"button",variant:"outline",onClick:c,disabled:r===1,children:"Previous"}),i.jsx(me,{type:"button",onClick:async()=>{Lb(r,I,k);const O=await $();(sl[r]||[]).some(Y=>O[Y]?.length||typeof O[Y]=="string")||(r<rn.length?l():M(k))},children:r===rn.length?"Submit Application":"Next"})]})]})},e[22]=r,e[23]=l,e[24]=c,e[25]=N):N=e[25];let _;e[26]!==N||e[27]!==y||e[28]!==j?(_=i.jsx(ce,{initialValues:nl,validationSchema:y,onSubmit:j,children:N}),e[26]=N,e[27]=y,e[28]=j,e[29]=_):_=e[29];let S;e[30]!==_||e[31]!==x?(S=i.jsxs("div",{className:"max-w-6xl mx-auto space-y-8",children:[x,_]}),e[30]=_,e[31]=x,e[32]=S):S=e[32];let v;return e[33]!==S||e[34]!==b?(v=i.jsxs("section",{children:[b,S]}),e[33]=S,e[34]=b,e[35]=v):v=e[35],v};function $b(e){return e.dialog.type}function Ob(e){return e.auth}function qb(e){return e+1}function zb(e){return e!=null&&e!==""}function Pb(e){if(!e)return null;const t=new Date(e);return isNaN(t)?null:t.toISOString().split("T")[0]}var Ss=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:n,...s}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,s,n]},Bb=/^\s*>\s$/,Hb=Ie.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return Ss("blockquote",{..._e(this.options.HTMLAttributes,e),children:Ss("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[mn({find:Bb,type:this.type})]}}),Fb=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,Wb=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,Ub=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Vb=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,Kb=Zt.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return Ss("strong",{..._e(this.options.HTMLAttributes,e),children:Ss("slot",{})})},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Jt({find:Fb,type:this.type}),Jt({find:Ub,type:this.type})]},addPasteRules(){return[Ot({find:Wb,type:this.type}),Ot({find:Vb,type:this.type})]}}),Jb=/(^|[^`])`([^`]+)`(?!`)$/,Gb=/(^|[^`])`([^`]+)`(?!`)/g,Yb=Zt.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",_e(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Jt({find:Jb,type:this.type})]},addPasteRules(){return[Ot({find:Gb,type:this.type})]}}),Xb=/^```([a-z]+)?[\s\n]$/,Qb=/^~~~([a-z]+)?[\s\n]$/,Zb=Ie.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,a=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return a||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",_e(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:e})=>{if(!this.options.enableTabIndentation)return!1;const{state:t}=e,{selection:n}=t,{$from:s,empty:r}=n;if(s.parent.type!==this.type)return!1;const a=" ".repeat(this.options.tabSize);return r?e.commands.insertContent(a):e.commands.command(({tr:o})=>{const{from:l,to:d}=n,u=t.doc.textBetween(l,d,`
`,`
`).split(`
`).map(f=>a+f).join(`
`);return o.replaceWith(l,d,t.schema.text(u)),!0})},"Shift-Tab":({editor:e})=>{if(!this.options.enableTabIndentation)return!1;const{state:t}=e,{selection:n}=t,{$from:s,empty:r}=n;return s.parent.type!==this.type?!1:r?e.commands.command(({tr:a})=>{var o;const{pos:l}=s,d=s.start(),c=s.end(),u=t.doc.textBetween(d,c,`
`,`
`).split(`
`);let f=0,p=0;const g=l-d;for(let N=0;N<u.length;N+=1){if(p+u[N].length>=g){f=N;break}p+=u[N].length+1}const h=((o=u[f].match(/^ */))==null?void 0:o[0])||"",x=Math.min(h.length,this.options.tabSize);if(x===0)return!0;let y=d;for(let N=0;N<f;N+=1)y+=u[N].length+1;return a.delete(y,y+x),l-y<=x&&a.setSelection(Pe.create(a.doc,y)),!0}):e.commands.command(({tr:a})=>{const{from:o,to:l}=n,m=t.doc.textBetween(o,l,`
`,`
`).split(`
`).map(u=>{var f;const p=((f=u.match(/^ */))==null?void 0:f[0])||"",g=Math.min(p.length,this.options.tabSize);return u.slice(g)}).join(`
`);return a.replaceWith(o,l,t.schema.text(m)),!0})},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:s,empty:r}=n;if(!r||s.parent.type!==this.type)return!1;const a=s.parentOffset===s.parent.nodeSize-2,o=s.parent.textContent.endsWith(`

`);return!a||!o?!1:e.chain().command(({tr:l})=>(l.delete(s.pos-2,s.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:s}=t,{$from:r,empty:a}=n;if(!a||r.parent.type!==this.type||!(r.parentOffset===r.parent.nodeSize-2))return!1;const l=r.after();return l===void 0?!1:s.nodeAt(l)?e.commands.command(({tr:c})=>(c.setSelection(Fe.near(s.resolve(l))),!0)):e.commands.exitCode()}}},addInputRules(){return[Or({find:Xb,type:this.type,getAttributes:e=>({language:e[1]})}),Or({find:Qb,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new Ue({key:new Ve("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),s=t.clipboardData.getData("vscode-editor-data"),r=s?JSON.parse(s):void 0,a=r?.mode;if(!n||!a)return!1;const{tr:o,schema:l}=e.state,d=l.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:a},d)),o.selection.$from.parent.type!==this.type&&o.setSelection(Pe.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),e.dispatch(o),!0}}})]}}),ex=Ie.create({name:"doc",topNode:!0,content:"block+"}),tx=Ie.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",_e(this.options.HTMLAttributes,e)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:s})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:r,storedMarks:a}=n;if(r.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=s.extensionManager,d=a||r.$to.parentOffset&&r.$from.marks();return t().insertContent({type:this.name}).command(({tr:c,dispatch:m})=>{if(m&&d&&o){const u=d.filter(f=>l.includes(f.type.name));c.ensureMarks(u)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),nx=Ie.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,_e(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>Or({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),sx=Ie.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",_e(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!Md(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:s}=n,r=e();return No(n)?r.insertContentAt(s.pos,{type:this.name}):r.insertContent({type:this.name}),r.command(({tr:a,dispatch:o})=>{var l;if(o){const{$to:d}=a.selection,c=d.end();if(d.nodeAfter)d.nodeAfter.isTextblock?a.setSelection(Pe.create(a.doc,d.pos+1)):d.nodeAfter.isBlock?a.setSelection(or.create(a.doc,d.pos)):a.setSelection(Pe.create(a.doc,d.pos));else{const m=(l=d.parent.type.contentMatch.defaultType)==null?void 0:l.create();m&&(a.insert(c,m),a.setSelection(Pe.create(a.doc,c+1)))}a.scrollIntoView()}return!0}).run()}}},addInputRules(){return[jo({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),rx=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,ix=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,ax=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,ox=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,lx=Zt.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",_e(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Jt({find:rx,type:this.type}),Jt({find:ax,type:this.type})]},addPasteRules(){return[Ot({find:ix,type:this.type}),Ot({find:ox,type:this.type})]}});const cx="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",dx="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",Kr="numeric",Jr="ascii",Gr="alpha",Dn="asciinumeric",En="alphanumeric",Yr="domain",rl="emoji",ux="scheme",mx="slashscheme",Nr="whitespace";function fx(e,t){return e in t||(t[e]=[]),t[e]}function Ft(e,t,n){t[Kr]&&(t[Dn]=!0,t[En]=!0),t[Jr]&&(t[Dn]=!0,t[Gr]=!0),t[Dn]&&(t[En]=!0),t[Gr]&&(t[En]=!0),t[En]&&(t[Yr]=!0),t[rl]&&(t[Yr]=!0);for(const s in t){const r=fx(s,n);r.indexOf(e)<0&&r.push(e)}}function px(e,t){const n={};for(const s in t)t[s].indexOf(e)>=0&&(n[s]=!0);return n}function He(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}He.groups={};He.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let s=0;s<t.jr.length;s++){const r=t.jr[s][0],a=t.jr[s][1];if(a&&r.test(e))return a}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,s){for(let r=0;r<e.length;r++)this.tt(e[r],t,n,s)},tr(e,t,n,s){s=s||He.groups;let r;return t&&t.j?r=t:(r=new He(t),n&&s&&Ft(t,n,s)),this.jr.push([e,r]),r},ts(e,t,n,s){let r=this;const a=e.length;if(!a)return r;for(let o=0;o<a-1;o++)r=r.tt(e[o]);return r.tt(e[a-1],t,n,s)},tt(e,t,n,s){s=s||He.groups;const r=this;if(t&&t.j)return r.j[e]=t,t;const a=t;let o,l=r.go(e);if(l?(o=new He,Object.assign(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new He,a){if(s)if(o.t&&typeof o.t=="string"){const d=Object.assign(px(o.t,s),n);Ft(a,d,s)}else n&&Ft(a,n,s);o.t=a}return r.j[e]=o,o}};const oe=(e,t,n,s,r)=>e.ta(t,n,s,r),Ne=(e,t,n,s,r)=>e.tr(t,n,s,r),Sa=(e,t,n,s,r)=>e.ts(t,n,s,r),q=(e,t,n,s,r)=>e.tt(t,n,s,r),St="WORD",Xr="UWORD",il="ASCIINUMERICAL",al="ALPHANUMERICAL",Fn="LOCALHOST",Qr="TLD",Zr="UTLD",gs="SCHEME",an="SLASH_SCHEME",Ai="NUM",ei="WS",Ei="NL",In="OPENBRACE",Ln="CLOSEBRACE",Cs="OPENBRACKET",ks="CLOSEBRACKET",As="OPENPAREN",Es="CLOSEPAREN",Rs="OPENANGLEBRACKET",Ms="CLOSEANGLEBRACKET",Ts="FULLWIDTHLEFTPAREN",Ds="FULLWIDTHRIGHTPAREN",Is="LEFTCORNERBRACKET",Ls="RIGHTCORNERBRACKET",$s="LEFTWHITECORNERBRACKET",Os="RIGHTWHITECORNERBRACKET",qs="FULLWIDTHLESSTHAN",zs="FULLWIDTHGREATERTHAN",Ps="AMPERSAND",Bs="APOSTROPHE",Hs="ASTERISK",Dt="AT",Fs="BACKSLASH",Ws="BACKTICK",Us="CARET",Lt="COLON",Ri="COMMA",Vs="DOLLAR",ht="DOT",Ks="EQUALS",Mi="EXCLAMATION",st="HYPHEN",$n="PERCENT",Js="PIPE",Gs="PLUS",Ys="POUND",On="QUERY",Ti="QUOTE",ol="FULLWIDTHMIDDLEDOT",Di="SEMI",gt="SLASH",qn="TILDE",Xs="UNDERSCORE",ll="EMOJI",Qs="SYM";var cl=Object.freeze({__proto__:null,ALPHANUMERICAL:al,AMPERSAND:Ps,APOSTROPHE:Bs,ASCIINUMERICAL:il,ASTERISK:Hs,AT:Dt,BACKSLASH:Fs,BACKTICK:Ws,CARET:Us,CLOSEANGLEBRACKET:Ms,CLOSEBRACE:Ln,CLOSEBRACKET:ks,CLOSEPAREN:Es,COLON:Lt,COMMA:Ri,DOLLAR:Vs,DOT:ht,EMOJI:ll,EQUALS:Ks,EXCLAMATION:Mi,FULLWIDTHGREATERTHAN:zs,FULLWIDTHLEFTPAREN:Ts,FULLWIDTHLESSTHAN:qs,FULLWIDTHMIDDLEDOT:ol,FULLWIDTHRIGHTPAREN:Ds,HYPHEN:st,LEFTCORNERBRACKET:Is,LEFTWHITECORNERBRACKET:$s,LOCALHOST:Fn,NL:Ei,NUM:Ai,OPENANGLEBRACKET:Rs,OPENBRACE:In,OPENBRACKET:Cs,OPENPAREN:As,PERCENT:$n,PIPE:Js,PLUS:Gs,POUND:Ys,QUERY:On,QUOTE:Ti,RIGHTCORNERBRACKET:Ls,RIGHTWHITECORNERBRACKET:Os,SCHEME:gs,SEMI:Di,SLASH:gt,SLASH_SCHEME:an,SYM:Qs,TILDE:qn,TLD:Qr,UNDERSCORE:Xs,UTLD:Zr,UWORD:Xr,WORD:St,WS:ei});const Nt=/[a-z]/,Cn=new RegExp("\\p{L}","u"),wr=new RegExp("\\p{Emoji}","u"),wt=/\d/,Sr=/\s/,Ca="\r",Cr=`
`,hx="",gx="",kr="";let as=null,os=null;function bx(e=[]){const t={};He.groups=t;const n=new He;as==null&&(as=ka(cx)),os==null&&(os=ka(dx)),q(n,"'",Bs),q(n,"{",In),q(n,"}",Ln),q(n,"[",Cs),q(n,"]",ks),q(n,"(",As),q(n,")",Es),q(n,"<",Rs),q(n,">",Ms),q(n,"",Ts),q(n,"",Ds),q(n,"",Is),q(n,"",Ls),q(n,"",$s),q(n,"",Os),q(n,"",qs),q(n,"",zs),q(n,"&",Ps),q(n,"*",Hs),q(n,"@",Dt),q(n,"`",Ws),q(n,"^",Us),q(n,":",Lt),q(n,",",Ri),q(n,"$",Vs),q(n,".",ht),q(n,"=",Ks),q(n,"!",Mi),q(n,"-",st),q(n,"%",$n),q(n,"|",Js),q(n,"+",Gs),q(n,"#",Ys),q(n,"?",On),q(n,'"',Ti),q(n,"/",gt),q(n,";",Di),q(n,"~",qn),q(n,"_",Xs),q(n,"\\",Fs),q(n,"",ol);const s=Ne(n,wt,Ai,{[Kr]:!0});Ne(s,wt,s);const r=Ne(s,Nt,il,{[Dn]:!0}),a=Ne(s,Cn,al,{[En]:!0}),o=Ne(n,Nt,St,{[Jr]:!0});Ne(o,wt,r),Ne(o,Nt,o),Ne(r,wt,r),Ne(r,Nt,r);const l=Ne(n,Cn,Xr,{[Gr]:!0});Ne(l,Nt),Ne(l,wt,a),Ne(l,Cn,l),Ne(a,wt,a),Ne(a,Nt),Ne(a,Cn,a);const d=q(n,Cr,Ei,{[Nr]:!0}),c=q(n,Ca,ei,{[Nr]:!0}),m=Ne(n,Sr,ei,{[Nr]:!0});q(n,kr,m),q(c,Cr,d),q(c,kr,m),Ne(c,Sr,m),q(m,Ca),q(m,Cr),Ne(m,Sr,m),q(m,kr,m);const u=Ne(n,wr,ll,{[rl]:!0});q(u,"#"),Ne(u,wr,u),q(u,hx,u);const f=q(u,gx);q(f,"#"),Ne(f,wr,u);const p=[[Nt,o],[wt,r]],g=[[Nt,null],[Cn,l],[wt,a]];for(let b=0;b<as.length;b++)Mt(n,as[b],Qr,St,p);for(let b=0;b<os.length;b++)Mt(n,os[b],Zr,Xr,g);Ft(Qr,{tld:!0,ascii:!0},t),Ft(Zr,{utld:!0,alpha:!0},t),Mt(n,"file",gs,St,p),Mt(n,"mailto",gs,St,p),Mt(n,"http",an,St,p),Mt(n,"https",an,St,p),Mt(n,"ftp",an,St,p),Mt(n,"ftps",an,St,p),Ft(gs,{scheme:!0,ascii:!0},t),Ft(an,{slashscheme:!0,ascii:!0},t),e=e.sort((b,h)=>b[0]>h[0]?1:-1);for(let b=0;b<e.length;b++){const h=e[b][0],y=e[b][1]?{[ux]:!0}:{[mx]:!0};h.indexOf("-")>=0?y[Yr]=!0:Nt.test(h)?wt.test(h)?y[Dn]=!0:y[Jr]=!0:y[Kr]=!0,Sa(n,h,h,y)}return Sa(n,"localhost",Fn,{ascii:!0}),n.jd=new He(Qs),{start:n,tokens:Object.assign({groups:t},cl)}}function dl(e,t){const n=xx(t.replace(/[A-Z]/g,l=>l.toLowerCase())),s=n.length,r=[];let a=0,o=0;for(;o<s;){let l=e,d=null,c=0,m=null,u=-1,f=-1;for(;o<s&&(d=l.go(n[o]));)l=d,l.accepts()?(u=0,f=0,m=l):u>=0&&(u+=n[o].length,f++),c+=n[o].length,a+=n[o].length,o++;a-=u,o-=f,c-=u,r.push({t:m.t,v:t.slice(a-c,a),s:a-c,e:a})}return r}function xx(e){const t=[],n=e.length;let s=0;for(;s<n;){let r=e.charCodeAt(s),a,o=r<55296||r>56319||s+1===n||(a=e.charCodeAt(s+1))<56320||a>57343?e[s]:e.slice(s,s+2);t.push(o),s+=o.length}return t}function Mt(e,t,n,s,r){let a;const o=t.length;for(let l=0;l<o-1;l++){const d=t[l];e.j[d]?a=e.j[d]:(a=new He(s),a.jr=r.slice(),e.j[d]=a),e=a}return a=new He(n),a.jr=r.slice(),e.j[t[o-1]]=a,a}function ka(e){const t=[],n=[];let s=0,r="0123456789";for(;s<e.length;){let a=0;for(;r.indexOf(e[s+a])>=0;)a++;if(a>0){t.push(n.join(""));for(let o=parseInt(e.substring(s,s+a),10);o>0;o--)n.pop();s+=a}else n.push(e[s]),s++}return t}const Wn={defaultProtocol:"http",events:null,format:Aa,formatHref:Aa,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Ii(e,t=null){let n=Object.assign({},Wn);e&&(n=Object.assign(n,e instanceof Ii?e.o:e));const s=n.ignoreTags,r=[];for(let a=0;a<s.length;a++)r.push(s[a].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=r}Ii.prototype={o:Wn,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const s=t!=null;let r=this.o[e];return r&&(typeof r=="object"?(r=n.t in r?r[n.t]:Wn[e],typeof r=="function"&&s&&(r=r(t,n))):typeof r=="function"&&s&&(r=r(t,n.t,n)),r)},getObj(e,t,n){let s=this.o[e];return typeof s=="function"&&t!=null&&(s=s(t,n.t,n)),s},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function Aa(e){return e}function ul(e,t){this.t="token",this.v=e,this.tk=t}ul.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),s=e.get("format",t,this);return n&&s.length>n?s.substring(0,n)+"":s},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=Wn.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),s=e.get("formatHref",n,this),r=e.get("tagName",n,t),a=this.toFormattedString(e),o={},l=e.get("className",n,t),d=e.get("target",n,t),c=e.get("rel",n,t),m=e.getObj("attributes",n,t),u=e.getObj("events",n,t);return o.href=s,l&&(o.class=l),d&&(o.target=d),c&&(o.rel=c),m&&Object.assign(o,m),{tagName:r,attributes:o,content:a,eventListeners:u}}};function mr(e,t){class n extends ul{constructor(r,a){super(r,a),this.t=e}}for(const s in t)n.prototype[s]=t[s];return n.t=e,n}const Ea=mr("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),Ra=mr("text"),yx=mr("nl"),ls=mr("url",{isLink:!0,toHref(e=Wn.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==Fn&&e[1].t===Lt}}),nt=e=>new He(e);function _x({groups:e}){const t=e.domain.concat([Ps,Hs,Dt,Fs,Ws,Us,Vs,Ks,st,Ai,$n,Js,Gs,Ys,gt,Qs,qn,Xs]),n=[Bs,Lt,Ri,ht,Mi,$n,On,Ti,Di,Rs,Ms,In,Ln,ks,Cs,As,Es,Ts,Ds,Is,Ls,$s,Os,qs,zs],s=[Ps,Bs,Hs,Fs,Ws,Us,Vs,Ks,st,In,Ln,$n,Js,Gs,Ys,On,gt,Qs,qn,Xs],r=nt(),a=q(r,qn);oe(a,s,a),oe(a,e.domain,a);const o=nt(),l=nt(),d=nt();oe(r,e.domain,o),oe(r,e.scheme,l),oe(r,e.slashscheme,d),oe(o,s,a),oe(o,e.domain,o);const c=q(o,Dt);q(a,Dt,c),q(l,Dt,c),q(d,Dt,c);const m=q(a,ht);oe(m,s,a),oe(m,e.domain,a);const u=nt();oe(c,e.domain,u),oe(u,e.domain,u);const f=q(u,ht);oe(f,e.domain,u);const p=nt(Ea);oe(f,e.tld,p),oe(f,e.utld,p),q(c,Fn,p);const g=q(u,st);q(g,st,g),oe(g,e.domain,u),oe(p,e.domain,u),q(p,ht,f),q(p,st,g);const b=q(p,Lt);oe(b,e.numeric,Ea);const h=q(o,st),x=q(o,ht);q(h,st,h),oe(h,e.domain,o),oe(x,s,a),oe(x,e.domain,o);const y=nt(ls);oe(x,e.tld,y),oe(x,e.utld,y),oe(y,e.domain,o),oe(y,s,a),q(y,ht,x),q(y,st,h),q(y,Dt,c);const j=q(y,Lt),N=nt(ls);oe(j,e.numeric,N);const _=nt(ls),S=nt();oe(_,t,_),oe(_,n,S),oe(S,t,_),oe(S,n,S),q(y,gt,_),q(N,gt,_);const v=q(l,Lt),w=q(d,Lt),k=q(w,gt),E=q(k,gt);oe(l,e.domain,o),q(l,ht,x),q(l,st,h),oe(d,e.domain,o),q(d,ht,x),q(d,st,h),oe(v,e.domain,_),q(v,gt,_),q(v,On,_),oe(E,e.domain,_),oe(E,t,_),q(E,gt,_);const R=[[In,Ln],[Cs,ks],[As,Es],[Rs,Ms],[Ts,Ds],[Is,Ls],[$s,Os],[qs,zs]];for(let T=0;T<R.length;T++){const[I,L]=R[T],M=q(_,I);q(S,I,M),q(M,L,_);const $=nt(ls);oe(M,t,$);const O=nt();oe(M,n),oe($,t,$),oe($,n,O),oe(O,t,$),oe(O,n,O),q($,L,_),q(O,L,_)}return q(r,Fn,y),q(r,Ei,yx),{start:r,tokens:cl}}function vx(e,t,n){let s=n.length,r=0,a=[],o=[];for(;r<s;){let l=e,d=null,c=null,m=0,u=null,f=-1;for(;r<s&&!(d=l.go(n[r].t));)o.push(n[r++]);for(;r<s&&(c=d||l.go(n[r].t));)d=null,l=c,l.accepts()?(f=0,u=l):f>=0&&f++,r++,m++;if(f<0)r-=m,r<s&&(o.push(n[r]),r++);else{o.length>0&&(a.push(Ar(Ra,t,o)),o=[]),r-=f,m-=f;const p=u.t,g=n.slice(r-m,r);a.push(Ar(p,t,g))}}return o.length>0&&a.push(Ar(Ra,t,o)),a}function Ar(e,t,n){const s=n[0].s,r=n[n.length-1].e,a=t.slice(s,r);return new e(a,n)}const jx=typeof console<"u"&&console&&console.warn||(()=>{}),Nx="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",ye={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function wx(){return He.groups={},ye.scanner=null,ye.parser=null,ye.tokenQueue=[],ye.pluginQueue=[],ye.customSchemes=[],ye.initialized=!1,ye}function Ma(e,t=!1){if(ye.initialized&&jx(`linkifyjs: already initialized - will not register custom scheme "${e}" ${Nx}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);ye.customSchemes.push([e,t])}function Sx(){ye.scanner=bx(ye.customSchemes);for(let e=0;e<ye.tokenQueue.length;e++)ye.tokenQueue[e][1]({scanner:ye.scanner});ye.parser=_x(ye.scanner.tokens);for(let e=0;e<ye.pluginQueue.length;e++)ye.pluginQueue[e][1]({scanner:ye.scanner,parser:ye.parser});return ye.initialized=!0,ye}function Li(e){return ye.initialized||Sx(),vx(ye.parser.start,e,dl(ye.scanner.start,e))}Li.scan=dl;function ml(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const s=new Ii(n),r=Li(e),a=[];for(let o=0;o<r.length;o++){const l=r[o];l.isLink&&(!t||l.t===t)&&s.check(l)&&a.push(l.toFormattedObject(s))}return a}var $i="[\0- -\u2029]",Cx=new RegExp($i),kx=new RegExp(`${$i}$`),Ax=new RegExp($i,"g");function Ex(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function Rx(e){return new Ue({key:new Ve("autolink"),appendTransaction:(t,n,s)=>{const r=t.some(c=>c.docChanged)&&!n.doc.eq(s.doc),a=t.some(c=>c.getMeta("preventAutolink"));if(!r||a)return;const{tr:o}=s,l=Td(n.doc,[...t]);if(Dd(l).forEach(({newRange:c})=>{const m=Id(s.doc,c,p=>p.isTextblock);let u,f;if(m.length>1)u=m[0],f=s.doc.textBetween(u.pos,u.pos+u.node.nodeSize,void 0," ");else if(m.length){const p=s.doc.textBetween(c.from,c.to," "," ");if(!kx.test(p))return;u=m[0],f=s.doc.textBetween(u.pos,c.to,void 0," ")}if(u&&f){const p=f.split(Cx).filter(Boolean);if(p.length<=0)return!1;const g=p[p.length-1],b=u.pos+f.lastIndexOf(g);if(!g)return!1;const h=Li(g).map(x=>x.toObject(e.defaultProtocol));if(!Ex(h))return!1;h.filter(x=>x.isLink).map(x=>({...x,from:b+x.start+1,to:b+x.end+1})).filter(x=>s.schema.marks.code?!s.doc.rangeHasMark(x.from,x.to,s.schema.marks.code):!0).filter(x=>e.validate(x.value)).filter(x=>e.shouldAutoLink(x.value)).forEach(x=>{Ld(x.from,x.to,s.doc).some(y=>y.mark.type===e.type)||o.addMark(x.from,x.to,e.type.create({href:x.href}))})}}),!!o.steps.length)return o}})}function Mx(e){return new Ue({key:new Ve("handleClickLink"),props:{handleClick:(t,n,s)=>{var r,a;if(s.button!==0||!t.editable)return!1;let o=null;if(s.target instanceof HTMLAnchorElement)o=s.target;else{let m=s.target;const u=[];for(;m.nodeName!=="DIV";)u.push(m),m=m.parentNode;o=u.find(f=>f.nodeName==="A")}if(!o)return!1;const l=$d(t.state,e.type.name),d=(r=o?.href)!=null?r:l.href,c=(a=o?.target)!=null?a:l.target;return e.enableClickSelection&&e.editor.commands.extendMarkRange(e.type.name),o&&d?(window.open(d,c),!0):!1}}})}function Tx(e){return new Ue({key:new Ve("handlePasteLink"),props:{handlePaste:(t,n,s)=>{const{state:r}=t,{selection:a}=r,{empty:o}=a;if(o)return!1;let l="";s.content.forEach(c=>{l+=c.textContent});const d=ml(l,{defaultProtocol:e.defaultProtocol}).find(c=>c.isLink&&c.value===l);return!l||!d?!1:e.editor.commands.setMark(e.type,{href:d.href})}}})}function Ht(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(s=>{const r=typeof s=="string"?s:s.scheme;r&&n.push(r)}),!e||e.replace(Ax,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var fl=Zt.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){Ma(e);return}Ma(e.scheme,e.optionalSlashes)})},onDestroy(){wx()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!Ht(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!Ht(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!Ht(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",_e(this.options.HTMLAttributes,e),0]:["a",_e(this.options.HTMLAttributes,{...e,href:""}),0]},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:s=>!!Ht(s,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:s=>!!Ht(s,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Ot({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:s}=this.options,r=ml(e).filter(a=>a.isLink&&this.options.isAllowedUri(a.value,{defaultValidate:o=>!!Ht(o,n),protocols:n,defaultProtocol:s}));r.length&&r.forEach(a=>t.push({text:a.value,data:{href:a.href},index:a.start}))}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(Rx({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:s=>this.options.isAllowedUri(s,{defaultValidate:r=>!!Ht(r,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&e.push(Mx({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(Tx({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),e}}),Dx=fl,Ix=Object.defineProperty,Lx=(e,t)=>{for(var n in t)Ix(e,n,{get:t[n],enumerable:!0})},$x="listItem",Ta="textStyle",Da=/^\s*([-+*])\s$/,pl=Ie.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",_e(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes($x,this.editor.getAttributes(Ta)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=mn({find:Da,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=mn({find:Da,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(Ta),editor:this.editor})),[e]}}),hl=Ie.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",_e(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),Ox={};Lx(Ox,{findListItemPos:()=>es,getNextListDepth:()=>Oi,handleBackspace:()=>ti,handleDelete:()=>ni,hasListBefore:()=>gl,hasListItemAfter:()=>qx,hasListItemBefore:()=>bl,listItemHasSubList:()=>xl,nextListIsDeeper:()=>yl,nextListIsHigher:()=>_l});var es=(e,t)=>{const{$from:n}=t.selection,s=wo(e,t.schema);let r=null,a=n.depth,o=n.pos,l=null;for(;a>0&&l===null;)r=n.node(a),r.type===s?l=a:(a-=1,o-=1);return l===null?null:{$pos:t.doc.resolve(o),depth:l}},Oi=(e,t)=>{const n=es(e,t);if(!n)return!1;const[,s]=zd(t,e,n.$pos.pos+4);return s},gl=(e,t,n)=>{const{$anchor:s}=e.selection,r=Math.max(0,s.pos-2),a=e.doc.resolve(r).node();return!(!a||!n.includes(a.type.name))},bl=(e,t)=>{var n;const{$anchor:s}=t.selection,r=t.doc.resolve(s.pos-2);return!(r.index()===0||((n=r.nodeBefore)==null?void 0:n.type.name)!==e)},xl=(e,t,n)=>{if(!n)return!1;const s=wo(e,t.schema);let r=!1;return n.descendants(a=>{a.type===s&&(r=!0)}),r},ti=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!qr(e.state,t)&&gl(e.state,t,n)){const{$anchor:l}=e.state.selection,d=e.state.doc.resolve(l.before()-1),c=[];d.node().descendants((f,p)=>{f.type.name===t&&c.push({node:f,pos:p})});const m=c.at(-1);if(!m)return!1;const u=e.state.doc.resolve(d.start()+m.pos+1);return e.chain().cut({from:l.start()-1,to:l.end()+1},u.end()).joinForward().run()}if(!qr(e.state,t)||!Od(e.state))return!1;const s=es(t,e.state);if(!s)return!1;const a=e.state.doc.resolve(s.$pos.pos-2).node(s.depth),o=xl(t,e.state,a);return bl(t,e.state)&&!o?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},yl=(e,t)=>{const n=Oi(e,t),s=es(e,t);return!s||!n?!1:n>s.depth},_l=(e,t)=>{const n=Oi(e,t),s=es(e,t);return!s||!n?!1:n<s.depth},ni=(e,t)=>{if(!qr(e.state,t)||!qd(e.state,t))return!1;const{selection:n}=e.state,{$from:s,$to:r}=n;return!n.empty&&s.sameParent(r)?!1:yl(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():_l(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},qx=(e,t)=>{var n;const{$anchor:s}=t.selection,r=t.doc.resolve(s.pos-s.parentOffset-2);return!(r.index()===r.parent.childCount-1||((n=r.nodeAfter)==null?void 0:n.type.name)!==e)},vl=Ke.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&ni(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&ni(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:s})=>{e.state.schema.nodes[n]!==void 0&&ti(e,n,s)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:s})=>{e.state.schema.nodes[n]!==void 0&&ti(e,n,s)&&(t=!0)}),t}}}}),zx="listItem",Ia="textStyle",La=/^(\d+)\.\s$/,jl=Ie.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",_e(this.options.HTMLAttributes,n),0]:["ol",_e(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(zx,this.editor.getAttributes(Ia)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=mn({find:La,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=mn({find:La,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(Ia)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),Px=/^\s*(\[([( |x])?\])\s$/,Bx=Ie.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",_e(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:s})=>{const r=document.createElement("li"),a=document.createElement("label"),o=document.createElement("span"),l=document.createElement("input"),d=document.createElement("div"),c=m=>{var u,f;l.ariaLabel=((f=(u=this.options.a11y)==null?void 0:u.checkboxLabel)==null?void 0:f.call(u,m,l.checked))||`Task item checkbox for ${m.textContent||"empty task item"}`};return c(e),a.contentEditable="false",l.type="checkbox",l.addEventListener("mousedown",m=>m.preventDefault()),l.addEventListener("change",m=>{if(!s.isEditable&&!this.options.onReadOnlyChecked){l.checked=!l.checked;return}const{checked:u}=m.target;s.isEditable&&typeof n=="function"&&s.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:f})=>{const p=n();if(typeof p!="number")return!1;const g=f.doc.nodeAt(p);return f.setNodeMarkup(p,void 0,{...g?.attrs,checked:u}),!0}).run(),!s.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,u)||(l.checked=!l.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([m,u])=>{r.setAttribute(m,u)}),r.dataset.checked=e.attrs.checked,l.checked=e.attrs.checked,a.append(l,o),r.append(a,d),Object.entries(t).forEach(([m,u])=>{r.setAttribute(m,u)}),{dom:r,contentDOM:d,update:m=>m.type!==this.type?!1:(r.dataset.checked=m.attrs.checked,l.checked=m.attrs.checked,c(m),!0)}}},addInputRules(){return[mn({find:Px,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),Hx=Ie.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",_e(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Ke.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(pl.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(hl.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(vl.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(jl.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(Bx.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(Hx.configure(this.options.taskList)),e}});var Fx=Ie.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",_e(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),Wx=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Ux=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Vx=Zt.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",_e(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Jt({find:Wx,type:this.type})]},addPasteRules(){return[Ot({find:Ux,type:this.type})]}}),Kx=Ie.create({name:"text",group:"inline"}),Nl=Zt.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",_e(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),Jx=Nl;function Gx(e={}){return new Ue({view(t){return new Yx(t,e)}})}class Yx{constructor(t,n){var s;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(s=n.width)!==null&&s!==void 0?s:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(r=>{let a=o=>{this[r](o)};return t.dom.addEventListener(r,a),{name:r,handler:a}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,s,r=this.editorView.dom,a=r.getBoundingClientRect(),o=a.width/r.offsetWidth,l=a.height/r.offsetHeight;if(n){let u=t.nodeBefore,f=t.nodeAfter;if(u||f){let p=this.editorView.nodeDOM(this.cursorPos-(u?u.nodeSize:0));if(p){let g=p.getBoundingClientRect(),b=u?g.bottom:g.top;u&&f&&(b=(b+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let h=this.width/2*l;s={left:g.left,right:g.right,top:b-h,bottom:b+h}}}}if(!s){let u=this.editorView.coordsAtPos(this.cursorPos),f=this.width/2*o;s={left:u.left-f,right:u.left+f,top:u.top,bottom:u.bottom}}let d=this.editorView.dom.offsetParent;this.element||(this.element=d.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let c,m;if(!d||d==document.body&&getComputedStyle(d).position=="static")c=-pageXOffset,m=-pageYOffset;else{let u=d.getBoundingClientRect(),f=u.width/d.offsetWidth,p=u.height/d.offsetHeight;c=u.left-d.scrollLeft*f,m=u.top-d.scrollTop*p}this.element.style.left=(s.left-c)/o+"px",this.element.style.top=(s.top-m)/l+"px",this.element.style.width=(s.right-s.left)/o+"px",this.element.style.height=(s.bottom-s.top)/l+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),s=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),r=s&&s.type.spec.disableDropCursor,a=typeof r=="function"?r(this.editorView,n,t):r;if(n&&!a){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=Pd(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class we extends Fe{constructor(t){super(t,t)}map(t,n){let s=t.resolve(n.map(this.head));return we.valid(s)?new we(s):Fe.near(s)}content(){return xt.empty}eq(t){return t instanceof we&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new we(t.resolve(n.pos))}getBookmark(){return new qi(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!Xx(t)||!Qx(t))return!1;let s=n.type.spec.allowGapCursor;if(s!=null)return s;let r=n.contentMatchAt(t.index()).defaultType;return r&&r.isTextblock}static findGapCursorFrom(t,n,s=!1){e:for(;;){if(!s&&we.valid(t))return t;let r=t.pos,a=null;for(let o=t.depth;;o--){let l=t.node(o);if(n>0?t.indexAfter(o)<l.childCount:t.index(o)>0){a=l.child(n>0?t.indexAfter(o):t.index(o)-1);break}else if(o==0)return null;r+=n;let d=t.doc.resolve(r);if(we.valid(d))return d}for(;;){let o=n>0?a.firstChild:a.lastChild;if(!o){if(a.isAtom&&!a.isText&&!or.isSelectable(a)){t=t.doc.resolve(r+a.nodeSize*n),s=!1;continue e}break}a=o,r+=n;let l=t.doc.resolve(r);if(we.valid(l))return l}return null}}}we.prototype.visible=!1;we.findFrom=we.findGapCursorFrom;Fe.jsonID("gapcursor",we);class qi{constructor(t){this.pos=t}map(t){return new qi(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return we.valid(n)?new we(n):Fe.near(n)}}function Xx(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),s=e.node(t);if(n==0){if(s.type.spec.isolating)return!0;continue}for(let r=s.child(n-1);;r=r.lastChild){if(r.childCount==0&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}function Qx(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),s=e.node(t);if(n==s.childCount){if(s.type.spec.isolating)return!0;continue}for(let r=s.child(n);;r=r.firstChild){if(r.childCount==0&&!r.inlineContent||r.isAtom||r.type.spec.isolating)return!0;if(r.inlineContent)return!1}}return!0}function Zx(){return new Ue({props:{decorations:s1,createSelectionBetween(e,t,n){return t.pos==n.pos&&we.valid(n)?new we(n):null},handleClick:t1,handleKeyDown:e1,handleDOMEvents:{beforeinput:n1}}})}const e1=So({ArrowLeft:cs("horiz",-1),ArrowRight:cs("horiz",1),ArrowUp:cs("vert",-1),ArrowDown:cs("vert",1)});function cs(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(s,r,a){let o=s.selection,l=t>0?o.$to:o.$from,d=o.empty;if(o instanceof Pe){if(!a.endOfTextblock(n)||l.depth==0)return!1;d=!1,l=s.doc.resolve(t>0?l.after():l.before())}let c=we.findGapCursorFrom(l,t,d);return c?(r&&r(s.tr.setSelection(new we(c))),!0):!1}}function t1(e,t,n){if(!e||!e.editable)return!1;let s=e.state.doc.resolve(t);if(!we.valid(s))return!1;let r=e.posAtCoords({left:n.clientX,top:n.clientY});return r&&r.inside>-1&&or.isSelectable(e.state.doc.nodeAt(r.inside))?!1:(e.dispatch(e.state.tr.setSelection(new we(s))),!0)}function n1(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof we))return!1;let{$from:n}=e.state.selection,s=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!s)return!1;let r=ot.empty;for(let o=s.length-1;o>=0;o--)r=ot.from(s[o].createAndFill(null,r));let a=e.state.tr.replace(n.pos,n.pos,new xt(r,0,0));return a.setSelection(Pe.near(a.doc.resolve(n.pos+1))),e.dispatch(a),!1}function s1(e){if(!(e.selection instanceof we))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",qt.create(e.doc,[Gt.widget(e.selection.head,t,{key:"gapcursor"})])}var Zs=200,De=function(){};De.prototype.append=function(t){return t.length?(t=De.from(t),!this.length&&t||t.length<Zs&&this.leafAppend(t)||this.length<Zs&&t.leafPrepend(this)||this.appendInner(t)):this};De.prototype.prepend=function(t){return t.length?De.from(t).append(this):this};De.prototype.appendInner=function(t){return new r1(this,t)};De.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?De.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};De.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};De.prototype.forEach=function(t,n,s){n===void 0&&(n=0),s===void 0&&(s=this.length),n<=s?this.forEachInner(t,n,s,0):this.forEachInvertedInner(t,n,s,0)};De.prototype.map=function(t,n,s){n===void 0&&(n=0),s===void 0&&(s=this.length);var r=[];return this.forEach(function(a,o){return r.push(t(a,o))},n,s),r};De.from=function(t){return t instanceof De?t:t&&t.length?new wl(t):De.empty};var wl=(function(e){function t(s){e.call(this),this.values=s}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(r,a){return r==0&&a==this.length?this:new t(this.values.slice(r,a))},t.prototype.getInner=function(r){return this.values[r]},t.prototype.forEachInner=function(r,a,o,l){for(var d=a;d<o;d++)if(r(this.values[d],l+d)===!1)return!1},t.prototype.forEachInvertedInner=function(r,a,o,l){for(var d=a-1;d>=o;d--)if(r(this.values[d],l+d)===!1)return!1},t.prototype.leafAppend=function(r){if(this.length+r.length<=Zs)return new t(this.values.concat(r.flatten()))},t.prototype.leafPrepend=function(r){if(this.length+r.length<=Zs)return new t(r.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t})(De);De.empty=new wl([]);var r1=(function(e){function t(n,s){e.call(this),this.left=n,this.right=s,this.length=n.length+s.length,this.depth=Math.max(n.depth,s.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(s){return s<this.left.length?this.left.get(s):this.right.get(s-this.left.length)},t.prototype.forEachInner=function(s,r,a,o){var l=this.left.length;if(r<l&&this.left.forEachInner(s,r,Math.min(a,l),o)===!1||a>l&&this.right.forEachInner(s,Math.max(r-l,0),Math.min(this.length,a)-l,o+l)===!1)return!1},t.prototype.forEachInvertedInner=function(s,r,a,o){var l=this.left.length;if(r>l&&this.right.forEachInvertedInner(s,r-l,Math.max(a,l)-l,o+l)===!1||a<l&&this.left.forEachInvertedInner(s,Math.min(r,l),a,o)===!1)return!1},t.prototype.sliceInner=function(s,r){if(s==0&&r==this.length)return this;var a=this.left.length;return r<=a?this.left.slice(s,r):s>=a?this.right.slice(s-a,r-a):this.left.slice(s,a).append(this.right.slice(0,r-a))},t.prototype.leafAppend=function(s){var r=this.right.leafAppend(s);if(r)return new t(this.left,r)},t.prototype.leafPrepend=function(s){var r=this.left.leafPrepend(s);if(r)return new t(r,this.right)},t.prototype.appendInner=function(s){return this.left.depth>=Math.max(this.right.depth,s.depth)+1?new t(this.left,new t(this.right,s)):new t(this,s)},t})(De);const i1=500;class lt{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let s=this.items.length;for(;;s--)if(this.items.get(s-1).selection){--s;break}let r,a;n&&(r=this.remapping(s,this.items.length),a=r.maps.length);let o=t.tr,l,d,c=[],m=[];return this.items.forEach((u,f)=>{if(!u.step){r||(r=this.remapping(s,f+1),a=r.maps.length),a--,m.push(u);return}if(r){m.push(new bt(u.map));let p=u.step.map(r.slice(a)),g;p&&o.maybeStep(p).doc&&(g=o.mapping.maps[o.mapping.maps.length-1],c.push(new bt(g,void 0,void 0,c.length+m.length))),a--,g&&r.appendMap(g,a)}else o.maybeStep(u.step);if(u.selection)return l=r?u.selection.map(r.slice(a)):u.selection,d=new lt(this.items.slice(0,s).append(m.reverse().concat(c)),this.eventCount-1),!1},this.items.length,0),{remaining:d,transform:o,selection:l}}addTransform(t,n,s,r){let a=[],o=this.eventCount,l=this.items,d=!r&&l.length?l.get(l.length-1):null;for(let m=0;m<t.steps.length;m++){let u=t.steps[m].invert(t.docs[m]),f=new bt(t.mapping.maps[m],u,n),p;(p=d&&d.merge(f))&&(f=p,m?a.pop():l=l.slice(0,l.length-1)),a.push(f),n&&(o++,n=void 0),r||(d=f)}let c=o-s.depth;return c>o1&&(l=a1(l,c),o-=c),new lt(l.append(a),o)}remapping(t,n){let s=new Bd;return this.items.forEach((r,a)=>{let o=r.mirrorOffset!=null&&a-r.mirrorOffset>=t?s.maps.length-r.mirrorOffset:void 0;s.appendMap(r.map,o)},t,n),s}addMaps(t){return this.eventCount==0?this:new lt(this.items.append(t.map(n=>new bt(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let s=[],r=Math.max(0,this.items.length-n),a=t.mapping,o=t.steps.length,l=this.eventCount;this.items.forEach(f=>{f.selection&&l--},r);let d=n;this.items.forEach(f=>{let p=a.getMirror(--d);if(p==null)return;o=Math.min(o,p);let g=a.maps[p];if(f.step){let b=t.steps[p].invert(t.docs[p]),h=f.selection&&f.selection.map(a.slice(d+1,p));h&&l++,s.push(new bt(g,b,h))}else s.push(new bt(g))},r);let c=[];for(let f=n;f<o;f++)c.push(new bt(a.maps[f]));let m=this.items.slice(0,r).append(c).append(s),u=new lt(m,l);return u.emptyItemCount()>i1&&(u=u.compress(this.items.length-s.length)),u}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),s=n.maps.length,r=[],a=0;return this.items.forEach((o,l)=>{if(l>=t)r.push(o),o.selection&&a++;else if(o.step){let d=o.step.map(n.slice(s)),c=d&&d.getMap();if(s--,c&&n.appendMap(c,s),d){let m=o.selection&&o.selection.map(n.slice(s));m&&a++;let u=new bt(c.invert(),d,m),f,p=r.length-1;(f=r.length&&r[p].merge(u))?r[p]=f:r.push(u)}}else o.map&&s--},this.items.length,0),new lt(De.from(r.reverse()),a)}}lt.empty=new lt(De.empty,0);function a1(e,t){let n;return e.forEach((s,r)=>{if(s.selection&&t--==0)return n=r,!1}),e.slice(n)}class bt{constructor(t,n,s,r){this.map=t,this.step=n,this.selection=s,this.mirrorOffset=r}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new bt(n.getMap().invert(),n,this.selection)}}}class It{constructor(t,n,s,r,a){this.done=t,this.undone=n,this.prevRanges=s,this.prevTime=r,this.prevComposition=a}}const o1=20;function l1(e,t,n,s){let r=n.getMeta(Ut),a;if(r)return r.historyState;n.getMeta(u1)&&(e=new It(e.done,e.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(o&&o.getMeta(Ut))return o.getMeta(Ut).redo?new It(e.done.addTransform(n,void 0,s,bs(t)),e.undone,$a(n.mapping.maps),e.prevTime,e.prevComposition):new It(e.done,e.undone.addTransform(n,void 0,s,bs(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),d=e.prevTime==0||!o&&e.prevComposition!=l&&(e.prevTime<(n.time||0)-s.newGroupDelay||!c1(n,e.prevRanges)),c=o?Er(e.prevRanges,n.mapping):$a(n.mapping.maps);return new It(e.done.addTransform(n,d?t.selection.getBookmark():void 0,s,bs(t)),lt.empty,c,n.time,l??e.prevComposition)}else return(a=n.getMeta("rebased"))?new It(e.done.rebased(n,a),e.undone.rebased(n,a),Er(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new It(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),Er(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function c1(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((s,r)=>{for(let a=0;a<t.length;a+=2)s<=t[a+1]&&r>=t[a]&&(n=!0)}),n}function $a(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((s,r,a,o)=>t.push(a,o));return t}function Er(e,t){if(!e)return null;let n=[];for(let s=0;s<e.length;s+=2){let r=t.map(e[s],1),a=t.map(e[s+1],-1);r<=a&&n.push(r,a)}return n}function d1(e,t,n){let s=bs(t),r=Ut.get(t).spec.config,a=(n?e.undone:e.done).popEvent(t,s);if(!a)return null;let o=a.selection.resolve(a.transform.doc),l=(n?e.done:e.undone).addTransform(a.transform,t.selection.getBookmark(),r,s),d=new It(n?l:a.remaining,n?a.remaining:l,null,0,-1);return a.transform.setSelection(o).setMeta(Ut,{redo:n,historyState:d})}let Rr=!1,Oa=null;function bs(e){let t=e.plugins;if(Oa!=t){Rr=!1,Oa=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){Rr=!0;break}}return Rr}const Ut=new Ve("history"),u1=new Ve("closeHistory");function m1(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new Ue({key:Ut,state:{init(){return new It(lt.empty,lt.empty,null,0,-1)},apply(t,n,s){return l1(n,s,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let s=n.inputType,r=s=="historyUndo"?Cl:s=="historyRedo"?kl:null;return r?(n.preventDefault(),r(t.state,t.dispatch)):!1}}}})}function Sl(e,t){return(n,s)=>{let r=Ut.getState(n);if(!r||(e?r.undone:r.done).eventCount==0)return!1;if(s){let a=d1(r,n,e);a&&s(t?a.scrollIntoView():a)}return!0}}const Cl=Sl(!1,!0),kl=Sl(!0,!0);Ke.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=e?.node||this.editor.state.doc;if((e?.mode||this.options.mode)==="textSize"){const s=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(s)}return t.nodeSize},this.storage.words=e=>{const t=e?.node||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new Ue({key:new Ve("characterCount"),appendTransaction:(t,n,s)=>{if(e)return;const r=this.options.limit;if(r==null||r===0){e=!0;return}const a=this.storage.characters({node:s.doc});if(a>r){const o=a-r,l=0,d=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${r} characters. Content was automatically trimmed.`);const c=s.tr.deleteRange(l,d);return e=!0,c}e=!0},filterTransaction:(t,n)=>{const s=this.options.limit;if(!t.docChanged||s===0||s===null||s===void 0)return!0;const r=this.storage.characters({node:n.doc}),a=this.storage.characters({node:t.doc});if(a<=s||r>s&&a>s&&a<=r)return!0;if(r>s&&a>s&&a>r||!t.getMeta("paste"))return!1;const l=t.selection.$head.pos,d=a-s,c=l-d,m=l;return t.deleteRange(c,m),!(this.storage.characters({node:t.doc})>s)}})]}});var f1=Ke.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Gx(this.options)]}});Ke.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Ue({key:new Ve("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:s}=this.editor,{anchor:r}=t,a=[];if(!n||!s)return qt.create(e,[]);let o=0;this.options.mode==="deepest"&&e.descendants((d,c)=>{if(d.isText)return;if(!(r>=c&&r<=c+d.nodeSize-1))return!1;o+=1});let l=0;return e.descendants((d,c)=>{if(d.isText||!(r>=c&&r<=c+d.nodeSize-1))return!1;if(l+=1,this.options.mode==="deepest"&&o-l>0||this.options.mode==="shallowest"&&l>1)return this.options.mode==="deepest";a.push(Gt.node(c,c+d.nodeSize,{class:this.options.className}))}),qt.create(e,a)}}})]}});var p1=Ke.create({name:"gapCursor",addProseMirrorPlugins(){return[Zx()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=Co(ko(e,"allowGapCursor",n)))!=null?t:null}}});Ke.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Ue({key:new Ve("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:s}=t,r=[];if(!n)return null;const a=this.editor.isEmpty;return e.descendants((o,l)=>{const d=s>=l&&s<=l+o.nodeSize,c=!o.isLeaf&&Hd(o);if((d||!this.options.showOnlyCurrent)&&c){const m=[this.options.emptyNodeClass];a&&m.push(this.options.emptyEditorClass);const u=Gt.node(l,l+o.nodeSize,{class:m.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:l,hasAnchor:d}):this.options.placeholder});r.push(u)}return this.options.includeChildren}),qt.create(e,r)}}})]}});Ke.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new Ue({key:new Ve("selection"),props:{decorations(n){return n.selection.empty||e.isFocused||!e.isEditable||No(n.selection)||e.view.dragging?null:qt.create(n.doc,[Gt.inline(n.selection.from,n.selection.to,{class:t.className})])}}})]}});function qa({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||t?.type===e}var h1=Ke.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const e=new Ve(this.name),t=Object.entries(this.editor.schema.nodes).map(([,n])=>n).filter(n=>(this.options.notAfter||[]).concat(this.options.node).includes(n.name));return[new Ue({key:e,appendTransaction:(n,s,r)=>{const{doc:a,tr:o,schema:l}=r,d=e.getState(r),c=a.content.size,m=l.nodes[this.options.node];if(d)return o.insert(c,m.create())},state:{init:(n,s)=>{const r=s.tr.doc.lastChild;return!qa({node:r,types:t})},apply:(n,s)=>{if(!n.docChanged)return s;const r=n.doc.lastChild;return!qa({node:r,types:t})}}})]}}),g1=Ke.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>Cl(e,t),redo:()=>({state:e,dispatch:t})=>kl(e,t)}},addProseMirrorPlugins(){return[m1(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),b1=Ke.create({name:"starterKit",addExtensions(){var e,t,n,s;const r=[];return this.options.bold!==!1&&r.push(Kb.configure(this.options.bold)),this.options.blockquote!==!1&&r.push(Hb.configure(this.options.blockquote)),this.options.bulletList!==!1&&r.push(pl.configure(this.options.bulletList)),this.options.code!==!1&&r.push(Yb.configure(this.options.code)),this.options.codeBlock!==!1&&r.push(Zb.configure(this.options.codeBlock)),this.options.document!==!1&&r.push(ex.configure(this.options.document)),this.options.dropcursor!==!1&&r.push(f1.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&r.push(p1.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&r.push(tx.configure(this.options.hardBreak)),this.options.heading!==!1&&r.push(nx.configure(this.options.heading)),this.options.undoRedo!==!1&&r.push(g1.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&r.push(sx.configure(this.options.horizontalRule)),this.options.italic!==!1&&r.push(lx.configure(this.options.italic)),this.options.listItem!==!1&&r.push(hl.configure(this.options.listItem)),this.options.listKeymap!==!1&&r.push(vl.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&r.push(fl.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&r.push(jl.configure(this.options.orderedList)),this.options.paragraph!==!1&&r.push(Fx.configure(this.options.paragraph)),this.options.strike!==!1&&r.push(Vx.configure(this.options.strike)),this.options.text!==!1&&r.push(Kx.configure(this.options.text)),this.options.underline!==!1&&r.push(Nl.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&r.push(h1.configure((s=this.options)==null?void 0:s.trailingNode)),r}}),x1=b1,Mr,za;function y1(){return za||(za=1,Mr=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var s,r,a;if(Array.isArray(t)){if(s=t.length,s!=n.length)return!1;for(r=s;r--!==0;)if(!e(t[r],n[r]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(r of t.entries())if(!n.has(r[0]))return!1;for(r of t.entries())if(!e(r[1],n.get(r[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(r of t.entries())if(!n.has(r[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if(s=t.length,s!=n.length)return!1;for(r=s;r--!==0;)if(t[r]!==n[r])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(a=Object.keys(t),s=a.length,s!==Object.keys(n).length)return!1;for(r=s;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[r]))return!1;for(r=s;r--!==0;){var o=a[r];if(!(o==="_owner"&&t.$$typeof)&&!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),Mr}var _1=y1();const v1=Fd(_1);var Tr={exports:{}},Dr={};var Pa;function j1(){if(Pa)return Dr;Pa=1;var e=Wd(),t=Ud();function n(c,m){return c===m&&(c!==0||1/c===1/m)||c!==c&&m!==m}var s=typeof Object.is=="function"?Object.is:n,r=t.useSyncExternalStore,a=e.useRef,o=e.useEffect,l=e.useMemo,d=e.useDebugValue;return Dr.useSyncExternalStoreWithSelector=function(c,m,u,f,p){var g=a(null);if(g.current===null){var b={hasValue:!1,value:null};g.current=b}else b=g.current;g=l(function(){function x(S){if(!y){if(y=!0,j=S,S=f(S),p!==void 0&&b.hasValue){var v=b.value;if(p(v,S))return N=v}return N=S}if(v=N,s(j,S))return v;var w=f(S);return p!==void 0&&p(v,w)?(j=S,v):(j=S,N=w)}var y=!1,j,N,_=u===void 0?null:u;return[function(){return x(m())},_===null?void 0:function(){return x(_())}]},[m,u,f,p]);var h=r(c,g[0],g[1]);return o(function(){b.hasValue=!0,b.value=h},[h]),d(h),h},Dr}var Ba;function N1(){return Ba||(Ba=1,Tr.exports=j1()),Tr.exports}var w1=N1(),S1=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},C1=({contentComponent:e})=>{const t=Ao.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return i.jsx(i.Fragment,{children:Object.values(t)})};function k1(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,s){t={...t,[n]:Kd.createPortal(s.reactElement,s.element,n)},e.forEach(r=>r())},removeRenderer(n){const s={...t};delete s[n],t=s,e.forEach(r=>r())}}}var A1=class extends Ce.Component{constructor(e){var t;super(e),this.editorContentRef=Ce.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(...e.options.element.childNodes),e.setOptions({element:t}),e.contentComponent=k1(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(!t||(this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null,!((e=t.options.element)!=null&&e.firstChild)))return;const n=document.createElement("div");n.append(...t.options.element.childNodes),t.setOptions({element:n})}render(){const{editor:e,innerRef:t,...n}=this.props;return i.jsxs(i.Fragment,{children:[i.jsx("div",{ref:S1(t,this.editorContentRef),...n}),e?.contentComponent&&i.jsx(C1,{contentComponent:e.contentComponent})]})}},E1=C.forwardRef((e,t)=>{const n=Ce.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return Ce.createElement(A1,{key:n,innerRef:t,...e})}),R1=Ce.memo(E1),M1=typeof window<"u"?C.useLayoutEffect:C.useEffect,T1=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(s=>s())},n=this.editor;return n.on("transaction",t),()=>{n.off("transaction",t)}}}};function D1(e){var t;const[n]=C.useState(()=>new T1(e.editor)),s=w1.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:v1);return M1(()=>n.watch(e.editor),[e.editor,n]),C.useDebugValue(s),s}var I1=!1,si=typeof window>"u",L1=si||!!(typeof window<"u"&&window.next),$1=class Al{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?si||L1?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...s)=>{var r,a;return(a=(r=this.options.current).onBeforeCreate)==null?void 0:a.call(r,...s)},onBlur:(...s)=>{var r,a;return(a=(r=this.options.current).onBlur)==null?void 0:a.call(r,...s)},onCreate:(...s)=>{var r,a;return(a=(r=this.options.current).onCreate)==null?void 0:a.call(r,...s)},onDestroy:(...s)=>{var r,a;return(a=(r=this.options.current).onDestroy)==null?void 0:a.call(r,...s)},onFocus:(...s)=>{var r,a;return(a=(r=this.options.current).onFocus)==null?void 0:a.call(r,...s)},onSelectionUpdate:(...s)=>{var r,a;return(a=(r=this.options.current).onSelectionUpdate)==null?void 0:a.call(r,...s)},onTransaction:(...s)=>{var r,a;return(a=(r=this.options.current).onTransaction)==null?void 0:a.call(r,...s)},onUpdate:(...s)=>{var r,a;return(a=(r=this.options.current).onUpdate)==null?void 0:a.call(r,...s)},onContentError:(...s)=>{var r,a;return(a=(r=this.options.current).onContentError)==null?void 0:a.call(r,...s)},onDrop:(...s)=>{var r,a;return(a=(r=this.options.current).onDrop)==null?void 0:a.call(r,...s)},onPaste:(...s)=>{var r,a;return(a=(r=this.options.current).onPaste)==null?void 0:a.call(r,...s)},onDelete:(...s)=>{var r,a;return(a=(r=this.options.current).onDelete)==null?void 0:a.call(r,...s)}};return new Vd(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,n){return Object.keys(t).every(s=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(s)?!0:s==="extensions"&&t.extensions&&n.extensions?t.extensions.length!==n.extensions.length?!1:t.extensions.every((r,a)=>{var o;return r===((o=n.extensions)==null?void 0:o[a])}):t[s]===n[s])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?Al.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((s,r)=>s===t[r]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function O1(e={},t=[]){const n=C.useRef(e);n.current=e;const[s]=C.useState(()=>new $1(n)),r=Ao.useSyncExternalStore(s.subscribe,s.getEditor,s.getServerSnapshot);return C.useDebugValue(r),C.useEffect(s.onRender(t)),D1({editor:r,selector:({transactionNumber:a})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&a===0?0:a+1}),r}var q1=C.createContext({editor:null});q1.Consumer;var z1=C.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),P1=()=>C.useContext(z1);Ce.forwardRef((e,t)=>{const{onDragStart:n}=P1(),s=e.as||"div";return i.jsx(s,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});Ce.createContext({markViewContentRef:()=>{}});var B1=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))$/,H1=/(?:^|\s)(==(?!\s+==)((?:[^=]+))==(?!\s+==))/g,F1=Zt.create({name:"highlight",addOptions(){return{multicolor:!1,HTMLAttributes:{}}},addAttributes(){return this.options.multicolor?{color:{default:null,parseHTML:e=>e.getAttribute("data-color")||e.style.backgroundColor,renderHTML:e=>e.color?{"data-color":e.color,style:`background-color: ${e.color}; color: inherit`}:{}}}:{}},parseHTML(){return[{tag:"mark"}]},renderHTML({HTMLAttributes:e}){return["mark",_e(this.options.HTMLAttributes,e),0]},addCommands(){return{setHighlight:e=>({commands:t})=>t.setMark(this.name,e),toggleHighlight:e=>({commands:t})=>t.toggleMark(this.name,e),unsetHighlight:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-h":()=>this.editor.commands.toggleHighlight()}},addInputRules(){return[Jt({find:B1,type:this.type})]},addPasteRules(){return[Ot({find:H1,type:this.type})]}}),W1=F1,U1=Ke.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>{const t=e.style.textAlign;return this.options.alignments.includes(t)?t:this.options.defaultAlignment},renderHTML:e=>e.textAlign?{style:`text-align: ${e.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>this.options.alignments.includes(e)?this.options.types.map(n=>t.updateAttributes(n,{textAlign:e})).every(n=>n):!1,unsetTextAlign:()=>({commands:e})=>this.options.types.map(t=>e.resetAttributes(t,"textAlign")).every(t=>t),toggleTextAlign:e=>({editor:t,commands:n})=>this.options.alignments.includes(e)?t.isActive({textAlign:e})?n.unsetTextAlign():n.setTextAlign(e):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),V1=U1,ri,ii;if(typeof WeakMap<"u"){let e=new WeakMap;ri=t=>e.get(t),ii=(t,n)=>(e.set(t,n),n)}else{const e=[];let n=0;ri=s=>{for(let r=0;r<e.length;r+=2)if(e[r]==s)return e[r+1]},ii=(s,r)=>(n==10&&(n=0),e[n++]=s,e[n++]=r)}var Se=class{constructor(e,t,n,s){this.width=e,this.height=t,this.map=n,this.problems=s}findCell(e){for(let t=0;t<this.map.length;t++){const n=this.map[t];if(n!=e)continue;const s=t%this.width,r=t/this.width|0;let a=s+1,o=r+1;for(let l=1;a<this.width&&this.map[t+l]==n;l++)a++;for(let l=1;o<this.height&&this.map[t+this.width*l]==n;l++)o++;return{left:s,top:r,right:a,bottom:o}}throw new RangeError(`No cell with offset ${e} found`)}colCount(e){for(let t=0;t<this.map.length;t++)if(this.map[t]==e)return t%this.width;throw new RangeError(`No cell with offset ${e} found`)}nextCell(e,t,n){const{left:s,right:r,top:a,bottom:o}=this.findCell(e);return t=="horiz"?(n<0?s==0:r==this.width)?null:this.map[a*this.width+(n<0?s-1:r)]:(n<0?a==0:o==this.height)?null:this.map[s+this.width*(n<0?a-1:o)]}rectBetween(e,t){const{left:n,right:s,top:r,bottom:a}=this.findCell(e),{left:o,right:l,top:d,bottom:c}=this.findCell(t);return{left:Math.min(n,o),top:Math.min(r,d),right:Math.max(s,l),bottom:Math.max(a,c)}}cellsInRect(e){const t=[],n={};for(let s=e.top;s<e.bottom;s++)for(let r=e.left;r<e.right;r++){const a=s*this.width+r,o=this.map[a];n[o]||(n[o]=!0,!(r==e.left&&r&&this.map[a-1]==o||s==e.top&&s&&this.map[a-this.width]==o)&&t.push(o))}return t}positionAt(e,t,n){for(let s=0,r=0;;s++){const a=r+n.child(s).nodeSize;if(s==e){let o=t+e*this.width;const l=(e+1)*this.width;for(;o<l&&this.map[o]<r;)o++;return o==l?a-1:this.map[o]}r=a}}static get(e){return ri(e)||ii(e,K1(e))}};function K1(e){if(e.type.spec.tableRole!="table")throw new RangeError("Not a table node: "+e.type.name);const t=J1(e),n=e.childCount,s=[];let r=0,a=null;const o=[];for(let c=0,m=t*n;c<m;c++)s[c]=0;for(let c=0,m=0;c<n;c++){const u=e.child(c);m++;for(let g=0;;g++){for(;r<s.length&&s[r]!=0;)r++;if(g==u.childCount)break;const b=u.child(g),{colspan:h,rowspan:x,colwidth:y}=b.attrs;for(let j=0;j<x;j++){if(j+c>=n){(a||(a=[])).push({type:"overlong_rowspan",pos:m,n:x-j});break}const N=r+j*t;for(let _=0;_<h;_++){s[N+_]==0?s[N+_]=m:(a||(a=[])).push({type:"collision",row:c,pos:m,n:h-_});const S=y&&y[_];if(S){const v=(N+_)%t*2,w=o[v];w==null||w!=S&&o[v+1]==1?(o[v]=S,o[v+1]=1):w==S&&o[v+1]++}}}r+=h,m+=b.nodeSize}const f=(c+1)*t;let p=0;for(;r<f;)s[r++]==0&&p++;p&&(a||(a=[])).push({type:"missing",row:c,n:p}),m++}(t===0||n===0)&&(a||(a=[])).push({type:"zero_sized"});const l=new Se(t,n,s,a);let d=!1;for(let c=0;!d&&c<o.length;c+=2)o[c]!=null&&o[c+1]<n&&(d=!0);return d&&G1(l,o,e),l}function J1(e){let t=-1,n=!1;for(let s=0;s<e.childCount;s++){const r=e.child(s);let a=0;if(n)for(let o=0;o<s;o++){const l=e.child(o);for(let d=0;d<l.childCount;d++){const c=l.child(d);o+c.attrs.rowspan>s&&(a+=c.attrs.colspan)}}for(let o=0;o<r.childCount;o++){const l=r.child(o);a+=l.attrs.colspan,l.attrs.rowspan>1&&(n=!0)}t==-1?t=a:t!=a&&(t=Math.max(t,a))}return t}function G1(e,t,n){e.problems||(e.problems=[]);const s={};for(let r=0;r<e.map.length;r++){const a=e.map[r];if(s[a])continue;s[a]=!0;const o=n.nodeAt(a);if(!o)throw new RangeError(`No cell with offset ${a} found`);let l=null;const d=o.attrs;for(let c=0;c<d.colspan;c++){const m=(r+c)%e.width,u=t[m*2];u!=null&&(!d.colwidth||d.colwidth[c]!=u)&&((l||(l=Y1(d)))[c]=u)}l&&e.problems.unshift({type:"colwidth mismatch",pos:a,colwidth:l})}}function Y1(e){if(e.colwidth)return e.colwidth.slice();const t=[];for(let n=0;n<e.colspan;n++)t.push(0);return t}function qe(e){let t=e.cached.tableNodeTypes;if(!t){t=e.cached.tableNodeTypes={};for(const n in e.nodes){const s=e.nodes[n],r=s.spec.tableRole;r&&(t[r]=s)}}return t}var $t=new Ve("selectingCells");function _n(e){for(let t=e.depth-1;t>0;t--)if(e.node(t).type.spec.tableRole=="row")return e.node(0).resolve(e.before(t+1));return null}function X1(e){for(let t=e.depth;t>0;t--){const n=e.node(t).type.spec.tableRole;if(n==="cell"||n==="header_cell")return e.node(t)}return null}function mt(e){const t=e.selection.$head;for(let n=t.depth;n>0;n--)if(t.node(n).type.spec.tableRole=="row")return!0;return!1}function fr(e){const t=e.selection;if("$anchorCell"in t&&t.$anchorCell)return t.$anchorCell.pos>t.$headCell.pos?t.$anchorCell:t.$headCell;if("node"in t&&t.node&&t.node.type.spec.tableRole=="cell")return t.$anchor;const n=_n(t.$head)||Q1(t.$head);if(n)return n;throw new RangeError(`No cell found around position ${t.head}`)}function Q1(e){for(let t=e.nodeAfter,n=e.pos;t;t=t.firstChild,n++){const s=t.type.spec.tableRole;if(s=="cell"||s=="header_cell")return e.doc.resolve(n)}for(let t=e.nodeBefore,n=e.pos;t;t=t.lastChild,n--){const s=t.type.spec.tableRole;if(s=="cell"||s=="header_cell")return e.doc.resolve(n-t.nodeSize)}}function ai(e){return e.parent.type.spec.tableRole=="row"&&!!e.nodeAfter}function Z1(e){return e.node(0).resolve(e.pos+e.nodeAfter.nodeSize)}function zi(e,t){return e.depth==t.depth&&e.pos>=t.start(-1)&&e.pos<=t.end(-1)}function El(e,t,n){const s=e.node(-1),r=Se.get(s),a=e.start(-1),o=r.nextCell(e.pos-a,t,n);return o==null?null:e.node(0).resolve(a+o)}function Yt(e,t,n=1){const s={...e,colspan:e.colspan-n};return s.colwidth&&(s.colwidth=s.colwidth.slice(),s.colwidth.splice(t,n),s.colwidth.some(r=>r>0)||(s.colwidth=null)),s}function Rl(e,t,n=1){const s={...e,colspan:e.colspan+n};if(s.colwidth){s.colwidth=s.colwidth.slice();for(let r=0;r<n;r++)s.colwidth.splice(t,0,0)}return s}function ey(e,t,n){const s=qe(t.type.schema).header_cell;for(let r=0;r<e.height;r++)if(t.nodeAt(e.map[n+r*e.width]).type!=s)return!1;return!0}var xe=class Ct extends Fe{constructor(t,n=t){const s=t.node(-1),r=Se.get(s),a=t.start(-1),o=r.rectBetween(t.pos-a,n.pos-a),l=t.node(0),d=r.cellsInRect(o).filter(m=>m!=n.pos-a);d.unshift(n.pos-a);const c=d.map(m=>{const u=s.nodeAt(m);if(!u)throw RangeError(`No cell with offset ${m} found`);const f=a+m+1;return new Jd(l.resolve(f),l.resolve(f+u.content.size))});super(c[0].$from,c[0].$to,c),this.$anchorCell=t,this.$headCell=n}map(t,n){const s=t.resolve(n.map(this.$anchorCell.pos)),r=t.resolve(n.map(this.$headCell.pos));if(ai(s)&&ai(r)&&zi(s,r)){const a=this.$anchorCell.node(-1)!=s.node(-1);return a&&this.isRowSelection()?Ct.rowSelection(s,r):a&&this.isColSelection()?Ct.colSelection(s,r):new Ct(s,r)}return Pe.between(s,r)}content(){const t=this.$anchorCell.node(-1),n=Se.get(t),s=this.$anchorCell.start(-1),r=n.rectBetween(this.$anchorCell.pos-s,this.$headCell.pos-s),a={},o=[];for(let d=r.top;d<r.bottom;d++){const c=[];for(let m=d*n.width+r.left,u=r.left;u<r.right;u++,m++){const f=n.map[m];if(a[f])continue;a[f]=!0;const p=n.findCell(f);let g=t.nodeAt(f);if(!g)throw RangeError(`No cell with offset ${f} found`);const b=r.left-p.left,h=p.right-r.right;if(b>0||h>0){let x=g.attrs;if(b>0&&(x=Yt(x,0,b)),h>0&&(x=Yt(x,x.colspan-h,h)),p.left<r.left){if(g=g.type.createAndFill(x),!g)throw RangeError(`Could not create cell with attrs ${JSON.stringify(x)}`)}else g=g.type.create(x,g.content)}if(p.top<r.top||p.bottom>r.bottom){const x={...g.attrs,rowspan:Math.min(p.bottom,r.bottom)-Math.max(p.top,r.top)};p.top<r.top?g=g.type.createAndFill(x):g=g.type.create(x,g.content)}c.push(g)}o.push(t.child(d).copy(ot.from(c)))}const l=this.isColSelection()&&this.isRowSelection()?t:o;return new xt(ot.from(l),1,1)}replace(t,n=xt.empty){const s=t.steps.length,r=this.ranges;for(let o=0;o<r.length;o++){const{$from:l,$to:d}=r[o],c=t.mapping.slice(s);t.replace(c.map(l.pos),c.map(d.pos),o?xt.empty:n)}const a=Fe.findFrom(t.doc.resolve(t.mapping.slice(s).map(this.to)),-1);a&&t.setSelection(a)}replaceWith(t,n){this.replace(t,new xt(ot.from(n),0,0))}forEachCell(t){const n=this.$anchorCell.node(-1),s=Se.get(n),r=this.$anchorCell.start(-1),a=s.cellsInRect(s.rectBetween(this.$anchorCell.pos-r,this.$headCell.pos-r));for(let o=0;o<a.length;o++)t(n.nodeAt(a[o]),r+a[o])}isColSelection(){const t=this.$anchorCell.index(-1),n=this.$headCell.index(-1);if(Math.min(t,n)>0)return!1;const s=t+this.$anchorCell.nodeAfter.attrs.rowspan,r=n+this.$headCell.nodeAfter.attrs.rowspan;return Math.max(s,r)==this.$headCell.node(-1).childCount}static colSelection(t,n=t){const s=t.node(-1),r=Se.get(s),a=t.start(-1),o=r.findCell(t.pos-a),l=r.findCell(n.pos-a),d=t.node(0);return o.top<=l.top?(o.top>0&&(t=d.resolve(a+r.map[o.left])),l.bottom<r.height&&(n=d.resolve(a+r.map[r.width*(r.height-1)+l.right-1]))):(l.top>0&&(n=d.resolve(a+r.map[l.left])),o.bottom<r.height&&(t=d.resolve(a+r.map[r.width*(r.height-1)+o.right-1]))),new Ct(t,n)}isRowSelection(){const t=this.$anchorCell.node(-1),n=Se.get(t),s=this.$anchorCell.start(-1),r=n.colCount(this.$anchorCell.pos-s),a=n.colCount(this.$headCell.pos-s);if(Math.min(r,a)>0)return!1;const o=r+this.$anchorCell.nodeAfter.attrs.colspan,l=a+this.$headCell.nodeAfter.attrs.colspan;return Math.max(o,l)==n.width}eq(t){return t instanceof Ct&&t.$anchorCell.pos==this.$anchorCell.pos&&t.$headCell.pos==this.$headCell.pos}static rowSelection(t,n=t){const s=t.node(-1),r=Se.get(s),a=t.start(-1),o=r.findCell(t.pos-a),l=r.findCell(n.pos-a),d=t.node(0);return o.left<=l.left?(o.left>0&&(t=d.resolve(a+r.map[o.top*r.width])),l.right<r.width&&(n=d.resolve(a+r.map[r.width*(l.top+1)-1]))):(l.left>0&&(n=d.resolve(a+r.map[l.top*r.width])),o.right<r.width&&(t=d.resolve(a+r.map[r.width*(o.top+1)-1]))),new Ct(t,n)}toJSON(){return{type:"cell",anchor:this.$anchorCell.pos,head:this.$headCell.pos}}static fromJSON(t,n){return new Ct(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,s=n){return new Ct(t.resolve(n),t.resolve(s))}getBookmark(){return new ty(this.$anchorCell.pos,this.$headCell.pos)}};xe.prototype.visible=!1;Fe.jsonID("cell",xe);var ty=class Ml{constructor(t,n){this.anchor=t,this.head=n}map(t){return new Ml(t.map(this.anchor),t.map(this.head))}resolve(t){const n=t.resolve(this.anchor),s=t.resolve(this.head);return n.parent.type.spec.tableRole=="row"&&s.parent.type.spec.tableRole=="row"&&n.index()<n.parent.childCount&&s.index()<s.parent.childCount&&zi(n,s)?new xe(n,s):Fe.near(s,1)}};function ny(e){if(!(e.selection instanceof xe))return null;const t=[];return e.selection.forEachCell((n,s)=>{t.push(Gt.node(s,s+n.nodeSize,{class:"selectedCell"}))}),qt.create(e.doc,t)}function sy({$from:e,$to:t}){if(e.pos==t.pos||e.pos<t.pos-6)return!1;let n=e.pos,s=t.pos,r=e.depth;for(;r>=0&&!(e.after(r+1)<e.end(r));r--,n++);for(let a=t.depth;a>=0&&!(t.before(a+1)>t.start(a));a--,s--);return n==s&&/row|table/.test(e.node(r).type.spec.tableRole)}function ry({$from:e,$to:t}){let n,s;for(let r=e.depth;r>0;r--){const a=e.node(r);if(a.type.spec.tableRole==="cell"||a.type.spec.tableRole==="header_cell"){n=a;break}}for(let r=t.depth;r>0;r--){const a=t.node(r);if(a.type.spec.tableRole==="cell"||a.type.spec.tableRole==="header_cell"){s=a;break}}return n!==s&&t.parentOffset===0}function iy(e,t,n){const s=(t||e).selection,r=(t||e).doc;let a,o;if(s instanceof or&&(o=s.node.type.spec.tableRole)){if(o=="cell"||o=="header_cell")a=xe.create(r,s.from);else if(o=="row"){const l=r.resolve(s.from+1);a=xe.rowSelection(l,l)}else if(!n){const l=Se.get(s.node),d=s.from+1,c=d+l.map[l.width*l.height-1];a=xe.create(r,d+1,c)}}else s instanceof Pe&&sy(s)?a=Pe.create(r,s.from):s instanceof Pe&&ry(s)&&(a=Pe.create(r,s.$from.start(),s.$from.end()));return a&&(t||(t=e.tr)).setSelection(a),t}var ay=new Ve("fix-tables");function Tl(e,t,n,s){const r=e.childCount,a=t.childCount;e:for(let o=0,l=0;o<a;o++){const d=t.child(o);for(let c=l,m=Math.min(r,o+3);c<m;c++)if(e.child(c)==d){l=c+1,n+=d.nodeSize;continue e}s(d,n),l<r&&e.child(l).sameMarkup(d)?Tl(e.child(l),d,n+1,s):d.nodesBetween(0,d.content.size,s,n+1),n+=d.nodeSize}}function Dl(e,t){let n;const s=(r,a)=>{r.type.spec.tableRole=="table"&&(n=oy(e,r,a,n))};return t?t.doc!=e.doc&&Tl(t.doc,e.doc,0,s):e.doc.descendants(s),n}function oy(e,t,n,s){const r=Se.get(t);if(!r.problems)return s;s||(s=e.tr);const a=[];for(let d=0;d<r.height;d++)a.push(0);for(let d=0;d<r.problems.length;d++){const c=r.problems[d];if(c.type=="collision"){const m=t.nodeAt(c.pos);if(!m)continue;const u=m.attrs;for(let f=0;f<u.rowspan;f++)a[c.row+f]+=c.n;s.setNodeMarkup(s.mapping.map(n+1+c.pos),null,Yt(u,u.colspan-c.n,c.n))}else if(c.type=="missing")a[c.row]+=c.n;else if(c.type=="overlong_rowspan"){const m=t.nodeAt(c.pos);if(!m)continue;s.setNodeMarkup(s.mapping.map(n+1+c.pos),null,{...m.attrs,rowspan:m.attrs.rowspan-c.n})}else if(c.type=="colwidth mismatch"){const m=t.nodeAt(c.pos);if(!m)continue;s.setNodeMarkup(s.mapping.map(n+1+c.pos),null,{...m.attrs,colwidth:c.colwidth})}else if(c.type=="zero_sized"){const m=s.mapping.map(n);s.delete(m,m+t.nodeSize)}}let o,l;for(let d=0;d<a.length;d++)a[d]&&(o==null&&(o=d),l=d);for(let d=0,c=n+1;d<r.height;d++){const m=t.child(d),u=c+m.nodeSize,f=a[d];if(f>0){let p="cell";m.firstChild&&(p=m.firstChild.type.spec.tableRole);const g=[];for(let h=0;h<f;h++){const x=qe(e.schema)[p].createAndFill();x&&g.push(x)}const b=(d==0||o==d-1)&&l==d?c+1:u-1;s.insert(s.mapping.map(b),g)}c=u}return s.setMeta(ay,{fixTables:!0})}function _t(e){const t=e.selection,n=fr(e),s=n.node(-1),r=n.start(-1),a=Se.get(s);return{...t instanceof xe?a.rectBetween(t.$anchorCell.pos-r,t.$headCell.pos-r):a.findCell(n.pos-r),tableStart:r,map:a,table:s}}function Il(e,{map:t,tableStart:n,table:s},r){let a=r>0?-1:0;ey(t,s,r+a)&&(a=r==0||r==t.width?null:0);for(let o=0;o<t.height;o++){const l=o*t.width+r;if(r>0&&r<t.width&&t.map[l-1]==t.map[l]){const d=t.map[l],c=s.nodeAt(d);e.setNodeMarkup(e.mapping.map(n+d),null,Rl(c.attrs,r-t.colCount(d))),o+=c.attrs.rowspan-1}else{const d=a==null?qe(s.type.schema).cell:s.nodeAt(t.map[l+a]).type,c=t.positionAt(o,r,s);e.insert(e.mapping.map(n+c),d.createAndFill())}}return e}function ly(e,t){if(!mt(e))return!1;if(t){const n=_t(e);t(Il(e.tr,n,n.left))}return!0}function cy(e,t){if(!mt(e))return!1;if(t){const n=_t(e);t(Il(e.tr,n,n.right))}return!0}function dy(e,{map:t,table:n,tableStart:s},r){const a=e.mapping.maps.length;for(let o=0;o<t.height;){const l=o*t.width+r,d=t.map[l],c=n.nodeAt(d),m=c.attrs;if(r>0&&t.map[l-1]==d||r<t.width-1&&t.map[l+1]==d)e.setNodeMarkup(e.mapping.slice(a).map(s+d),null,Yt(m,r-t.colCount(d)));else{const u=e.mapping.slice(a).map(s+d);e.delete(u,u+c.nodeSize)}o+=m.rowspan}}function uy(e,t){if(!mt(e))return!1;if(t){const n=_t(e),s=e.tr;if(n.left==0&&n.right==n.map.width)return!1;for(let r=n.right-1;dy(s,n,r),r!=n.left;r--){const a=n.tableStart?s.doc.nodeAt(n.tableStart-1):s.doc;if(!a)throw RangeError("No table found");n.table=a,n.map=Se.get(a)}t(s)}return!0}function my(e,t,n){var s;const r=qe(t.type.schema).header_cell;for(let a=0;a<e.width;a++)if(((s=t.nodeAt(e.map[a+n*e.width]))==null?void 0:s.type)!=r)return!1;return!0}function Ll(e,{map:t,tableStart:n,table:s},r){var a;let o=n;for(let c=0;c<r;c++)o+=s.child(c).nodeSize;const l=[];let d=r>0?-1:0;my(t,s,r+d)&&(d=r==0||r==t.height?null:0);for(let c=0,m=t.width*r;c<t.width;c++,m++)if(r>0&&r<t.height&&t.map[m]==t.map[m-t.width]){const u=t.map[m],f=s.nodeAt(u).attrs;e.setNodeMarkup(n+u,null,{...f,rowspan:f.rowspan+1}),c+=f.colspan-1}else{const u=d==null?qe(s.type.schema).cell:(a=s.nodeAt(t.map[m+d*t.width]))==null?void 0:a.type,f=u?.createAndFill();f&&l.push(f)}return e.insert(o,qe(s.type.schema).row.create(null,l)),e}function fy(e,t){if(!mt(e))return!1;if(t){const n=_t(e);t(Ll(e.tr,n,n.top))}return!0}function py(e,t){if(!mt(e))return!1;if(t){const n=_t(e);t(Ll(e.tr,n,n.bottom))}return!0}function hy(e,{map:t,table:n,tableStart:s},r){let a=0;for(let c=0;c<r;c++)a+=n.child(c).nodeSize;const o=a+n.child(r).nodeSize,l=e.mapping.maps.length;e.delete(a+s,o+s);const d=new Set;for(let c=0,m=r*t.width;c<t.width;c++,m++){const u=t.map[m];if(!d.has(u)){if(d.add(u),r>0&&u==t.map[m-t.width]){const f=n.nodeAt(u).attrs;e.setNodeMarkup(e.mapping.slice(l).map(u+s),null,{...f,rowspan:f.rowspan-1}),c+=f.colspan-1}else if(r<t.height&&u==t.map[m+t.width]){const f=n.nodeAt(u),p=f.attrs,g=f.type.create({...p,rowspan:f.attrs.rowspan-1},f.content),b=t.positionAt(r+1,c,n);e.insert(e.mapping.slice(l).map(s+b),g),c+=p.colspan-1}}}}function gy(e,t){if(!mt(e))return!1;if(t){const n=_t(e),s=e.tr;if(n.top==0&&n.bottom==n.map.height)return!1;for(let r=n.bottom-1;hy(s,n,r),r!=n.top;r--){const a=n.tableStart?s.doc.nodeAt(n.tableStart-1):s.doc;if(!a)throw RangeError("No table found");n.table=a,n.map=Se.get(n.table)}t(s)}return!0}function Ha(e){const t=e.content;return t.childCount==1&&t.child(0).isTextblock&&t.child(0).childCount==0}function by({width:e,height:t,map:n},s){let r=s.top*e+s.left,a=r,o=(s.bottom-1)*e+s.left,l=r+(s.right-s.left-1);for(let d=s.top;d<s.bottom;d++){if(s.left>0&&n[a]==n[a-1]||s.right<e&&n[l]==n[l+1])return!0;a+=e,l+=e}for(let d=s.left;d<s.right;d++){if(s.top>0&&n[r]==n[r-e]||s.bottom<t&&n[o]==n[o+e])return!0;r++,o++}return!1}function Fa(e,t){const n=e.selection;if(!(n instanceof xe)||n.$anchorCell.pos==n.$headCell.pos)return!1;const s=_t(e),{map:r}=s;if(by(r,s))return!1;if(t){const a=e.tr,o={};let l=ot.empty,d,c;for(let m=s.top;m<s.bottom;m++)for(let u=s.left;u<s.right;u++){const f=r.map[m*r.width+u],p=s.table.nodeAt(f);if(!(o[f]||!p))if(o[f]=!0,d==null)d=f,c=p;else{Ha(p)||(l=l.append(p.content));const g=a.mapping.map(f+s.tableStart);a.delete(g,g+p.nodeSize)}}if(d==null||c==null)return!0;if(a.setNodeMarkup(d+s.tableStart,null,{...Rl(c.attrs,c.attrs.colspan,s.right-s.left-c.attrs.colspan),rowspan:s.bottom-s.top}),l.size){const m=d+1+c.content.size,u=Ha(c)?d+1:m;a.replaceWith(u+s.tableStart,m+s.tableStart,l)}a.setSelection(new xe(a.doc.resolve(d+s.tableStart))),t(a)}return!0}function Wa(e,t){const n=qe(e.schema);return xy(({node:s})=>n[s.type.spec.tableRole])(e,t)}function xy(e){return(t,n)=>{var s;const r=t.selection;let a,o;if(r instanceof xe){if(r.$anchorCell.pos!=r.$headCell.pos)return!1;a=r.$anchorCell.nodeAfter,o=r.$anchorCell.pos}else{if(a=X1(r.$from),!a)return!1;o=(s=_n(r.$from))==null?void 0:s.pos}if(a==null||o==null||a.attrs.colspan==1&&a.attrs.rowspan==1)return!1;if(n){let l=a.attrs;const d=[],c=l.colwidth;l.rowspan>1&&(l={...l,rowspan:1}),l.colspan>1&&(l={...l,colspan:1});const m=_t(t),u=t.tr;for(let p=0;p<m.right-m.left;p++)d.push(c?{...l,colwidth:c&&c[p]?[c[p]]:null}:l);let f;for(let p=m.top;p<m.bottom;p++){let g=m.map.positionAt(p,m.left,m.table);p==m.top&&(g+=a.nodeSize);for(let b=m.left,h=0;b<m.right;b++,h++)b==m.left&&p==m.top||u.insert(f=u.mapping.map(g+m.tableStart,1),e({node:a,row:p,col:b}).createAndFill(d[h]))}u.setNodeMarkup(o,e({node:a,row:m.top,col:m.left}),d[0]),r instanceof xe&&u.setSelection(new xe(u.doc.resolve(r.$anchorCell.pos),f?u.doc.resolve(f):void 0)),n(u)}return!0}}function yy(e,t){return function(n,s){if(!mt(n))return!1;const r=fr(n);if(r.nodeAfter.attrs[e]===t)return!1;if(s){const a=n.tr;n.selection instanceof xe?n.selection.forEachCell((o,l)=>{o.attrs[e]!==t&&a.setNodeMarkup(l,null,{...o.attrs,[e]:t})}):a.setNodeMarkup(r.pos,null,{...r.nodeAfter.attrs,[e]:t}),s(a)}return!0}}function _y(e){return function(t,n){if(!mt(t))return!1;if(n){const s=qe(t.schema),r=_t(t),a=t.tr,o=r.map.cellsInRect(e=="column"?{left:r.left,top:0,right:r.right,bottom:r.map.height}:e=="row"?{left:0,top:r.top,right:r.map.width,bottom:r.bottom}:r),l=o.map(d=>r.table.nodeAt(d));for(let d=0;d<o.length;d++)l[d].type==s.header_cell&&a.setNodeMarkup(r.tableStart+o[d],s.cell,l[d].attrs);if(a.steps.length==0)for(let d=0;d<o.length;d++)a.setNodeMarkup(r.tableStart+o[d],s.header_cell,l[d].attrs);n(a)}return!0}}function Ua(e,t,n){const s=t.map.cellsInRect({left:0,top:0,right:e=="row"?t.map.width:1,bottom:e=="column"?t.map.height:1});for(let r=0;r<s.length;r++){const a=t.table.nodeAt(s[r]);if(a&&a.type!==n.header_cell)return!1}return!0}function Un(e,t){return t=t||{useDeprecatedLogic:!1},t.useDeprecatedLogic?_y(e):function(n,s){if(!mt(n))return!1;if(s){const r=qe(n.schema),a=_t(n),o=n.tr,l=Ua("row",a,r),d=Ua("column",a,r),m=(e==="column"?l:e==="row"?d:!1)?1:0,u=e=="column"?{left:0,top:m,right:1,bottom:a.map.height}:e=="row"?{left:m,top:0,right:a.map.width,bottom:1}:a,f=e=="column"?d?r.cell:r.header_cell:e=="row"?l?r.cell:r.header_cell:r.cell;a.map.cellsInRect(u).forEach(p=>{const g=p+a.tableStart,b=o.doc.nodeAt(g);b&&o.setNodeMarkup(g,f,b.attrs)}),s(o)}return!0}}Un("row",{useDeprecatedLogic:!0});Un("column",{useDeprecatedLogic:!0});var vy=Un("cell",{useDeprecatedLogic:!0});function jy(e,t){if(t<0){const n=e.nodeBefore;if(n)return e.pos-n.nodeSize;for(let s=e.index(-1)-1,r=e.before();s>=0;s--){const a=e.node(-1).child(s),o=a.lastChild;if(o)return r-1-o.nodeSize;r-=a.nodeSize}}else{if(e.index()<e.parent.childCount-1)return e.pos+e.nodeAfter.nodeSize;const n=e.node(-1);for(let s=e.indexAfter(-1),r=e.after();s<n.childCount;s++){const a=n.child(s);if(a.childCount)return r+1;r+=a.nodeSize}}return null}function Va(e){return function(t,n){if(!mt(t))return!1;const s=jy(fr(t),e);if(s==null)return!1;if(n){const r=t.doc.resolve(s);n(t.tr.setSelection(Pe.between(r,Z1(r))).scrollIntoView())}return!0}}function Ny(e,t){const n=e.selection.$anchor;for(let s=n.depth;s>0;s--)if(n.node(s).type.spec.tableRole=="table")return t&&t(e.tr.delete(n.before(s),n.after(s)).scrollIntoView()),!0;return!1}function ds(e,t){const n=e.selection;if(!(n instanceof xe))return!1;if(t){const s=e.tr,r=qe(e.schema).cell.createAndFill().content;n.forEachCell((a,o)=>{a.content.eq(r)||s.replace(s.mapping.map(o+1),s.mapping.map(o+a.nodeSize-1),new xt(r,0,0))}),s.docChanged&&t(s)}return!0}function wy(e){if(!e.size)return null;let{content:t,openStart:n,openEnd:s}=e;for(;t.childCount==1&&(n>0&&s>0||t.child(0).type.spec.tableRole=="table");)n--,s--,t=t.child(0).content;const r=t.child(0),a=r.type.spec.tableRole,o=r.type.schema,l=[];if(a=="row")for(let d=0;d<t.childCount;d++){let c=t.child(d).content;const m=d?0:Math.max(0,n-1),u=d<t.childCount-1?0:Math.max(0,s-1);(m||u)&&(c=oi(qe(o).row,new xt(c,m,u)).content),l.push(c)}else if(a=="cell"||a=="header_cell")l.push(n||s?oi(qe(o).row,new xt(t,n,s)).content:t);else return null;return Sy(o,l)}function Sy(e,t){const n=[];for(let r=0;r<t.length;r++){const a=t[r];for(let o=a.childCount-1;o>=0;o--){const{rowspan:l,colspan:d}=a.child(o).attrs;for(let c=r;c<r+l;c++)n[c]=(n[c]||0)+d}}let s=0;for(let r=0;r<n.length;r++)s=Math.max(s,n[r]);for(let r=0;r<n.length;r++)if(r>=t.length&&t.push(ot.empty),n[r]<s){const a=qe(e).cell.createAndFill(),o=[];for(let l=n[r];l<s;l++)o.push(a);t[r]=t[r].append(ot.from(o))}return{height:t.length,width:s,rows:t}}function oi(e,t){const n=e.createAndFill();return new Gd(n).replace(0,n.content.size,t).doc}function Cy({width:e,height:t,rows:n},s,r){if(e!=s){const a=[],o=[];for(let l=0;l<n.length;l++){const d=n[l],c=[];for(let m=a[l]||0,u=0;m<s;u++){let f=d.child(u%d.childCount);m+f.attrs.colspan>s&&(f=f.type.createChecked(Yt(f.attrs,f.attrs.colspan,m+f.attrs.colspan-s),f.content)),c.push(f),m+=f.attrs.colspan;for(let p=1;p<f.attrs.rowspan;p++)a[l+p]=(a[l+p]||0)+f.attrs.colspan}o.push(ot.from(c))}n=o,e=s}if(t!=r){const a=[];for(let o=0,l=0;o<r;o++,l++){const d=[],c=n[l%t];for(let m=0;m<c.childCount;m++){let u=c.child(m);o+u.attrs.rowspan>r&&(u=u.type.create({...u.attrs,rowspan:Math.max(1,r-u.attrs.rowspan)},u.content)),d.push(u)}a.push(ot.from(d))}n=a,t=r}return{width:e,height:t,rows:n}}function ky(e,t,n,s,r,a,o){const l=e.doc.type.schema,d=qe(l);let c,m;if(r>t.width)for(let u=0,f=0;u<t.height;u++){const p=n.child(u);f+=p.nodeSize;const g=[];let b;p.lastChild==null||p.lastChild.type==d.cell?b=c||(c=d.cell.createAndFill()):b=m||(m=d.header_cell.createAndFill());for(let h=t.width;h<r;h++)g.push(b);e.insert(e.mapping.slice(o).map(f-1+s),g)}if(a>t.height){const u=[];for(let g=0,b=(t.height-1)*t.width;g<Math.max(t.width,r);g++){const h=g>=t.width?!1:n.nodeAt(t.map[b+g]).type==d.header_cell;u.push(h?m||(m=d.header_cell.createAndFill()):c||(c=d.cell.createAndFill()))}const f=d.row.create(null,ot.from(u)),p=[];for(let g=t.height;g<a;g++)p.push(f);e.insert(e.mapping.slice(o).map(s+n.nodeSize-2),p)}return!!(c||m)}function Ka(e,t,n,s,r,a,o,l){if(o==0||o==t.height)return!1;let d=!1;for(let c=r;c<a;c++){const m=o*t.width+c,u=t.map[m];if(t.map[m-t.width]==u){d=!0;const f=n.nodeAt(u),{top:p,left:g}=t.findCell(u);e.setNodeMarkup(e.mapping.slice(l).map(u+s),null,{...f.attrs,rowspan:o-p}),e.insert(e.mapping.slice(l).map(t.positionAt(o,g,n)),f.type.createAndFill({...f.attrs,rowspan:p+f.attrs.rowspan-o})),c+=f.attrs.colspan-1}}return d}function Ja(e,t,n,s,r,a,o,l){if(o==0||o==t.width)return!1;let d=!1;for(let c=r;c<a;c++){const m=c*t.width+o,u=t.map[m];if(t.map[m-1]==u){d=!0;const f=n.nodeAt(u),p=t.colCount(u),g=e.mapping.slice(l).map(u+s);e.setNodeMarkup(g,null,Yt(f.attrs,o-p,f.attrs.colspan-(o-p))),e.insert(g+f.nodeSize,f.type.createAndFill(Yt(f.attrs,0,o-p))),c+=f.attrs.rowspan-1}}return d}function Ga(e,t,n,s,r){let a=n?e.doc.nodeAt(n-1):e.doc;if(!a)throw new Error("No table found");let o=Se.get(a);const{top:l,left:d}=s,c=d+r.width,m=l+r.height,u=e.tr;let f=0;function p(){if(a=n?u.doc.nodeAt(n-1):u.doc,!a)throw new Error("No table found");o=Se.get(a),f=u.mapping.maps.length}ky(u,o,a,n,c,m,f)&&p(),Ka(u,o,a,n,d,c,l,f)&&p(),Ka(u,o,a,n,d,c,m,f)&&p(),Ja(u,o,a,n,l,m,d,f)&&p(),Ja(u,o,a,n,l,m,c,f)&&p();for(let g=l;g<m;g++){const b=o.positionAt(g,d,a),h=o.positionAt(g,c,a);u.replace(u.mapping.slice(f).map(b+n),u.mapping.slice(f).map(h+n),new xt(r.rows[g-l],0,0))}p(),u.setSelection(new xe(u.doc.resolve(n+o.positionAt(l,d,a)),u.doc.resolve(n+o.positionAt(m-1,c-1,a)))),t(u)}var Ay=So({ArrowLeft:us("horiz",-1),ArrowRight:us("horiz",1),ArrowUp:us("vert",-1),ArrowDown:us("vert",1),"Shift-ArrowLeft":ms("horiz",-1),"Shift-ArrowRight":ms("horiz",1),"Shift-ArrowUp":ms("vert",-1),"Shift-ArrowDown":ms("vert",1),Backspace:ds,"Mod-Backspace":ds,Delete:ds,"Mod-Delete":ds});function xs(e,t,n){return n.eq(e.selection)?!1:(t&&t(e.tr.setSelection(n).scrollIntoView()),!0)}function us(e,t){return(n,s,r)=>{if(!r)return!1;const a=n.selection;if(a instanceof xe)return xs(n,s,Fe.near(a.$headCell,t));if(e!="horiz"&&!a.empty)return!1;const o=$l(r,e,t);if(o==null)return!1;if(e=="horiz")return xs(n,s,Fe.near(n.doc.resolve(a.head+t),t));{const l=n.doc.resolve(o),d=El(l,e,t);let c;return d?c=Fe.near(d,1):t<0?c=Fe.near(n.doc.resolve(l.before(-1)),-1):c=Fe.near(n.doc.resolve(l.after(-1)),1),xs(n,s,c)}}}function ms(e,t){return(n,s,r)=>{if(!r)return!1;const a=n.selection;let o;if(a instanceof xe)o=a;else{const d=$l(r,e,t);if(d==null)return!1;o=new xe(n.doc.resolve(d))}const l=El(o.$headCell,e,t);return l?xs(n,s,new xe(o.$anchorCell,l)):!1}}function Ey(e,t){const n=e.state.doc,s=_n(n.resolve(t));return s?(e.dispatch(e.state.tr.setSelection(new xe(s))),!0):!1}function Ry(e,t,n){if(!mt(e.state))return!1;let s=wy(n);const r=e.state.selection;if(r instanceof xe){s||(s={width:1,height:1,rows:[ot.from(oi(qe(e.state.schema).cell,n))]});const a=r.$anchorCell.node(-1),o=r.$anchorCell.start(-1),l=Se.get(a).rectBetween(r.$anchorCell.pos-o,r.$headCell.pos-o);return s=Cy(s,l.right-l.left,l.bottom-l.top),Ga(e.state,e.dispatch,o,l,s),!0}else if(s){const a=fr(e.state),o=a.start(-1);return Ga(e.state,e.dispatch,o,Se.get(a.node(-1)).findCell(a.pos-o),s),!0}else return!1}function My(e,t){var n;if(t.ctrlKey||t.metaKey)return;const s=Ya(e,t.target);let r;if(t.shiftKey&&e.state.selection instanceof xe)a(e.state.selection.$anchorCell,t),t.preventDefault();else if(t.shiftKey&&s&&(r=_n(e.state.selection.$anchor))!=null&&((n=Ir(e,t))==null?void 0:n.pos)!=r.pos)a(r,t),t.preventDefault();else if(!s)return;function a(d,c){let m=Ir(e,c);const u=$t.getState(e.state)==null;if(!m||!zi(d,m))if(u)m=d;else return;const f=new xe(d,m);if(u||!e.state.selection.eq(f)){const p=e.state.tr.setSelection(f);u&&p.setMeta($t,d.pos),e.dispatch(p)}}function o(){e.root.removeEventListener("mouseup",o),e.root.removeEventListener("dragstart",o),e.root.removeEventListener("mousemove",l),$t.getState(e.state)!=null&&e.dispatch(e.state.tr.setMeta($t,-1))}function l(d){const c=d,m=$t.getState(e.state);let u;if(m!=null)u=e.state.doc.resolve(m);else if(Ya(e,c.target)!=s&&(u=Ir(e,t),!u))return o();u&&a(u,c)}e.root.addEventListener("mouseup",o),e.root.addEventListener("dragstart",o),e.root.addEventListener("mousemove",l)}function $l(e,t,n){if(!(e.state.selection instanceof Pe))return null;const{$head:s}=e.state.selection;for(let r=s.depth-1;r>=0;r--){const a=s.node(r);if((n<0?s.index(r):s.indexAfter(r))!=(n<0?0:a.childCount))return null;if(a.type.spec.tableRole=="cell"||a.type.spec.tableRole=="header_cell"){const l=s.before(r),d=t=="vert"?n>0?"down":"up":n>0?"right":"left";return e.endOfTextblock(d)?l:null}}return null}function Ya(e,t){for(;t&&t!=e.dom;t=t.parentNode)if(t.nodeName=="TD"||t.nodeName=="TH")return t;return null}function Ir(e,t){const n=e.posAtCoords({left:t.clientX,top:t.clientY});return n&&n?_n(e.state.doc.resolve(n.pos)):null}var Ty=class{constructor(t,n){this.node=t,this.defaultCellMinWidth=n,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.table.style.setProperty("--default-cell-min-width",`${n}px`),this.colgroup=this.table.appendChild(document.createElement("colgroup")),li(t,this.colgroup,this.table,n),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(t){return t.type!=this.node.type?!1:(this.node=t,li(t,this.colgroup,this.table,this.defaultCellMinWidth),!0)}ignoreMutation(t){return t.type=="attributes"&&(t.target==this.table||this.colgroup.contains(t.target))}};function li(e,t,n,s,r,a){var o;let l=0,d=!0,c=t.firstChild;const m=e.firstChild;if(m){for(let u=0,f=0;u<m.childCount;u++){const{colspan:p,colwidth:g}=m.child(u).attrs;for(let b=0;b<p;b++,f++){const h=r==f?a:g&&g[b],x=h?h+"px":"";if(l+=h||s,h||(d=!1),c)c.style.width!=x&&(c.style.width=x),c=c.nextSibling;else{const y=document.createElement("col");y.style.width=x,t.appendChild(y)}}}for(;c;){const u=c.nextSibling;(o=c.parentNode)==null||o.removeChild(c),c=u}d?(n.style.width=l+"px",n.style.minWidth=""):(n.style.width="",n.style.minWidth=l+"px")}}var Qe=new Ve("tableColumnResizing");function Dy({handleWidth:e=5,cellMinWidth:t=25,defaultCellMinWidth:n=100,View:s=Ty,lastColumnResizable:r=!0}={}){const a=new Ue({key:Qe,state:{init(o,l){var d,c;const m=(c=(d=a.spec)==null?void 0:d.props)==null?void 0:c.nodeViews,u=qe(l.schema).table.name;return s&&m&&(m[u]=(f,p)=>new s(f,n,p)),new Iy(-1,!1)},apply(o,l){return l.apply(o)}},props:{attributes:o=>{const l=Qe.getState(o);return l&&l.activeHandle>-1?{class:"resize-cursor"}:{}},handleDOMEvents:{mousemove:(o,l)=>{Ly(o,l,e,r)},mouseleave:o=>{$y(o)},mousedown:(o,l)=>{Oy(o,l,t,n)}},decorations:o=>{const l=Qe.getState(o);if(l&&l.activeHandle>-1)return Hy(o,l.activeHandle)},nodeViews:{}}});return a}var Iy=class ys{constructor(t,n){this.activeHandle=t,this.dragging=n}apply(t){const n=this,s=t.getMeta(Qe);if(s&&s.setHandle!=null)return new ys(s.setHandle,!1);if(s&&s.setDragging!==void 0)return new ys(n.activeHandle,s.setDragging);if(n.activeHandle>-1&&t.docChanged){let r=t.mapping.map(n.activeHandle,-1);return ai(t.doc.resolve(r))||(r=-1),new ys(r,n.dragging)}return n}};function Ly(e,t,n,s){if(!e.editable)return;const r=Qe.getState(e.state);if(r&&!r.dragging){const a=zy(t.target);let o=-1;if(a){const{left:l,right:d}=a.getBoundingClientRect();t.clientX-l<=n?o=Xa(e,t,"left",n):d-t.clientX<=n&&(o=Xa(e,t,"right",n))}if(o!=r.activeHandle){if(!s&&o!==-1){const l=e.state.doc.resolve(o),d=l.node(-1),c=Se.get(d),m=l.start(-1);if(c.colCount(l.pos-m)+l.nodeAfter.attrs.colspan-1==c.width-1)return}Ol(e,o)}}}function $y(e){if(!e.editable)return;const t=Qe.getState(e.state);t&&t.activeHandle>-1&&!t.dragging&&Ol(e,-1)}function Oy(e,t,n,s){var r;if(!e.editable)return!1;const a=(r=e.dom.ownerDocument.defaultView)!=null?r:window,o=Qe.getState(e.state);if(!o||o.activeHandle==-1||o.dragging)return!1;const l=e.state.doc.nodeAt(o.activeHandle),d=qy(e,o.activeHandle,l.attrs);e.dispatch(e.state.tr.setMeta(Qe,{setDragging:{startX:t.clientX,startWidth:d}}));function c(u){a.removeEventListener("mouseup",c),a.removeEventListener("mousemove",m);const f=Qe.getState(e.state);f?.dragging&&(Py(e,f.activeHandle,Qa(f.dragging,u,n)),e.dispatch(e.state.tr.setMeta(Qe,{setDragging:null})))}function m(u){if(!u.which)return c(u);const f=Qe.getState(e.state);if(f&&f.dragging){const p=Qa(f.dragging,u,n);Za(e,f.activeHandle,p,s)}}return Za(e,o.activeHandle,d,s),a.addEventListener("mouseup",c),a.addEventListener("mousemove",m),t.preventDefault(),!0}function qy(e,t,{colspan:n,colwidth:s}){const r=s&&s[s.length-1];if(r)return r;const a=e.domAtPos(t);let l=a.node.childNodes[a.offset].offsetWidth,d=n;if(s)for(let c=0;c<n;c++)s[c]&&(l-=s[c],d--);return l/d}function zy(e){for(;e&&e.nodeName!="TD"&&e.nodeName!="TH";)e=e.classList&&e.classList.contains("ProseMirror")?null:e.parentNode;return e}function Xa(e,t,n,s){const r=n=="right"?-s:s,a=e.posAtCoords({left:t.clientX+r,top:t.clientY});if(!a)return-1;const{pos:o}=a,l=_n(e.state.doc.resolve(o));if(!l)return-1;if(n=="right")return l.pos;const d=Se.get(l.node(-1)),c=l.start(-1),m=d.map.indexOf(l.pos-c);return m%d.width==0?-1:c+d.map[m-1]}function Qa(e,t,n){const s=t.clientX-e.startX;return Math.max(n,e.startWidth+s)}function Ol(e,t){e.dispatch(e.state.tr.setMeta(Qe,{setHandle:t}))}function Py(e,t,n){const s=e.state.doc.resolve(t),r=s.node(-1),a=Se.get(r),o=s.start(-1),l=a.colCount(s.pos-o)+s.nodeAfter.attrs.colspan-1,d=e.state.tr;for(let c=0;c<a.height;c++){const m=c*a.width+l;if(c&&a.map[m]==a.map[m-a.width])continue;const u=a.map[m],f=r.nodeAt(u).attrs,p=f.colspan==1?0:l-a.colCount(u);if(f.colwidth&&f.colwidth[p]==n)continue;const g=f.colwidth?f.colwidth.slice():By(f.colspan);g[p]=n,d.setNodeMarkup(o+u,null,{...f,colwidth:g})}d.docChanged&&e.dispatch(d)}function Za(e,t,n,s){const r=e.state.doc.resolve(t),a=r.node(-1),o=r.start(-1),l=Se.get(a).colCount(r.pos-o)+r.nodeAfter.attrs.colspan-1;let d=e.domAtPos(r.start(-1)).node;for(;d&&d.nodeName!="TABLE";)d=d.parentNode;d&&li(a,d.firstChild,d,s,l,n)}function By(e){return Array(e).fill(0)}function Hy(e,t){var n;const s=[],r=e.doc.resolve(t),a=r.node(-1);if(!a)return qt.empty;const o=Se.get(a),l=r.start(-1),d=o.colCount(r.pos-l)+r.nodeAfter.attrs.colspan-1;for(let c=0;c<o.height;c++){const m=d+c*o.width;if((d==o.width-1||o.map[m]!=o.map[m+1])&&(c==0||o.map[m]!=o.map[m-o.width])){const u=o.map[m],f=l+u+a.nodeAt(u).nodeSize-1,p=document.createElement("div");p.className="column-resize-handle",(n=Qe.getState(e))!=null&&n.dragging&&s.push(Gt.node(l+u,l+u+a.nodeAt(u).nodeSize,{class:"column-resize-dragging"})),s.push(Gt.widget(f,p))}}return qt.create(e.doc,s)}function Fy({allowTableNodeSelection:e=!1}={}){return new Ue({key:$t,state:{init(){return null},apply(t,n){const s=t.getMeta($t);if(s!=null)return s==-1?null:s;if(n==null||!t.docChanged)return n;const{deleted:r,pos:a}=t.mapping.mapResult(n);return r?null:a}},props:{decorations:ny,handleDOMEvents:{mousedown:My},createSelectionBetween(t){return $t.getState(t.state)!=null?t.state.selection:null},handleTripleClick:Ey,handleKeyDown:Ay,handlePaste:Ry},appendTransaction(t,n,s){return iy(s,Dl(s,n),e)}})}var ql=Ie.create({name:"tableCell",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?t.split(",").map(s=>parseInt(s,10)):null}}}},tableRole:"cell",isolating:!0,parseHTML(){return[{tag:"td"}]},renderHTML({HTMLAttributes:e}){return["td",_e(this.options.HTMLAttributes,e),0]}}),zl=Ie.create({name:"tableHeader",addOptions(){return{HTMLAttributes:{}}},content:"block+",addAttributes(){return{colspan:{default:1},rowspan:{default:1},colwidth:{default:null,parseHTML:e=>{const t=e.getAttribute("colwidth");return t?t.split(",").map(s=>parseInt(s,10)):null}}}},tableRole:"header_cell",isolating:!0,parseHTML(){return[{tag:"th"}]},renderHTML({HTMLAttributes:e}){return["th",_e(this.options.HTMLAttributes,e),0]}}),Pl=Ie.create({name:"tableRow",addOptions(){return{HTMLAttributes:{}}},content:"(tableCell | tableHeader)*",tableRole:"row",parseHTML(){return[{tag:"tr"}]},renderHTML({HTMLAttributes:e}){return["tr",_e(this.options.HTMLAttributes,e),0]}});function ci(e,t){return t?["width",`${Math.max(t,e)}px`]:["min-width",`${e}px`]}function eo(e,t,n,s,r,a){var o;let l=0,d=!0,c=t.firstChild;const m=e.firstChild;if(m!==null)for(let u=0,f=0;u<m.childCount;u+=1){const{colspan:p,colwidth:g}=m.child(u).attrs;for(let b=0;b<p;b+=1,f+=1){const h=r===f?a:g&&g[b],x=h?`${h}px`:"";if(l+=h||s,h||(d=!1),c){if(c.style.width!==x){const[y,j]=ci(s,h);c.style.setProperty(y,j)}c=c.nextSibling}else{const y=document.createElement("col"),[j,N]=ci(s,h);y.style.setProperty(j,N),t.appendChild(y)}}}for(;c;){const u=c.nextSibling;(o=c.parentNode)==null||o.removeChild(c),c=u}d?(n.style.width=`${l}px`,n.style.minWidth=""):(n.style.width="",n.style.minWidth=`${l}px`)}var Wy=class{constructor(e,t){this.node=e,this.cellMinWidth=t,this.dom=document.createElement("div"),this.dom.className="tableWrapper",this.table=this.dom.appendChild(document.createElement("table")),this.colgroup=this.table.appendChild(document.createElement("colgroup")),eo(e,this.colgroup,this.table,t),this.contentDOM=this.table.appendChild(document.createElement("tbody"))}update(e){return e.type!==this.node.type?!1:(this.node=e,eo(e,this.colgroup,this.table,this.cellMinWidth),!0)}ignoreMutation(e){return e.type==="attributes"&&(e.target===this.table||this.colgroup.contains(e.target))}};function Uy(e,t,n,s){let r=0,a=!0;const o=[],l=e.firstChild;if(!l)return{};for(let u=0,f=0;u<l.childCount;u+=1){const{colspan:p,colwidth:g}=l.child(u).attrs;for(let b=0;b<p;b+=1,f+=1){const h=n===f?s:g&&g[b];r+=h||t,h||(a=!1);const[x,y]=ci(t,h);o.push(["col",{style:`${x}: ${y}`}])}}const d=a?`${r}px`:"",c=a?"":`${r}px`;return{colgroup:["colgroup",{},...o],tableWidth:d,tableMinWidth:c}}function to(e,t){return e.createAndFill()}function Vy(e){if(e.cached.tableNodeTypes)return e.cached.tableNodeTypes;const t={};return Object.keys(e.nodes).forEach(n=>{const s=e.nodes[n];s.spec.tableRole&&(t[s.spec.tableRole]=s)}),e.cached.tableNodeTypes=t,t}function Ky(e,t,n,s,r){const a=Vy(e),o=[],l=[];for(let c=0;c<n;c+=1){const m=to(a.cell);if(m&&l.push(m),s){const u=to(a.header_cell);u&&o.push(u)}}const d=[];for(let c=0;c<t;c+=1)d.push(a.row.createChecked(null,s&&c===0?o:l));return a.table.createChecked(null,d)}function Jy(e){return e instanceof xe}var fs=({editor:e})=>{const{selection:t}=e.state;if(!Jy(t))return!1;let n=0;const s=Yd(t.ranges[0].$from,a=>a.type.name==="table");return s?.node.descendants(a=>{if(a.type.name==="table")return!1;["tableCell","tableHeader"].includes(a.type.name)&&(n+=1)}),n===t.ranges.length?(e.commands.deleteTable(),!0):!1},Bl=Ie.create({name:"table",addOptions(){return{HTMLAttributes:{},resizable:!1,handleWidth:5,cellMinWidth:25,View:Wy,lastColumnResizable:!0,allowTableNodeSelection:!1}},content:"tableRow+",tableRole:"table",isolating:!0,group:"block",parseHTML(){return[{tag:"table"}]},renderHTML({node:e,HTMLAttributes:t}){const{colgroup:n,tableWidth:s,tableMinWidth:r}=Uy(e,this.options.cellMinWidth);return["table",_e(this.options.HTMLAttributes,t,{style:s?`width: ${s}`:`min-width: ${r}`}),n,["tbody",0]]},addCommands(){return{insertTable:({rows:e=3,cols:t=3,withHeaderRow:n=!0}={})=>({tr:s,dispatch:r,editor:a})=>{const o=Ky(a.schema,e,t,n);if(r){const l=s.selection.from+1;s.replaceSelectionWith(o).scrollIntoView().setSelection(Pe.near(s.doc.resolve(l)))}return!0},addColumnBefore:()=>({state:e,dispatch:t})=>ly(e,t),addColumnAfter:()=>({state:e,dispatch:t})=>cy(e,t),deleteColumn:()=>({state:e,dispatch:t})=>uy(e,t),addRowBefore:()=>({state:e,dispatch:t})=>fy(e,t),addRowAfter:()=>({state:e,dispatch:t})=>py(e,t),deleteRow:()=>({state:e,dispatch:t})=>gy(e,t),deleteTable:()=>({state:e,dispatch:t})=>Ny(e,t),mergeCells:()=>({state:e,dispatch:t})=>Fa(e,t),splitCell:()=>({state:e,dispatch:t})=>Wa(e,t),toggleHeaderColumn:()=>({state:e,dispatch:t})=>Un("column")(e,t),toggleHeaderRow:()=>({state:e,dispatch:t})=>Un("row")(e,t),toggleHeaderCell:()=>({state:e,dispatch:t})=>vy(e,t),mergeOrSplit:()=>({state:e,dispatch:t})=>Fa(e,t)?!0:Wa(e,t),setCellAttribute:(e,t)=>({state:n,dispatch:s})=>yy(e,t)(n,s),goToNextCell:()=>({state:e,dispatch:t})=>Va(1)(e,t),goToPreviousCell:()=>({state:e,dispatch:t})=>Va(-1)(e,t),fixTables:()=>({state:e,dispatch:t})=>(t&&Dl(e),!0),setCellSelection:e=>({tr:t,dispatch:n})=>{if(n){const s=xe.create(t.doc,e.anchorCell,e.headCell);t.setSelection(s)}return!0}}},addKeyboardShortcuts(){return{Tab:()=>this.editor.commands.goToNextCell()?!0:this.editor.can().addRowAfter()?this.editor.chain().addRowAfter().goToNextCell().run():!1,"Shift-Tab":()=>this.editor.commands.goToPreviousCell(),Backspace:fs,"Mod-Backspace":fs,Delete:fs,"Mod-Delete":fs}},addProseMirrorPlugins(){return[...this.options.resizable&&this.editor.isEditable?[Dy({handleWidth:this.options.handleWidth,cellMinWidth:this.options.cellMinWidth,defaultCellMinWidth:this.options.cellMinWidth,View:this.options.View,lastColumnResizable:this.options.lastColumnResizable})]:[],Fy({allowTableNodeSelection:this.options.allowTableNodeSelection})]},extendNodeSchema(e){const t={name:e.name,options:e.options,storage:e.storage};return{tableRole:Co(ko(e,"tableRole",t))}}});Ke.create({name:"tableKit",addExtensions(){const e=[];return this.options.table!==!1&&e.push(Bl.configure(this.options.table)),this.options.tableCell!==!1&&e.push(ql.configure(this.options.tableCell)),this.options.tableHeader!==!1&&e.push(zl.configure(this.options.tableHeader)),this.options.tableRow!==!1&&e.push(Pl.configure(this.options.tableRow)),e}});var Gy=/(?:^|\s)(!\[(.+|:?)]\((\S+)(?:(?:\s+)["'](\S+)["'])?\))$/,Yy=Ie.create({name:"image",addOptions(){return{inline:!1,allowBase64:!1,HTMLAttributes:{}}},inline(){return this.options.inline},group(){return this.options.inline?"inline":"block"},draggable:!0,addAttributes(){return{src:{default:null},alt:{default:null},title:{default:null},width:{default:null},height:{default:null}}},parseHTML(){return[{tag:this.options.allowBase64?"img[src]":'img[src]:not([src^="data:"])'}]},renderHTML({HTMLAttributes:e}){return["img",_e(this.options.HTMLAttributes,e)]},addCommands(){return{setImage:e=>({commands:t})=>t.insertContent({type:this.name,attrs:e})}},addInputRules(){return[jo({find:Gy,type:this.type,getAttributes:e=>{const[,,t,n,s]=e;return{src:n,alt:t,title:s}}})]}}),Xy=Yy;const Qy=Ke.create({name:"fontSize",addOptions(){return{types:["textStyle"]}},addGlobalAttributes(){return[{types:this.options.types,attributes:{fontSize:{default:null,parseHTML:e=>e.style.fontSize.replace(/['"]+/g,""),renderHTML:e=>e.fontSize?{style:`font-size: ${e.fontSize}`}:{}}}}]},addCommands(){return{setFontSize:e=>({chain:t})=>t().setMark("textStyle",{fontSize:e}).run(),unsetFontSize:()=>({chain:e})=>e().setMark("textStyle",{fontSize:null}).removeEmptyTextStyle().run()}}}),er=({label:e,value:t="",onChange:n,error:s,touched:r,placeholder:a,isRequired:o=!1,className:l})=>{const{user:d}=A(v=>v.auth),c=O1({extensions:[x1.configure({heading:{levels:[1,2,3,4,5,6]}}),Jx,V1.configure({types:["heading","paragraph"]}),Dx.configure({openOnClick:!1,HTMLAttributes:{class:"text-primary underline cursor-pointer hover:text-primary/80"}}),Xd,Qd,Qy,W1.configure({multicolor:!0}),Zy.configure({HTMLAttributes:{class:"max-w-full h-auto rounded-lg"}}),Bl.configure({resizable:!0}),Pl,zl,ql],content:t,onUpdate:({editor:v})=>{const w=v.getHTML();n?.(w)},editorProps:{attributes:{class:be("prose prose-sm sm:prose-base lg:prose-lg xl:prose-xl max-w-none","focus:outline-none min-h-[200px] p-4","prose-headings:text-foreground prose-headings:font-bold prose-headings:leading-tight","prose-h1:text-3xl prose-h1:mb-4 prose-h1:mt-6","prose-h2:text-2xl prose-h2:mb-3 prose-h2:mt-5","prose-h3:text-xl prose-h3:mb-3 prose-h3:mt-4","prose-h4:text-lg prose-h4:mb-2 prose-h4:mt-4","prose-h5:text-base prose-h5:mb-2 prose-h5:mt-3","prose-h6:text-sm prose-h6:mb-2 prose-h6:mt-3 prose-h6:font-semibold","prose-p:text-foreground prose-p:my-2 prose-p:leading-relaxed","prose-ul:text-foreground prose-ul:my-2 prose-ol:text-foreground prose-ol:my-2","prose-li:text-foreground prose-li:my-1","prose-blockquote:border-l-4 prose-blockquote:border-border prose-blockquote:pl-4","prose-blockquote:text-muted-foreground prose-blockquote:italic prose-blockquote:my-4","prose-code:bg-muted prose-code:text-muted-foreground prose-code:px-1 prose-code:py-0.5","prose-code:rounded prose-code:text-sm prose-code:font-mono","prose-strong:text-foreground prose-strong:font-bold","prose-em:text-foreground prose-em:italic")}}});C.useEffect(()=>{c&&t!==c.getHTML()&&c.commands.setContent(t)},[t,c]),C.useEffect(()=>{if(!c)return;const v=({transaction:w})=>{const k=[],E=[];w.before?.descendants?.(T=>{T.type.name==="image"&&k.push(T.attrs)}),w.doc?.descendants?.(T=>{T.type.name==="image"&&E.push(T.attrs)}),k.filter(T=>!E.some(I=>I.src===T.src)).forEach(async T=>{const I=T["data-image-id"];if(I&&d?.organisation_id)try{await nu(d.organisation_id,I)}catch(L){console.error("Image deletion failed:",L)}})};return c.on("transaction",v),()=>c.off("transaction",v)},[c,d]);const m=C.useCallback(()=>{const v=c?.getAttributes("link").href,w=window.prompt("URL",v);if(w!==null){if(w===""){c?.chain().focus().extendMarkRange("link").unsetLink().run();return}c?.chain().focus().extendMarkRange("link").setLink({href:w}).run()}},[c]),u=C.useCallback(()=>{const v=document.createElement("input");v.type="file",v.accept="image/*",v.onchange=async w=>{const k=w.target.files?.[0];if(!k||!d?.organisation_id)return;const E=new FormData;E.append("image",k);try{const{id:R,image:T}=await Zd(d.organisation_id,E);c?.chain().focus().setImage({src:yi(T),"data-image-id":R}).run()}catch(R){console.error("Upload failed:",R)}},v.click()},[c,d]),f=C.useCallback(()=>{c?.chain().focus().insertTable({rows:3,cols:3,withHeaderRow:!0}).run()},[c]),p=C.useCallback(()=>{c?.chain().focus().addRowBefore().run()},[c]),g=C.useCallback(()=>{c?.chain().focus().addRowAfter().run()},[c]),b=C.useCallback(()=>{c?.chain().focus().deleteRow().run()},[c]),h=C.useCallback(()=>{c?.chain().focus().addColumnBefore().run()},[c]),x=C.useCallback(()=>{c?.chain().focus().addColumnAfter().run()},[c]),y=C.useCallback(()=>{c?.chain().focus().deleteColumn().run()},[c]),j=C.useCallback(()=>{c?.chain().focus().deleteTable().run()},[c]);if(!c)return null;const N=({onClick:v,isActive:w=!1,disabled:k=!1,children:E,title:R})=>{const T=M=>{M.preventDefault(),M.stopPropagation(),v()},I=M=>{M.preventDefault()},L=be("inline-flex items-center justify-center h-8 w-8 p-0 rounded-sm border transition-colors","hover:bg-accent hover:text-accent-foreground","disabled:opacity-50 disabled:cursor-not-allowed","focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",w?"bg-primary text-primary-foreground border-primary":"bg-background text-foreground border-input hover:bg-accent hover:text-accent-foreground");return i.jsx("button",{type:"button",onClick:T,onMouseDown:I,disabled:k,title:R,className:L,children:E})},_=({type:v})=>{const w=["#000000","#374151","#6B7280","#9CA3AF","#EF4444","#F97316","#EAB308","#22C55E","#3B82F6","#8B5CF6","#EC4899","#F43F5E"];return i.jsxs(Yi,{children:[i.jsx(Xi,{asChild:!0,children:i.jsx(me,{variant:"outline",size:"sm",className:"h-8 w-8 p-0 bg-transparent",children:v==="color"?i.jsx(Tm,{className:"h-4 w-4"}):i.jsx(wm,{className:"h-4 w-4"})})}),i.jsxs(Qi,{className:"w-48 p-2",children:[i.jsx("div",{className:"grid grid-cols-4 gap-1",children:w.map(k=>i.jsx("button",{className:"w-8 h-8 rounded border border-border hover:scale-110 transition-transform",style:{backgroundColor:k},onClick:()=>{v==="color"?c.chain().focus().setColor(k).run():c.chain().focus().setHighlight({color:k}).run()}},k))}),i.jsx(fe,{className:"my-2"}),i.jsxs(me,{variant:"outline",size:"sm",className:"w-full bg-transparent",onClick:()=>{v==="color"?c.chain().focus().unsetColor().run():c.chain().focus().unsetHighlight().run()},children:["Remove ",v==="color"?"Color":"Highlight"]})]})]})},S=()=>{const v=[{label:"10px",value:"10px"},{label:"12px",value:"12px"},{label:"14px",value:"14px"},{label:"16px",value:"16px"},{label:"18px",value:"18px"},{label:"20px",value:"20px"},{label:"24px",value:"24px"},{label:"28px",value:"28px"},{label:"32px",value:"32px"},{label:"36px",value:"36px"},{label:"48px",value:"48px"}],[,w]=C.useReducer(R=>R+1,0);C.useEffect(()=>{if(!c)return;const R=()=>w();return c.on("selectionUpdate",R),c.on("transaction",R),()=>{c.off("selectionUpdate",R),c.off("transaction",R)}},[]);const k=c?.getAttributes("textStyle")?.fontSize||"",E=R=>{R==="default"?c.chain().focus().unsetFontSize().run():c.chain().focus().setFontSize(R).run()};return i.jsxs(Vi,{value:k,onValueChange:E,children:[i.jsx(Ki,{className:"w-20 h-8 text-xs",onMouseDown:R=>R.preventDefault(),children:i.jsx(Ji,{placeholder:"Size"})}),i.jsxs(Gi,{children:[i.jsx(jt,{value:"default",children:"Default"}),v.map(R=>i.jsx(jt,{value:R.value,children:R.label},R.value))]})]})};return i.jsxs("div",{className:be("space-y-2",l),children:[e&&i.jsxs(Be,{className:"text-sm font-medium",children:[e,o&&i.jsx("span",{className:"text-destructive ml-1",children:"*"})]}),i.jsxs("div",{className:be("border rounded-lg overflow-hidden bg-background",s&&r?"border-destructive":"border-border","focus-within:border-ring"),children:[i.jsxs("div",{className:"border-b bg-muted/30 p-1.5 flex flex-wrap gap-0.5 leading-none",children:[i.jsxs("div",{className:"flex gap-1",children:[i.jsx(N,{onClick:()=>c.chain().focus().toggleBold().run(),isActive:c.isActive("bold"),title:"Bold",children:i.jsx(hm,{className:"h-4 w-4"})}),i.jsx(N,{onClick:()=>c.chain().focus().toggleItalic().run(),isActive:c.isActive("italic"),title:"Italic",children:i.jsx(Cm,{className:"h-4 w-4"})}),i.jsx(N,{onClick:()=>c.chain().focus().toggleUnderline().run(),isActive:c.isActive("underline"),title:"Underline",children:i.jsx(Qm,{className:"h-4 w-4"})}),i.jsx(N,{onClick:()=>c.chain().focus().toggleStrike().run(),isActive:c.isActive("strike"),title:"Strikethrough",children:i.jsx(Pm,{className:"h-4 w-4"})}),i.jsx(N,{onClick:()=>c.chain().focus().toggleCode().run(),isActive:c.isActive("code"),title:"Code",children:i.jsx(ym,{className:"h-4 w-4"})})]}),i.jsx(fe,{orientation:"vertical",className:"h-8"}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx(_,{type:"color"}),i.jsx(_,{type:"highlight"}),i.jsx(S,{})]}),i.jsx(fe,{orientation:"vertical",className:"h-8"}),i.jsx("div",{className:"flex gap-1",children:i.jsxs(Vi,{value:c.isActive("heading",{level:1})?"h1":c.isActive("heading",{level:2})?"h2":c.isActive("heading",{level:3})?"h3":c.isActive("heading",{level:4})?"h4":c.isActive("heading",{level:5})?"h5":c.isActive("heading",{level:6})?"h6":"paragraph",onValueChange:v=>{if(v==="paragraph")c.chain().focus().setParagraph().run();else{const w=Number.parseInt(v.replace("h",""));c.chain().focus().toggleHeading({level:w}).run()}},children:[i.jsx(Ki,{className:"w-24 h-8",children:i.jsx(Ji,{})}),i.jsxs(Gi,{children:[i.jsx(jt,{value:"paragraph",children:"P"}),i.jsx(jt,{value:"h1",children:"H1"}),i.jsx(jt,{value:"h2",children:"H2"}),i.jsx(jt,{value:"h3",children:"H3"}),i.jsx(jt,{value:"h4",children:"H4"}),i.jsx(jt,{value:"h5",children:"H5"}),i.jsx(jt,{value:"h6",children:"H6"})]})]})}),i.jsx(fe,{orientation:"vertical",className:"h-8"}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx(N,{onClick:()=>c.chain().focus().setTextAlign("left").run(),isActive:c.isActive({textAlign:"left"}),title:"Align Left",children:i.jsx(Ym,{className:"h-4 w-4"})}),i.jsx(N,{onClick:()=>c.chain().focus().setTextAlign("center").run(),isActive:c.isActive({textAlign:"center"}),title:"Align Center",children:i.jsx(Wm,{className:"h-4 w-4"})}),i.jsx(N,{onClick:()=>c.chain().focus().setTextAlign("right").run(),isActive:c.isActive({textAlign:"right"}),title:"Align Right",children:i.jsx(Vm,{className:"h-4 w-4"})}),i.jsx(N,{onClick:()=>c.chain().focus().setTextAlign("justify").run(),isActive:c.isActive({textAlign:"justify"}),title:"Justify",children:i.jsx(Jm,{className:"h-4 w-4"})})]}),i.jsx(fe,{orientation:"vertical",className:"h-8"}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx(N,{onClick:()=>c.chain().focus().toggleBulletList().run(),isActive:c.isActive("bulletList"),title:"Bullet List",children:i.jsx(eu,{className:"h-4 w-4"})}),i.jsx(N,{onClick:()=>c.chain().focus().toggleOrderedList().run(),isActive:c.isActive("orderedList"),title:"Numbered List",children:i.jsx(Rm,{className:"h-4 w-4"})}),i.jsx(N,{onClick:()=>c.chain().focus().toggleBlockquote().run(),isActive:c.isActive("blockquote"),title:"Blockquote",children:i.jsx(Im,{className:"h-4 w-4"})})]}),i.jsx(fe,{orientation:"vertical",className:"h-8"}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx(N,{onClick:m,isActive:c.isActive("link"),title:"Add Link",children:i.jsx(Am,{className:"h-4 w-4"})}),i.jsx(N,{onClick:()=>c.chain().focus().unsetLink().run(),disabled:!c.isActive("link"),title:"Remove Link",children:i.jsx(nf,{className:"h-4 w-4"})}),i.jsx(N,{onClick:u,title:"Upload Image",children:i.jsx(tu,{className:"h-4 w-4"})}),i.jsx(N,{onClick:f,title:"Insert Table",children:i.jsx(Hm,{className:"h-4 w-4"})}),c.isActive("table")&&i.jsxs(i.Fragment,{children:[i.jsx(fe,{orientation:"vertical",className:"h-8"}),i.jsx("div",{className:"flex gap-1",children:i.jsxs(Yi,{children:[i.jsx(Xi,{asChild:!0,children:i.jsx(me,{variant:"outline",size:"sm",className:"h-8 px-2 bg-transparent",children:"Table"})}),i.jsx(Qi,{className:"w-48 p-2",children:i.jsxs("div",{className:"space-y-1",children:[i.jsx(me,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:p,children:"Add Row Before"}),i.jsx(me,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:g,children:"Add Row After"}),i.jsx(me,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:b,children:"Delete Row"}),i.jsx(fe,{className:"my-1"}),i.jsx(me,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:h,children:"Add Column Before"}),i.jsx(me,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:x,children:"Add Column After"}),i.jsx(me,{variant:"ghost",size:"sm",className:"w-full justify-start",onClick:y,children:"Delete Column"}),i.jsx(fe,{className:"my-1"}),i.jsx(me,{variant:"ghost",size:"sm",className:"w-full justify-start text-destructive hover:text-destructive",onClick:j,children:"Delete Table"})]})})]})})]})]}),i.jsx(fe,{orientation:"vertical",className:"h-8"}),i.jsxs("div",{className:"flex gap-1",children:[i.jsx(N,{onClick:()=>c.chain().focus().undo().run(),disabled:!c.can().undo(),title:"Undo",children:i.jsx(ef,{className:"h-4 w-4"})}),i.jsx(N,{onClick:()=>c.chain().focus().redo().run(),disabled:!c.can().redo(),title:"Redo",children:i.jsx($m,{className:"h-4 w-4"})})]})]}),i.jsx("div",{className:"min-h-[200px] max-h-[400px] overflow-y-auto",children:i.jsx(R1,{editor:c,placeholder:a,className:"focus:outline-none"})})]}),s&&r&&i.jsx("p",{className:"text-sm text-destructive",children:s})]})},Zy=Xy.extend({addAttributes(){return{...this.parent?.(),"data-image-id":{default:null,parseHTML:e=>e.getAttribute("data-image-id"),renderHTML:e=>e["data-image-id"]?{"data-image-id":e["data-image-id"]}:{}}}}}),e_=le({job_title:D().required("Job title is required").max(100,"Job title must be at most 100 characters"),company_id:D().required("Company is required"),department_id:D().required("Department is required"),job_type:D().required("Job type is required"),location:D().nullable().notRequired(),vacancy:pe().required("Number of vacancies is required").min(1,"Number of vacancies can't be less than 1").typeError("Number of vacancies must be a valid number"),salary:D().nullable(),application_deadline:Ze().nullable().notRequired().typeError("Invalid date format"),position:D().nullable().max(100,"Position must be at most 100 characters"),job_requirement:D().nullable().notRequired(),job_description:D().nullable().notRequired()}),t_=le({job_title:D().required("Job title is required").max(100,"Job title must be at most 100 characters"),company_id:D().required("Company is required"),department_id:D().required("Department is required"),job_type:D().required("Job type is required"),location:D().nullable().notRequired(),vacancy:pe().required("Number of vacancies is required").min(1,"Number of vacancies can't be less than 1").typeError("Number of vacancies must be a valid number"),salary:D().nullable(),application_deadline:Ze().nullable().notRequired().typeError("Invalid date format"),position:D().nullable().max(100,"Position must be at most 100 characters"),job_requirement:D().nullable().notRequired(),job_description:D().nullable().notRequired()}),n_=()=>{const e=H.c(23),t=V(),{user:n}=A(s_),{companies:s}=A(r_),{departments:r}=A(i_),[a,o]=C.useState("publish");let l;e[0]!==s||e[1]!==r||e[2]!==t||e[3]!==n?.organisation_id?(l=()=>{s||zt(n?.organisation_id,t),r||Pt(n?.organisation_id,t)},e[0]=s,e[1]=r,e[2]=t,e[3]=n?.organisation_id,e[4]=l):l=e[4];let d;e[5]===Symbol.for("react.memo_cache_sentinel")?(d=[],e[5]=d):d=e[5],C.useEffect(l,d);let c;e[6]!==s?(c=he(s,"name","id"),e[6]=s,e[7]=c):c=e[7];const m=c;let u;e[8]!==r?(u=he(r,"name","id"),e[8]=r,e[9]=u):u=e[9];const f=u;let p;e[10]===Symbol.for("react.memo_cache_sentinel")?(p={job_title:"",company_id:"",department_id:"",job_type:"",location:"",vacancy:1,salary:"",application_deadline:new Date,position:"",job_requirement:"",job_description:"",status:4},e[10]=p):p=e[10];const g=p;let b;e[11]!==t||e[12]!==a||e[13]!==n?.organisation_id?(b=(N,_)=>{const{setSubmitting:S}=_,v={...N,status:a==="publish"?1:4,application_deadline:ve(N.application_deadline,"yyyy-MM-dd")};v.salary||delete v.salary,v.position||delete v.position,su(n?.organisation_id,v,t).then(()=>{t(J())}).catch(()=>{S(!1)})},e[11]=t,e[12]=a,e[13]=n?.organisation_id,e[14]=b):b=e[14];const h=b;let x;e[15]===Symbol.for("react.memo_cache_sentinel")?(x=i.jsxs("div",{className:"-mt-6 mb-8",children:[i.jsx(Eo,{className:"mx-auto size-14 drop-shadow-md"}),i.jsx("h2",{className:"text-center text-xl font-medium mt-2",children:"Add Job Posting"})]}),e[15]=x):x=e[15];let y;e[16]!==m||e[17]!==f||e[18]!==t?(y=N=>{const{values:_,errors:S,touched:v,handleChange:w,handleSubmit:k,setFieldValue:E,isSubmitting:R}=N;return i.jsxs("form",{onSubmit:k,className:"my-1 grid grid-cols-1 space-y-4 gap-x-4 md:grid-cols-2 -mt-4",children:[i.jsx(te,{fieldName:"job_title",label:"job title",value:_.job_title,error:S.job_title,touched:v.job_title,handleChange:w,placeholder:"Enter job title",isRequired:!0}),i.jsx(Q,{options:m,fieldName:"company_id",label:"Company",value:_.company_id,error:S.company_id,touched:v.company_id,setFieldValue:E,placeholder:"Select company"}),i.jsx(Q,{options:f,fieldName:"department_id",label:"Department",value:_.department_id,error:S.department_id,touched:v.department_id,setFieldValue:E,placeholder:"Select department"}),i.jsx(Q,{options:zr,fieldName:"job_type",label:"Job Type",value:_.job_type,error:S.job_type,touched:v.job_type,setFieldValue:E,placeholder:"Select job type"}),i.jsx(te,{fieldName:"location",label:"location",value:_.location,error:S.location,touched:v.location,handleChange:w,placeholder:"Enter location (optional)",isRequired:!1}),i.jsx(te,{fieldName:"vacancy",label:"number of vacancies",value:_.vacancy,error:S.vacancy,touched:v.vacancy,handleChange:w,placeholder:"Enter number of vacancies",type:"number",isRequired:!0}),i.jsx(Q,{options:Pr,fieldName:"salary",label:"Salary Range",value:_.salary,error:S.salary,touched:v.salary,setFieldValue:E,placeholder:"Select salary range",isRequired:!1}),i.jsx(et,{fieldName:"application_deadline",label:"application deadline",error:S.application_deadline,touched:v.application_deadline,date:_.application_deadline,setDate:T=>E("application_deadline",T),isRequired:!1}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(te,{fieldName:"position",label:"position",value:_.position,error:S.position,touched:v.position,handleChange:w,placeholder:"Enter position name",isRequired:!1})}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(er,{label:"Job Requirements",value:_.job_requirement,onChange:T=>E("job_requirement",T),error:S.job_requirement,touched:v.job_requirement,placeholder:"Enter job requirements, qualifications, and skills needed...",isRequired:!1})}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(er,{label:"Job Description",value:_.job_description,onChange:T=>E("job_description",T),error:S.job_description,touched:v.job_description,placeholder:"Enter detailed job description, responsibilities, and duties...",isRequired:!1})}),i.jsx("div",{className:"md:col-span-2",children:i.jsxs("div",{className:"mt-6 grid md:grid-cols-3 gap-4",children:[i.jsxs(me,{variant:"secondary",type:"button",className:"border/50 border bg-white dark:bg-white/5",disabled:R,onClick:()=>t(J()),children:[i.jsx(Vt,{className:"-ms-1 opacity-80",size:16,"aria-hidden":"true"}),"Cancel"]}),i.jsxs(me,{variant:"outline",disabled:R,type:"submit",onClick:()=>o("draft"),children:[R?i.jsx(zn,{className:"-ms-1 animate-spin opacity-80",size:16}):i.jsx(qm,{className:"-ms-1 opacity-80",size:16}),"Save to Draft"]}),i.jsxs(me,{disabled:R,type:"submit",onClick:()=>o("publish"),children:[R?i.jsx(zn,{className:"-ms-1 animate-spin opacity-80",size:16}):i.jsx(Xt,{className:"-ms-1 opacity-80",size:16}),"Publish"]})]})})]})},e[16]=m,e[17]=f,e[18]=t,e[19]=y):y=e[19];let j;return e[20]!==h||e[21]!==y?(j=i.jsxs("section",{children:[x,i.jsx(ce,{initialValues:g,onSubmit:h,validationSchema:e_,children:y})]}),e[20]=h,e[21]=y,e[22]=j):j=e[22],j};function s_(e){return e.auth}function r_(e){return e.company}function i_(e){return e.department}const a_=()=>{const e=H.c(7),t=V(),{user:n}=A(o_),s=A(l_);let r;e[0]!==t||e[1]!==s?.id||e[2]!==n?.organisation_id?(r=function(){ru(n?.organisation_id,s?.id,t).then(()=>{t(J())})},e[0]=t,e[1]=s?.id,e[2]=n?.organisation_id,e[3]=r):r=e[3];const a=r;let o;e[4]===Symbol.for("react.memo_cache_sentinel")?(o=i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[i.jsx(ze,{className:"text-destructive size-10"}),i.jsx("h2",{className:"text-xl font-semibold",children:"Archive Job Post"}),i.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Are you sure you want to archive this job post? This action cannot be undone. Make sure you have backed up any necessary information before proceeding."})]}),e[4]=o):o=e[4];let l;return e[5]!==a?(l=i.jsxs("div",{className:"-mt-4 text-center",children:[o,i.jsx(ke,{handleConfirm:a})]}),e[5]=a,e[6]=l):l=e[6],l};function o_(e){return e.auth}function l_(e){return e.dialog.props}const no=e=>{const t=document.createElement("textarea");return t.innerHTML=e,t.innerHTML=t.value,t.value},c_=()=>{const e=V(),{user:t}=A(c=>c.auth),n=A(c=>c.dialog.props),{companies:s}=A(c=>c.company),{departments:r}=A(c=>c.department);C.useEffect(()=>{s||zt(t?.organisation_id,e),r||Pt(t?.organisation_id,e)},[]);const a=C.useMemo(()=>he(s,"name","id"),[s]),o=C.useMemo(()=>he(r,"name","id"),[r]),l={job_title:n.job_title||"",company_id:a?.find(c=>c.label===n?.company)?.value||"",department_id:o?.find(c=>c.label===n?.department)?.value||"",job_type:zr?.find(c=>c.label===n?.job_type).value||"",location:n.location||"",vacancy:n.vacancy||0,salary:n.salary?Pr.find(c=>c.label===n?.salary).value:"",application_deadline:n.application_deadline||new Date,position:n.position||"",job_requirement:no(n.job_requirement)||"",job_description:no(n.job_description)||"",status:iu.find(c=>c.label===n.status)?.value},d=(c,{setSubmitting:m})=>{const u={...c,application_deadline:ve(c.application_deadline,"yyyy-MM-dd")};u.salary||delete u.salary,u.position||delete u.position,au(t?.organisation_id,n.id,u,e).then(()=>{e(J())}).catch(()=>{m(!1)})};return i.jsxs("section",{children:[i.jsxs("div",{className:"-mt-6 mb-8",children:[i.jsx(Eo,{className:"mx-auto size-14 drop-shadow-md"}),i.jsx("h2",{className:"text-center text-xl font-medium mt-2",children:"Edit Job Posting"})]}),i.jsx(ce,{initialValues:l,onSubmit:d,validationSchema:t_,children:({values:c,errors:m,touched:u,handleChange:f,handleSubmit:p,setFieldValue:g,isSubmitting:b})=>i.jsxs("form",{onSubmit:p,className:"my-1 grid grid-cols-1 space-y-4 gap-x-4 md:grid-cols-2 -mt-4",children:[i.jsx(te,{fieldName:"job_title",label:"job title",value:c.job_title,error:m.job_title,touched:u.job_title,handleChange:f,placeholder:"Enter job title",isRequired:!0}),i.jsx(Q,{options:a,fieldName:"company_id",label:"Company",value:c.company_id,error:m.company_id,touched:u.company_id,setFieldValue:g,placeholder:"Select company"}),i.jsx(Q,{options:o,fieldName:"department_id",label:"Department",value:c.department_id,error:m.department_id,touched:u.department_id,setFieldValue:g,placeholder:"Select department"}),i.jsx(Q,{options:zr,fieldName:"job_type",label:"Job Type",value:c.job_type,error:m.job_type,touched:u.job_type,setFieldValue:g,placeholder:"Select job type"}),i.jsx(te,{fieldName:"location",label:"location",value:c.location,error:m.location,touched:u.location,handleChange:f,placeholder:"Enter location (optional)",isRequired:!1}),i.jsx(te,{fieldName:"vacancy",label:"number of vacancies",value:c.vacancy,error:m.vacancy,touched:u.vacancy,handleChange:f,placeholder:"Enter number of vacancies",type:"number",isRequired:!0}),i.jsx(Q,{options:Pr,fieldName:"salary",label:"Salary Range",value:c.salary,error:m.salary,touched:u.salary,setFieldValue:g,placeholder:"Select salary range"}),i.jsx(et,{fieldName:"application_deadline",label:"application deadline",error:m.application_deadline,touched:u.application_deadline,date:c.application_deadline,setDate:h=>g("application_deadline",h),isRequired:!1}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(te,{fieldName:"position",label:"position",value:c.position,error:m.position,touched:u.position,handleChange:f,placeholder:"Enter position name",isRequired:!0})}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(er,{label:"Job Requirements",value:c.job_requirement,onChange:h=>g("job_requirement",h),error:m.job_requirement,touched:u.job_requirement,placeholder:"Enter job requirements, qualifications, and skills needed...",isRequired:!1})}),i.jsx("div",{className:"md:col-span-2",children:i.jsx(er,{label:"Job Description",value:c.job_description,onChange:h=>g("job_description",h),error:m.job_description,touched:u.job_description,placeholder:"Enter detailed job description, responsibilities, and duties...",isRequired:!1})}),i.jsx("div",{className:"md:col-span-2",children:i.jsxs("div",{className:"mt-6 grid grid-cols-2 gap-4",children:[i.jsxs(me,{variant:"secondary",type:"button",className:"border/50 border bg-white dark:bg-white/5",disabled:b,onClick:()=>e(J()),children:[i.jsx(Vt,{className:"-ms-1 opacity-80",size:16,"aria-hidden":"true"}),"Cancel"]}),i.jsxs(me,{disabled:b,type:"submit",children:[b?i.jsx(zn,{className:"-ms-1 animate-spin opacity-80",size:16,"aria-hidden":"true"}):i.jsx(Xt,{className:"-ms-1 opacity-80",size:16,"aria-hidden":"true"}),"Save"]})]})})]})})]})},d_=()=>{const e=H.c(24),t=V(),{user:n}=A(u_),s=A(m_),[r,a]=C.useState(!1),[o,l]=C.useState(s?.link||null);let d;e[0]!==t||e[1]!==s||e[2]!==n?(d=async()=>{try{const v=await ou(n.organisation_id,s.id,t);l(v)}catch(v){console.error("Failed to generate link:",v)}},e[0]=t,e[1]=s,e[2]=n,e[3]=d):d=e[3];const c=d;let m;e[4]===Symbol.for("react.memo_cache_sentinel")?(m=v=>{if(!navigator?.clipboard?.writeText){console.warn("Clipboard API not supported");return}navigator.clipboard.writeText(v),a(!0),setTimeout(()=>a(!1),2e3)},e[4]=m):m=e[4];const u=m,f=o||s?.link,p=f?.job_link_id,g=f?.expires_at;let b,h;e[5]===Symbol.for("react.memo_cache_sentinel")?(b=i.jsx("h2",{className:"text-xl font-semibold",children:"Share Your Job Post Publicly"}),h=i.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Share the link to invite others to view this job post."}),e[5]=b,e[6]=h):(b=e[5],h=e[6]);let x;e[7]===Symbol.for("react.memo_cache_sentinel")?(x=i.jsx("div",{className:"bg-primary/10 flex size-9 items-center justify-center rounded-md",children:i.jsx(Ro,{})}),e[7]=x):x=e[7];let y;e[8]!==f?.url||e[9]!==p?(y=i.jsx("div",{className:"flex-1 text-sm break-all",children:p?i.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:f?.url}):i.jsx("span",{className:"text-muted-foreground",children:"No link available"})}),e[8]=f?.url,e[9]=p,e[10]=y):y=e[10];let j;e[11]!==r||e[12]!==c||e[13]!==f?.url||e[14]!==p?(j=i.jsx("div",{children:p?i.jsxs(me,{variant:"outline",size:"sm",onClick:()=>u(f?.url),children:[i.jsx(To,{className:"mr-1 h-4 w-4"}),r?"Copied":"Copy"]}):i.jsx(me,{variant:"outline",size:"sm",onClick:c,children:"Generate"})}),e[11]=r,e[12]=c,e[13]=f?.url,e[14]=p,e[15]=j):j=e[15];let N;e[16]!==y||e[17]!==j?(N=i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[b,h,i.jsx("div",{className:"flex flex-col items-start gap-2 border rounded-md p-4 w-full max-w-3xl",children:i.jsxs("div",{className:"flex items-center gap-2 w-full",children:[x,y,j]})})]}),e[16]=y,e[17]=j,e[18]=N):N=e[18];let _;e[19]!==g?(_=g&&i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Expires at: ",ve(new Date(g),"MMM dd, yyyy hh:mm a")]}),e[19]=g,e[20]=_):_=e[20];let S;return e[21]!==N||e[22]!==_?(S=i.jsxs("div",{className:"-mt-4 text-center",children:[N,_]}),e[21]=N,e[22]=_,e[23]=S):S=e[23],S};function u_(e){return e.auth}function m_(e){return e.dialog.props}const f_=()=>{const e=H.c(3),t=A(p_);let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=i.jsx("h2",{className:"text-xl font-semibold text-center",children:"Number Methodology Result"}),e[0]=n):n=e[0];let s;return e[1]!==t?(s=i.jsxs("div",{children:[n,i.jsx(lu,{birthDate:t})]}),e[1]=t,e[2]=s):s=e[2],s};function p_(e){return e.dialog.props}const ps=5,Hl={1:["full_name","first_name","last_name","chinese_name","birth_date","race","race_others","religion","religion_others","religion_others","address","id_number","nationality","nationality_others","contact_number","nationality_others","email","epf_no","income_tax_no","photo"],2:["bank_name","bank_account_name","bank_account_no"],3:["emergency_contacts"],4:["company_assets"],5:["authorisation","accuracy_of_information","security_measures","dispute_resolution","ownership","responsibility","authorised_use","maintenance","security","return_of_assets","loss_or_damage","confidentiality","governing_law","acceptance_of_terms","acknowledgement","signature"]},h_=(e,t,n)=>{const s={};Hl[e]?.forEach(r=>{Array.isArray(n[r])?s[r]=n[r].map(a=>Object.keys(a).reduce((o,l)=>(o[l]=!0,o),{})):s[r]=!0}),t(s)};function g_(){const e=H.c(61),t=V(),[n,s]=C.useState(1),{user:r}=A(j_),{checklist:a}=A(v_);let o;e[0]!==a.race?(o=cu.find(ie=>ie.label===a.race),e[0]=a.race,e[1]=o):o=e[1];const l=o;let d;e[2]!==a.religion?(d=du.find(ie=>ie.label===a.religion),e[2]=a.religion,e[3]=d):d=e[3];const c=d;let m;e[4]!==a.nationality?(m=uu.find(ie=>ie.label===a.nationality),e[4]=a.nationality,e[5]=m):m=e[5];const u=m,f=a.full_name||"",p=a.first_name||"",g=a.last_name||"",b=a.chinese_name||"",h=a.birth_date||null,x=l?l.value:"99",y=l?"":a.race||"",j=c?c.value:"99",N=c?"":a.religion||"",_=a.address||"",S=a.id_number||"",v=u?u.value:"99",w=u?"":a.nationality||"",k=a.contact_number||"",E=a.email||"",R=a.epf_no||"",T=a.income_tax_no||"";let I;e[6]!==a.photo?(I=a?.photo?{id:"existing-photo",url:yi(a.photo)}:null,e[6]=a.photo,e[7]=I):I=e[7];const L=a.bank_name||"",M=a.bank_account_name||"",$=a.bank_account_no||"";let O;e[8]!==a.emergency_contacts?(O=a.emergency_contacts.length>0?a.emergency_contacts:[{name:"",relation_to_you:"",contact_number:""}],e[8]=a.emergency_contacts,e[9]=O):O=e[9];let X;e[10]!==a.company_assets.length?(X=a.company_assets.length>0?a.company_assets.length:[{access_card:!1,name_tag_and_lanyard:!1,hdmi_cable:!1,adapter:!1,mat:!1,monitor:!1,macbook_serial_number:"",phone_number:""}],e[10]=a.company_assets.length,e[11]=X):X=e[11];let B;e[12]!==j||e[13]!==N||e[14]!==_||e[15]!==S||e[16]!==v||e[17]!==w||e[18]!==k||e[19]!==E||e[20]!==R||e[21]!==T||e[22]!==I||e[23]!==L||e[24]!==M||e[25]!==$||e[26]!==O||e[27]!==X||e[28]!==f||e[29]!==p||e[30]!==g||e[31]!==b||e[32]!==h||e[33]!==x||e[34]!==y?(B={full_name:f,first_name:p,last_name:g,chinese_name:b,birth_date:h,race:x,race_others:y,religion:j,religion_others:N,address:_,id_number:S,nationality:v,nationality_others:w,contact_number:k,email:E,epf_no:R,income_tax_no:T,photo:I,bank_name:L,bank_account_name:M,bank_account_no:$,emergency_contacts:O,company_assets:X,authorisation:!1,accuracy_of_information:!1,security_measures:!1,dispute_resolution:!1,ownership:!1,responsibility:!1,authorised_use:!1,maintenance:!1,security:!1,return_of_assets:!1,loss_or_damage:!1,confidentiality:!1,governing_law:!1,acceptance_of_terms:!1,acknowledgement:!1},e[12]=j,e[13]=N,e[14]=_,e[15]=S,e[16]=v,e[17]=w,e[18]=k,e[19]=E,e[20]=R,e[21]=T,e[22]=I,e[23]=L,e[24]=M,e[25]=$,e[26]=O,e[27]=X,e[28]=f,e[29]=p,e[30]=g,e[31]=b,e[32]=h,e[33]=x,e[34]=y,e[35]=B):B=e[35];const Y=B;let U;e[36]!==n?(U=()=>{n<ps&&s(__)},e[36]=n,e[37]=U):U=e[37];const W=U;let G;e[38]!==n?(G=()=>{n>1&&s(n-1)},e[38]=n,e[39]=G):G=e[39];const ee=G;let ne;e[40]!==t||e[41]!==r.id||e[42]!==r.organisation_id?(ne=ie=>{const ae=new FormData,ge=y_,Ae=x_;if(["full_name","first_name","last_name","chinese_name","race","race_others","religion","religion_others","address","id_number","nationality","nationality_others","contact_number","email","epf_no","income_tax_no","bank_name","bank_account_name","bank_account_no"].forEach(Ee=>{ge(ie[Ee])&&ae.append(Ee,ie[Ee])}),["birth_date"].forEach(Ee=>{const Me=Ae(ie[Ee]);Me&&ae.append(Ee,Me)}),Array.isArray(ie.emergency_contacts)){const Ee=ie.emergency_contacts.filter(Me=>Object.values(Me).some(ge));ae.append("emergency_contacts",JSON.stringify(Ee))}if(Array.isArray(ie.company_assets)){const Ee=ie.company_assets.filter(Me=>Object.values(Me).some(ge));ae.append("company_assets",JSON.stringify(Ee))}ie.photo instanceof File&&ae.append("photo",ie.photo),mu(r.organisation_id,r.id,ae,t).then(()=>{t(J())}).catch(b_)},e[40]=t,e[41]=r.id,e[42]=r.organisation_id,e[43]=ne):ne=e[43];const K=ne;let se;e[44]!==n?(se=()=>{switch(n){case 1:return bu;case 2:return gu;case 3:return hu;case 4:return pu;case 5:return fu;default:return le()}},e[44]=n,e[45]=se):se=e[45];const z=se;let F;e[46]!==z?(F=z(),e[46]=z,e[47]=F):F=e[47];let P;e[48]!==n||e[49]!==W||e[50]!==K?(P=ie=>{n===ps?K(ie):W()},e[48]=n,e[49]=W,e[50]=K,e[51]=P):P=e[51];let Z;e[52]!==n||e[53]!==W||e[54]!==ee?(Z=ie=>{const{values:ae,errors:ge,touched:Ae,setFieldValue:$e,setTouched:vn,handleChange:Ee,handleSubmit:Me,validateForm:en}=ie;return i.jsxs("form",{onSubmit:Me,children:[n===1&&i.jsx(xu,{values:ae,errors:ge,touched:Ae,handleChange:Ee,setFieldValue:$e,type:"edit"}),n===2&&i.jsx(yu,{values:ae,errors:ge,touched:Ae,handleChange:Ee,setFieldValue:$e,type:"edit"}),n===3&&i.jsx(_u,{values:ae,errors:ge,touched:Ae,handleChange:Ee,setFieldValue:$e,type:"edit"}),n===4&&i.jsx(vu,{values:ae,errors:ge,touched:Ae,handleChange:Ee,setFieldValue:$e,type:"edit"}),n===5&&i.jsx(ju,{values:ae,errors:ge,touched:Ae,setFieldValue:$e,type:"edit"}),i.jsxs("div",{className:"flex justify-between mt-4",children:[i.jsx(me,{type:"button",variant:"outline",onClick:ee,disabled:n===1,children:"Previous"}),i.jsx(me,{type:"button",onClick:async()=>{h_(n,vn,ae);const Bt=await en();(Hl[n]||[]).some(ts=>Bt[ts]?.length||typeof Bt[ts]=="string")||(n<ps?W():Me(ae))},children:n===ps?"Submit Application":"Next"})]})]})},e[52]=n,e[53]=W,e[54]=ee,e[55]=Z):Z=e[55];let re;return e[56]!==Y||e[57]!==F||e[58]!==P||e[59]!==Z?(re=i.jsx("div",{className:"space-y-8 mt-4",children:i.jsx(ce,{initialValues:Y,validationSchema:F,onSubmit:P,children:Z})}),e[56]=Y,e[57]=F,e[58]=P,e[59]=Z,e[60]=re):re=e[60],re}function b_(e){console.error("Submit failed",e)}function x_(e){if(!e)return null;const t=new Date(e);return isNaN(t)?null:t.toISOString().split("T")[0]}function y_(e){return e!=null&&e!==""}function __(e){return e+1}function v_(e){return e.taskChecklist}function j_(e){return e.auth}const N_=le().shape({question:D().required("Question is required"),answer_one:D().required("Answer is required"),answer_two:D().required("Answer is required"),answer_three:D().required("Answer is required"),answer_four:D().required("Answer is required"),personality_one:D().required("Type is required"),personality_two:D().required("Type is required"),personality_three:D().required("Type is required"),personality_four:D().required("Type is required")}).test("unique-personalities","Personality types must be unique",function(e){const t=[e.personality_one,e.personality_two,e.personality_three,e.personality_four];return new Set(t).size===t.length}),so=()=>{const e=H.c(32),t=V(),{user:n}=A(w_),{type:s,props:r}=A(S_),a=r?.question||"",o=r?.answer_one||"",l=r?.answer_two||"",d=r?.answer_three||"",c=r?.answer_four||"";let m;e[0]!==r?.personality_one?(m=r?.personality_one?An.find(v=>v.label==r?.personality_one).value:"",e[0]=r?.personality_one,e[1]=m):m=e[1];let u;e[2]!==r?.personality_two?(u=r?.personality_two?An.find(v=>v.label==r?.personality_two).value:"",e[2]=r?.personality_two,e[3]=u):u=e[3];let f;e[4]!==r?.personality_three?(f=r?.personality_three?An.find(v=>v.label==r?.personality_three).value:"",e[4]=r?.personality_three,e[5]=f):f=e[5];let p;e[6]!==r?.personality_four?(p=r?.personality_four?An.find(v=>v.label==r?.personality_four).value:"",e[6]=r?.personality_four,e[7]=p):p=e[7];let g;e[8]!==a||e[9]!==o||e[10]!==l||e[11]!==d||e[12]!==c||e[13]!==m||e[14]!==u||e[15]!==f||e[16]!==p?(g={question:a,answer_one:o,answer_two:l,answer_three:d,answer_four:c,personality_one:m,personality_two:u,personality_three:f,personality_four:p},e[8]=a,e[9]=o,e[10]=l,e[11]=d,e[12]=c,e[13]=m,e[14]=u,e[15]=f,e[16]=p,e[17]=g):g=e[17];const b=g;let h;e[18]!==t||e[19]!==s||e[20]!==r||e[21]!==n?.organisation_id?(h=function(v,w){const{setSubmitting:k}=w,E={...v};(s==="editDiscQuestion"?Nu(n?.organisation_id,r.id,E,t):wu(n?.organisation_id,E,t)).then(()=>t(J())).catch(()=>k(!1))},e[18]=t,e[19]=s,e[20]=r,e[21]=n?.organisation_id,e[22]=h):h=e[22];const x=h;let y;e[23]===Symbol.for("react.memo_cache_sentinel")?(y=i.jsx(Su,{className:"mx-auto size-16 drop-shadow-md"}),e[23]=y):y=e[23];const j=s==="addNewDiscQuestion"?"Add New Question":"Edit Question";let N;e[24]!==j?(N=i.jsxs("div",{className:"-mt-6 mb-8",children:[y,i.jsx("h2",{className:"text-center text-xl mt-2 font-medium",children:j})]}),e[24]=j,e[25]=N):N=e[25];let _;e[26]!==x||e[27]!==b?(_=i.jsx(ce,{initialValues:b,onSubmit:x,validationSchema:N_,children:C_}),e[26]=x,e[27]=b,e[28]=_):_=e[28];let S;return e[29]!==N||e[30]!==_?(S=i.jsxs("section",{children:[N,_]}),e[29]=N,e[30]=_,e[31]=S):S=e[31],S};function w_(e){return e.auth}function S_(e){return e.dialog}function C_(e){const{values:t,errors:n,touched:s,handleChange:r,handleSubmit:a,setFieldValue:o,isSubmitting:l}=e;return i.jsxs("form",{onSubmit:a,className:"my-1 space-y-4 grid grid-cols-1 gap-x-4",children:[i.jsx(Kt,{fieldName:"question",label:"question",value:t.question,error:n.question,touched:s.question,handleChange:r,placeholder:"Enter question"}),i.jsxs("div",{children:[i.jsx("p",{children:"Answer"}),i.jsxs("div",{className:"space-y-4 border p-2 pt-0 px-0 rounded-md",children:[i.jsxs("div",{className:"text-sm grid grid-cols-1 md:grid-cols-[100px_1fr_0.5fr] gap-4 bg-primary/5 p-2 py-2.5",children:[i.jsx("div",{children:"Option"}),i.jsx("div",{children:"Answer"}),i.jsx("div",{children:"Type"})]}),[{label:"A",answerKey:"answer_one",personalityKey:"personality_one"},{label:"B",answerKey:"answer_two",personalityKey:"personality_two"},{label:"C",answerKey:"answer_three",personalityKey:"personality_three"},{label:"D",answerKey:"answer_four",personalityKey:"personality_four"}].map(d=>{const{label:c,answerKey:m,personalityKey:u}=d;return i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-[100px_1fr_0.5fr] gap-4 px-2",children:[i.jsx("div",{className:"flex items-center",children:i.jsx("div",{className:"size-7 grid rounded-full place-items-center bg-gray-200 dark:bg-accent text-sm",children:c})}),i.jsx(te,{fieldName:m,label:`Answer ${c}`,value:t[m],error:n[m],touched:s[m],handleChange:r,placeholder:"Enter answer",showLabel:!1}),i.jsx(Q,{options:An,fieldName:u,label:`Personality ${c}`,value:t[u],error:n[u],touched:s[u],setFieldValue:o,placeholder:"Select type",showLabel:!1})]},m)})]})]}),i.jsx("div",{children:i.jsx(de,{isSubmitting:l})})]})}const k_=()=>{const e=H.c(7),t=V(),{user:n}=A(A_),s=A(E_);let r;e[0]!==s?.id||e[1]!==t||e[2]!==n?.organisation_id?(r=function(){Cu(n?.organisation_id,s?.id,t).then(()=>{t(J())})},e[0]=s?.id,e[1]=t,e[2]=n?.organisation_id,e[3]=r):r=e[3];const a=r;let o;e[4]===Symbol.for("react.memo_cache_sentinel")?(o=i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[i.jsx(ze,{className:"text-destructive size-10"}),i.jsx("h2",{className:"text-xl font-semibold",children:"Archive DISC Question"}),i.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Are you sure you want to archive this question? This action cannot be undone. Make sure you have backed up any necessary information before proceeding."})]}),e[4]=o):o=e[4];let l;return e[5]!==a?(l=i.jsxs("div",{className:"-mt-4 text-center",children:[o,i.jsx(ke,{handleConfirm:a})]}),e[5]=a,e[6]=l):l=e[6],l};function A_(e){return e.auth}function E_(e){return e.dialog.props}const R_=()=>{const e=H.c(23),t=V(),{user:n}=A(M_),s=A(T_),[r,a]=C.useState(!1),[o,l]=C.useState(s?.disc_link||null);let d;e[0]!==s||e[1]!==t||e[2]!==n?(d=async()=>{try{const S=await ku(n.organisation_id,s.id,t);l(S)}catch(S){console.error("Failed to generate link:",S)}},e[0]=s,e[1]=t,e[2]=n,e[3]=d):d=e[3];const c=d;let m;e[4]===Symbol.for("react.memo_cache_sentinel")?(m=S=>{if(!navigator?.clipboard?.writeText){console.warn("Clipboard API not supported");return}navigator.clipboard.writeText(S),a(!0),setTimeout(()=>a(!1),2e3)},e[4]=m):m=e[4];const u=m,f=o||s?.disc_link,p=f?.disc_link_id,g=f?.expires_at;let b;e[5]===Symbol.for("react.memo_cache_sentinel")?(b=i.jsx("h2",{className:"text-xl font-semibold",children:"DISC Test Link"}),e[5]=b):b=e[5];let h;e[6]===Symbol.for("react.memo_cache_sentinel")?(h=i.jsx("div",{className:"bg-primary/10 flex size-9 items-center justify-center rounded-md",children:i.jsx(Ro,{})}),e[6]=h):h=e[6];let x;e[7]!==f?.url||e[8]!==p?(x=i.jsx("div",{className:"flex-1 text-sm break-all",children:p?i.jsx("span",{className:"text-blue-600 dark:text-blue-400",children:f?.url}):i.jsx("span",{className:"text-muted-foreground",children:"No link available"})}),e[7]=f?.url,e[8]=p,e[9]=x):x=e[9];let y;e[10]!==r||e[11]!==f?.url||e[12]!==p||e[13]!==c?(y=i.jsx("div",{children:p?i.jsxs(me,{variant:"outline",size:"sm",onClick:()=>u(f?.url),children:[i.jsx(To,{className:"mr-1 h-4 w-4"}),r?"Copied":"Copy"]}):i.jsx(me,{variant:"outline",size:"sm",onClick:c,children:"Generate"})}),e[10]=r,e[11]=f?.url,e[12]=p,e[13]=c,e[14]=y):y=e[14];let j;e[15]!==x||e[16]!==y?(j=i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[b,i.jsx("div",{className:"flex flex-col items-start gap-2 border rounded-md p-4 w-full max-w-3xl",children:i.jsxs("div",{className:"flex items-center gap-2 w-full",children:[h,x,y]})})]}),e[15]=x,e[16]=y,e[17]=j):j=e[17];let N;e[18]!==g?(N=g&&i.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:["Expires at: ",ve(new Date(g),"MMM dd, yyyy hh:mm a")]}),e[18]=g,e[19]=N):N=e[19];let _;return e[20]!==j||e[21]!==N?(_=i.jsxs("div",{className:"-mt-4 text-center",children:[j,N]}),e[20]=j,e[21]=N,e[22]=_):_=e[22],_};function M_(e){return e.auth}function T_(e){return e.dialog.props}const D_=le().shape({refferals_id:D().required("Referrals id is required"),referrer_name:D().required("Referrer name is required"),referee_name:D().required("Referre name is required"),job_reffered:D().required("Job referred is required"),refferals_bonus:pe().required("Referrals bonus referred is required")}),ro=()=>{const e=H.c(25),t=V(),{user:n}=A(I_),{type:s,props:r}=A(L_),a=r?.refferals_id||"",o=r?.referrer_name||"",l=r?.referee_name||"",d=r?.job_reffered||"",c=r?.refferals_bonus||0;let m;e[0]!==r?(m=r?.referrer_image?{id:"existing-referrer-image",url:r.referrer_image}:null,e[0]=r,e[1]=m):m=e[1];let u;e[2]!==r?(u=r?.referee_image?{id:"existing-referee-image",url:r.referee_image}:null,e[2]=r,e[3]=u):u=e[3];let f;e[4]!==a||e[5]!==o||e[6]!==l||e[7]!==d||e[8]!==c||e[9]!==m||e[10]!==u?(f={refferals_id:a,referrer_name:o,referee_name:l,job_reffered:d,refferals_bonus:c,referrer_image:m,referee_image:u},e[4]=a,e[5]=o,e[6]=l,e[7]=d,e[8]=c,e[9]=m,e[10]=u,e[11]=f):f=e[11];const p=f;let g;e[12]!==t||e[13]!==s||e[14]!==r?.id||e[15]!==n?.organisation_id?(g=function(N,_){const{setSubmitting:S}=_,v=new FormData;v.append("refferals_id",N.refferals_id),v.append("referrer_name",N.referrer_name),v.append("referee_name",N.referee_name),v.append("job_reffered",N.job_reffered),v.append("refferals_bonus",N.refferals_bonus),N.referrer_image&&v.append("referrer_image",N.referrer_image),N.referee_image&&v.append("referee_image",N.referee_image),(s==="editReferral"?Au(n?.organisation_id,r?.id,v,t):Eu(n?.organisation_id,v,t)).then(()=>t(J())).catch(()=>S(!1))},e[12]=t,e[13]=s,e[14]=r?.id,e[15]=n?.organisation_id,e[16]=g):g=e[16];const b=g,h=s==="editReferral"?"Edit Referral":"Add New Referral";let x;e[17]!==h?(x=i.jsx("div",{className:"-mt-6 mb-8",children:i.jsx("h2",{className:"text-center text-xl mt-2 font-medium",children:h})}),e[17]=h,e[18]=x):x=e[18];let y;e[19]!==b||e[20]!==p?(y=i.jsx(ce,{initialValues:p,onSubmit:b,validationSchema:D_,children:$_}),e[19]=b,e[20]=p,e[21]=y):y=e[21];let j;return e[22]!==x||e[23]!==y?(j=i.jsxs("section",{children:[x,y]}),e[22]=x,e[23]=y,e[24]=j):j=e[24],j};function I_(e){return e.auth}function L_(e){return e.dialog}function $_(e){const{values:t,errors:n,touched:s,handleChange:r,handleSubmit:a,setFieldValue:o,isSubmitting:l}=e;return i.jsxs("form",{onSubmit:a,className:"my-1 space-y-4 grid grid-cols-1 md:grid-cols-2 gap-x-4",children:[i.jsx(te,{fieldName:"refferals_id",label:"refferals id",value:t.refferals_id,error:n.refferals_id,touched:s.refferals_id,handleChange:r,placeholder:"Enter refferals id"}),i.jsx(te,{fieldName:"referrer_name",label:"referrer name",value:t.referrer_name,error:n.referrer_name,touched:s.referrer_name,handleChange:r,placeholder:"Enter referrer name"}),i.jsx(te,{fieldName:"job_reffered",label:"job reffered",value:t.job_reffered,error:n.job_reffered,touched:s.job_reffered,handleChange:r,placeholder:"Enter job reffered"}),i.jsx(te,{fieldName:"referee_name",label:"referee name",value:t.referee_name,error:n.referee_name,touched:s.referee_name,handleChange:r,placeholder:"Enter referee name"}),i.jsx("div",{className:"col-span-2",children:i.jsx(We,{fieldName:"refferals_bonus",label:"refferals bonus",value:t.refferals_bonus,error:n.refferals_bonus,touched:s.refferals_bonus,setFieldValue:o})}),i.jsxs("div",{children:[i.jsx(Be,{className:"mb-1 gap-0.5 text-sm capitalize",children:"referrer image"}),i.jsx(_s,{onFileChange:d=>{o("referrer_image",d)},initialFiles:t.referrer_image&&typeof t.referrer_image=="object"&&t.referrer_image.url?[t.referrer_image]:[]})]}),i.jsxs("div",{children:[i.jsx(Be,{className:"mb-1 gap-0.5 text-sm capitalize",children:"referee image"}),i.jsx(_s,{onFileChange:d=>{o("referee_image",d)},initialFiles:t.referee_image&&typeof t.referee_image=="object"&&t.referee_image.url?[t.referee_image]:[]})]}),i.jsx(de,{isSubmitting:l})]})}const O_=()=>{const e=H.c(7),t=V(),{user:n}=A(q_),s=A(z_);let r;e[0]!==t||e[1]!==s?.id||e[2]!==n?.organisation_id?(r=function(){Ru(n?.organisation_id,s?.id,t).then(()=>{t(J())})},e[0]=t,e[1]=s?.id,e[2]=n?.organisation_id,e[3]=r):r=e[3];const a=r;let o;e[4]===Symbol.for("react.memo_cache_sentinel")?(o=i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[i.jsx(ze,{className:"text-destructive size-10"}),i.jsx("h2",{className:"text-xl font-semibold",children:"Archive Referral"}),i.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Are you sure you want to archive this referral? This action cannot be undone. Make sure you have backed up any necessary information before proceeding."})]}),e[4]=o):o=e[4];let l;return e[5]!==a?(l=i.jsxs("div",{className:"-mt-4 text-center",children:[o,i.jsx(ke,{handleConfirm:a})]}),e[5]=a,e[6]=l):l=e[6],l};function q_(e){return e.auth}function z_(e){return e.dialog.props}const P_=le({date:Ze().required("Date is required").typeError("Invalid date format"),department_id:D().required("Department is required"),position:D().required("Position is required").max(100,"Position must be at most 100 characters"),reason_for_hiring:D().nullable().notRequired(),number_of_vacancies:pe().required("Number of vacancies is required").min(1,"Number of vacancies can't be less than 1").typeError("Number of vacancies must be a valid number")}),B_=le({reject_reason:D().required("Reject reason is required")}),H_=()=>{const e=H.c(17),t=V(),{user:n}=A(F_),{departments:s}=A(W_);let r;e[0]!==s||e[1]!==t||e[2]!==n?.organisation_id?(r=()=>{s||Pt(n?.organisation_id,t)},e[0]=s,e[1]=t,e[2]=n?.organisation_id,e[3]=r):r=e[3];let a;e[4]===Symbol.for("react.memo_cache_sentinel")?(a=[],e[4]=a):a=e[4],C.useEffect(r,a);let o;e[5]!==s?(o=he(s,"name","id"),e[5]=s,e[6]=o):o=e[6];const l=o;let d;e[7]===Symbol.for("react.memo_cache_sentinel")?(d={date:new Date,department_id:"",position:"",reason_for_hiring:"",number_of_vacancies:0},e[7]=d):d=e[7];const c=d;let m;e[8]!==t||e[9]!==n?.organisation_id?(m=function(b,h){const{setSubmitting:x}=h,y={...b,date:ve(b.date,"yyyy-MM-dd")};Mu(n?.organisation_id,y,t).then(()=>{t(J())}).catch(()=>{x(!1)})},e[8]=t,e[9]=n?.organisation_id,e[10]=m):m=e[10];const u=m;let f;e[11]===Symbol.for("react.memo_cache_sentinel")?(f=i.jsxs("div",{className:"-mt-6 mb-8",children:[i.jsx(Tu,{className:"mx-auto size-14 drop-shadow-md"}),i.jsx("h2",{className:"text-center text-xl font-medium mt-2",children:"New Hiring Form"})]}),e[11]=f):f=e[11];let p;e[12]!==l?(p=b=>{const{values:h,errors:x,touched:y,handleChange:j,handleSubmit:N,setFieldValue:_,isSubmitting:S}=b;return i.jsxs("form",{onSubmit:N,className:"my-1 grid grid-cols-1 space-y-4 gap-x-4 md:grid-cols-2 -mt-4",children:[i.jsx(et,{fieldName:"date",label:"date",error:x.date,touched:y.date,date:h.date,setDate:v=>_("date",v)}),i.jsx(Q,{options:l,fieldName:"department_id",label:"Department",value:h.department_id,error:x.department_id,touched:y.department_id,setFieldValue:_,placeholder:"Select department"}),i.jsxs("div",{className:"col-span-2 space-y-3",children:[i.jsx(te,{fieldName:"position",label:"position",value:h.position,error:x.position,touched:y.position,handleChange:j,placeholder:"Enter position name",isRequired:!0}),i.jsx(Kt,{fieldName:"reason_for_hiring",label:"reason for hiring",value:h.reason_for_hiring,error:x.reason_for_hiring,touched:y.reason_for_hiring,handleChange:j,placeholder:"Enter reason for hiring",isRequired:!1}),i.jsx(te,{fieldName:"number_of_vacancies",label:"number of vacancies",value:h.number_of_vacancies,error:x.number_of_vacancies,touched:y.number_of_vacancies,handleChange:j,placeholder:"Enter number of vacancies",type:"number",isRequired:!0})]}),i.jsx(de,{isSubmitting:S})]})},e[12]=l,e[13]=p):p=e[13];let g;return e[14]!==u||e[15]!==p?(g=i.jsxs("section",{children:[f,i.jsx(ce,{initialValues:c,onSubmit:u,validationSchema:P_,children:p})]}),e[14]=u,e[15]=p,e[16]=g):g=e[16],g};function F_(e){return e.auth}function W_(e){return e.department}const U_=()=>{const e=H.c(8),t=V(),{user:n}=A(V_),{props:s}=A(K_);let r;e[0]!==t||e[1]!==n.organisation_id||e[2]!==s.id?(r=function(c,m){const{setSubmitting:u}=m;Du(n.organisation_id,s.id,c,t).then(()=>{t(J())}).catch(()=>u(!1))},e[0]=t,e[1]=n.organisation_id,e[2]=s.id,e[3]=r):r=e[3];const a=r;let o;e[4]===Symbol.for("react.memo_cache_sentinel")?(o=i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Reject Hiring Vacancy"}),i.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Are you sure you want to reject this? This action cannot be undone."})]}),e[4]=o):o=e[4];let l;e[5]===Symbol.for("react.memo_cache_sentinel")?(l={reject_reason:""},e[5]=l):l=e[5];let d;return e[6]!==a?(d=i.jsxs("div",{className:"-mt-4 text-center",children:[o,i.jsx(ce,{initialValues:l,onSubmit:a,validationSchema:B_,children:J_})]}),e[6]=a,e[7]=d):d=e[7],d};function V_(e){return e.auth}function K_(e){return e.dialog}function J_(e){const{values:t,errors:n,touched:s,handleChange:r,handleSubmit:a,isSubmitting:o}=e;return i.jsxs("form",{onSubmit:a,className:"my-1 grid grid-cols-1 space-y-4 gap-x-4 mt-8 text-left",children:[i.jsx(Kt,{fieldName:"reject_reason",label:"reject reason",value:t.reject_reason,error:n.reject_reason,touched:s.reject_reason,placeholder:"Leave a comment",handleChange:r}),i.jsx(de,{isSubmitting:o})]})}const G_=()=>{const e=H.c(47),t=A(Y_);let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=i.jsx("h2",{className:"text-xl font-medium text-center",children:"Hiring Applicant Details"}),e[0]=n):n=e[0];let s;e[1]===Symbol.for("react.memo_cache_sentinel")?(s=i.jsx("p",{className:"text-xs mb-1",children:"Date"}),e[1]=s):s=e[1];let r;e[2]!==t.date?(r=ve(new Date(t.date),"PPP"),e[2]=t.date,e[3]=r):r=e[3];let a;e[4]!==r?(a=i.jsxs("div",{children:[s,i.jsx("p",{className:"text-foreground font-medium",children:r})]}),e[4]=r,e[5]=a):a=e[5];let o;e[6]===Symbol.for("react.memo_cache_sentinel")?(o=i.jsx("p",{className:"text-xs mb-1",children:"Position"}),e[6]=o):o=e[6];let l;e[7]!==t.position?(l=i.jsxs("div",{children:[o,i.jsx("p",{className:"text-foreground font-medium",children:t.position})]}),e[7]=t.position,e[8]=l):l=e[8];let d;e[9]===Symbol.for("react.memo_cache_sentinel")?(d=i.jsx("p",{className:"text-xs mb-1",children:"Department"}),e[9]=d):d=e[9];const c=t.department||"-";let m;e[10]!==c?(m=i.jsxs("div",{children:[d,i.jsx("p",{className:"text-foreground font-medium",children:c})]}),e[10]=c,e[11]=m):m=e[11];let u;e[12]===Symbol.for("react.memo_cache_sentinel")?(u=i.jsx("p",{className:"text-xs mb-1",children:"Number of Vacancies"}),e[12]=u):u=e[12];let f;e[13]!==t.number_of_vacancies?(f=i.jsxs("div",{children:[u,i.jsx("p",{className:"text-foreground font-medium",children:t.number_of_vacancies})]}),e[13]=t.number_of_vacancies,e[14]=f):f=e[14];let p;e[15]===Symbol.for("react.memo_cache_sentinel")?(p=i.jsx("p",{className:"text-xs mb-1",children:"Status"}),e[15]=p):p=e[15];const g=`px-3 py-1 text-black ${ar(t.status)}`;let b;e[16]!==g||e[17]!==t.status?(b=i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:i.jsxs("div",{children:[p,i.jsx(dt,{className:g,children:t.status})]})}),e[16]=g,e[17]=t.status,e[18]=b):b=e[18];let h;e[19]!==f||e[20]!==b||e[21]!==a||e[22]!==l||e[23]!==m?(h=i.jsx("div",{className:"space-y-2",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a,l,m,f,b]})}),e[19]=f,e[20]=b,e[21]=a,e[22]=l,e[23]=m,e[24]=h):h=e[24];let x;e[25]===Symbol.for("react.memo_cache_sentinel")?(x=i.jsx(fe,{className:"bg-black/10 dark:bg-white/10"}),e[25]=x):x=e[25];let y;e[26]===Symbol.for("react.memo_cache_sentinel")?(y=i.jsx("p",{className:"text-xs mb-1",children:"Submitted By"}),e[26]=y):y=e[26];const j=t.submitted_by||"-";let N;e[27]!==j?(N=i.jsxs("div",{children:[y,i.jsx("p",{className:"text-foreground font-medium",children:j})]}),e[27]=j,e[28]=N):N=e[28];let _;e[29]!==t.handler||e[30]!==t.status?(_=t.status!=="Pending"&&i.jsxs("div",{children:[i.jsxs("p",{className:"text-xs mb-1",children:[t.status==="Approved"?"Approved":"Rejected"," By"]}),i.jsx("p",{className:"text-foreground font-medium",children:t.handler||"-"})]}),e[29]=t.handler,e[30]=t.status,e[31]=_):_=e[31];let S;e[32]!==N||e[33]!==_?(S=i.jsx("div",{className:"space-y-2",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[N,_]})}),e[32]=N,e[33]=_,e[34]=S):S=e[34];let v;e[35]===Symbol.for("react.memo_cache_sentinel")?(v=i.jsx(fe,{className:"bg-black/10 dark:bg-white/10"}),e[35]=v):v=e[35];let w;e[36]===Symbol.for("react.memo_cache_sentinel")?(w=i.jsx("p",{className:"text-xs text-muted-foreground font-medium mb-1 flex gap-2 items-center",children:"Reason for hiring:"}),e[36]=w):w=e[36];let k;e[37]!==t.reason_for_hiring?(k=i.jsx("div",{className:"flex items-start gap-2 bg-primary/5 mt-4 p-2 rounded-md",children:i.jsxs("div",{className:"flex-1 min-w-0",children:[w,i.jsx("p",{className:"text-foreground",children:t.reason_for_hiring})]})}),e[37]=t.reason_for_hiring,e[38]=k):k=e[38];let E;e[39]!==t.reject_reason||e[40]!==t.status?(E=t.status==="Rejected"&&i.jsx("div",{className:"flex items-start gap-2 bg-destructive/5 mt-4 p-2 rounded-md",children:i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-xs text-muted-foreground font-medium mb-1 flex gap-2 items-center",children:"Reject reason"}),i.jsx("p",{className:"line-clamp-2  text-destructive/75",children:t.reject_reason})]})}),e[39]=t.reject_reason,e[40]=t.status,e[41]=E):E=e[41];let R;return e[42]!==h||e[43]!==S||e[44]!==k||e[45]!==E?(R=i.jsxs("div",{className:"-mt-6",children:[n,i.jsxs("div",{className:"space-y-4 px-2 md:px-4 py-2 text-sm text-muted-foreground mt-4",children:[h,x,S,v,k,E]})]}),e[42]=h,e[43]=S,e[44]=k,e[45]=E,e[46]=R):R=e[46],R};function Y_(e){return e.dialog.props}const X_=()=>{const e=H.c(3),{props:t}=A(Q_);let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=i.jsx("h2",{className:"text-xl font-semibold",children:"Reject Reason"}),e[0]=n):n=e[0];const s=t.reject_reason||"-";let r;return e[1]!==s?(r=i.jsx("div",{className:"-mt-4 text-center",children:i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[n,i.jsx("div",{className:"bg-white/50 dark:bg-black/30 rounded-md p-3 text-foreground w-full whitespace-pre-wrap text-left text-sm",children:s})]})}),e[1]=s,e[2]=r):r=e[2],r};function Q_(e){return e.dialog}const Z_={addVacancy:H_,rejectVacancy:U_,viewVacancyComment:X_,vacancyDetails:G_,addNewJobPosting:n_,editjobPosting:c_,generateLink:d_,archivejobPosting:a_,addToBlacklistPool:wa,addToWhitelistPool:wa,addNewReferral:ro,editReferral:ro,archiveReferral:O_,addNewDiscQuestion:so,editDiscQuestion:so,archiveDiscQuestion:k_,generateDiscLink:R_,candidateNumberMethodologyResult:f_,editTaskChecklist:g_},e0=le().shape({name:D().required("Company name is required")}),io=()=>{const e=H.c(17),t=V(),{user:n}=A(t0),{type:s,props:r}=A(n0),a=r?.name||"",o=r?.is_hq||!1;let l;e[0]!==a||e[1]!==o?(l={name:a,is_hq:o},e[0]=a,e[1]=o,e[2]=l):l=e[2];const d=l;let c;e[3]!==r?.id||e[4]!==t||e[5]!==s||e[6]!==n?.organisation_id?(c=function(h,x){const{setSubmitting:y}=x,j=new FormData;j.append("name",h.name),j.append("is_hq",h.is_hq),h.logo&&j.append("logo",h.logo),(s==="editCompany"?Iu(n?.organisation_id,r?.id,j,t):Lu(n?.organisation_id,j,t)).then(()=>t(J())).catch(()=>y(!1))},e[3]=r?.id,e[4]=t,e[5]=s,e[6]=n?.organisation_id,e[7]=c):c=e[7];const m=c;let u;e[8]===Symbol.for("react.memo_cache_sentinel")?(u=i.jsx(Mo,{className:"mx-auto size-14 drop-shadow-md"}),e[8]=u):u=e[8];const f=s==="editCompany"?"Edit Company":"Add Company";let p;e[9]!==f?(p=i.jsxs("div",{className:"-mt-6 mb-8",children:[u,i.jsx("h2",{className:"text-center text-xl mt-2 font-medium",children:f})]}),e[9]=f,e[10]=p):p=e[10];let g;e[11]!==m||e[12]!==d?(g=i.jsx(ce,{initialValues:d,onSubmit:m,validationSchema:e0,children:s0}),e[11]=m,e[12]=d,e[13]=g):g=e[13];let b;return e[14]!==p||e[15]!==g?(b=i.jsxs("section",{children:[p,g]}),e[14]=p,e[15]=g,e[16]=b):b=e[16],b};function t0(e){return e.auth}function n0(e){return e.dialog}function s0(e){const{values:t,errors:n,touched:s,handleChange:r,handleSubmit:a,setFieldValue:o,isSubmitting:l}=e;return i.jsxs("form",{onSubmit:a,className:"my-1 space-y-4",children:[i.jsx(te,{fieldName:"name",label:"name",value:t.name,error:n.name,touched:s.name,handleChange:r,placeholder:"Enter company name"}),i.jsx(Q,{options:[{label:"Yes",value:"true"},{label:"No",value:"false"}],fieldName:"is_hq",label:"HQ",value:t.is_hq.toString(),error:n.is_hq,touched:s.is_hq,setFieldValue:o,placeholder:"Select"}),i.jsx(de,{isSubmitting:l})]})}const r0=()=>{const e=H.c(16),t=V(),{user:n}=A(i0),s=A(a0);let r;e[0]!==s?.id||e[1]!==t||e[2]!==n?.organisation_id?(r=function(){$u(n?.organisation_id,s?.id,t).then(()=>{t(J())})},e[0]=s?.id,e[1]=t,e[2]=n?.organisation_id,e[3]=r):r=e[3];const a=r;let o,l;e[4]===Symbol.for("react.memo_cache_sentinel")?(o=i.jsx(ze,{className:"text-destructive size-10"}),l=i.jsx("h2",{className:"text-xl font-semibold",children:"Archive Company"}),e[4]=o,e[5]=l):(o=e[4],l=e[5]);const d=s?.name;let c;e[6]!==d?(c=i.jsxs("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:["Are you sure you want to archive"," ",i.jsx("span",{className:"font-semibold",children:d}),"? This action cannot be undone."]}),e[6]=d,e[7]=c):c=e[7];let m;e[8]===Symbol.for("react.memo_cache_sentinel")?(m=i.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Archiving this company will also archive all its associated data. Make sure you have backed up any necessary information before proceeding."}),e[8]=m):m=e[8];let u;e[9]!==c?(u=i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[o,l,c,m]}),e[9]=c,e[10]=u):u=e[10];let f;e[11]!==a?(f=i.jsx(ke,{handleConfirm:a}),e[11]=a,e[12]=f):f=e[12];let p;return e[13]!==u||e[14]!==f?(p=i.jsxs("div",{className:"-mt-4 text-center",children:[u,f]}),e[13]=u,e[14]=f,e[15]=p):p=e[15],p};function i0(e){return e.auth}function a0(e){return e.dialog.props}const o0=()=>{const e=H.c(38),t=V(),{user:n}=A(l0),s=A(c0),{departments:r}=A(d0),{members:a}=A(u0);let o;e[0]!==t||e[1]!==a||e[2]!==n?.organisation_id?(o=()=>{!a&&ui(n?.organisation_id,t)},e[0]=t,e[1]=a,e[2]=n?.organisation_id,e[3]=o):o=e[3];let l;if(e[4]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[4]=l):l=e[4],C.useEffect(o,l),!s){let y;return e[5]===Symbol.for("react.memo_cache_sentinel")?(y=i.jsx("p",{className:"text-muted-foreground text-center",children:"No company data available."}),e[5]=y):y=e[5],y}let d,c,m,u,f,p,g;if(e[6]!==s.id||e[7]!==s.name||e[8]!==r||e[9]!==a){const y=r?.filter(w=>w?.companies.some(k=>k.id===s.id)),j=a?.filter(w=>w?.company_ids.includes(s.id));let N;e[17]===Symbol.for("react.memo_cache_sentinel")?(N=i.jsx(Mo,{className:"mx-auto size-14 drop-shadow-md"}),e[17]=N):N=e[17],e[18]!==s.name?(p=i.jsxs("div",{className:"-mt-6 mb-8",children:[N,i.jsxs("h2",{className:"text-center text-xl mt-2 font-light",children:["Details of ",i.jsx("span",{className:"font-medium",children:s.name})]})]}),e[18]=s.name,e[19]=p):p=e[19];let _,S;e[20]===Symbol.for("react.memo_cache_sentinel")?(_=i.jsx("h3",{className:"mb-2 text-lg font-medium",children:"Departments"}),S=i.jsx(fe,{className:"mb-2 -mt-2"}),e[20]=_,e[21]=S):(_=e[20],S=e[21]);const v=y?.length>0?y.map(m0):i.jsx("p",{className:"text-muted-foreground text-sm",children:"No departments."});e[22]!==v?(g=i.jsxs("div",{className:"mt-6",children:[_,S,i.jsx("div",{className:"grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",children:v})]}),e[22]=v,e[23]=g):g=e[23],m="mt-6",e[24]===Symbol.for("react.memo_cache_sentinel")?(u=i.jsx("h3",{className:"mb-2 text-lg font-medium",children:"Members"}),f=i.jsx(fe,{className:"mb-2 -mt-2"}),e[24]=u,e[25]=f):(u=e[24],f=e[25]),d="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",c=j?.length>0?j.map(f0):i.jsx("p",{className:"text-muted-foreground text-sm",children:"No members."}),e[6]=s.id,e[7]=s.name,e[8]=r,e[9]=a,e[10]=d,e[11]=c,e[12]=m,e[13]=u,e[14]=f,e[15]=p,e[16]=g}else d=e[10],c=e[11],m=e[12],u=e[13],f=e[14],p=e[15],g=e[16];let b;e[26]!==d||e[27]!==c?(b=i.jsx("div",{className:d,children:c}),e[26]=d,e[27]=c,e[28]=b):b=e[28];let h;e[29]!==m||e[30]!==u||e[31]!==f||e[32]!==b?(h=i.jsxs("div",{className:m,children:[u,f,b]}),e[29]=m,e[30]=u,e[31]=f,e[32]=b,e[33]=h):h=e[33];let x;return e[34]!==h||e[35]!==p||e[36]!==g?(x=i.jsxs("section",{children:[p,g,h]}),e[34]=h,e[35]=p,e[36]=g,e[37]=x):x=e[37],x};function l0(e){return e.auth}function c0(e){return e.dialog.props}function d0(e){return e.department}function u0(e){return e.organisation}function m0(e){return i.jsx(pn,{className:"dark:bg-card overflow-hidden rounded-xl bg-white py-2 shadow-none",children:i.jsx(hn,{className:"px-4 text-sm",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(fi,{className:"h-10 w-10 rounded-full border border-black/10",children:i.jsx(pi,{className:"dark:bg-white/10",children:i.jsx(Ou,{size:20,className:"opacity-60","aria-hidden":"true"})})}),e?.name]})})},e.id)}function f0(e){return i.jsx(pn,{className:"dark:bg-card overflow-hidden rounded-xl bg-white py-2 shadow-none",children:i.jsx(hn,{className:"px-4 text-sm",children:i.jsx(mi,{member:e,view:"table"})})},e.id)}const p0=le().shape({name:D().required("Department name is required"),companies:qu().min(1,"At least one company must be selected").of(le().shape({label:D().required(),value:D().required()}))}),h0=le().shape({name:D().required("Name is required"),department_id:D().required("Department is required")}),ao=()=>{const e=H.c(28),t=V(),{user:n}=A(g0),{companies:s}=A(b0),{type:r,props:a}=A(x0);let o;e[0]!==a?(o=a||{},e[0]=a,e[1]=o):o=e[1];const{company:l,department:d}=o,c=l===void 0?null:l,m=d===void 0?null:d;let u;e[2]!==s?(u=he(s,"name","id"),e[2]=s,e[3]=u):u=e[3];const f=u,p=m?.name||"";let g;e[4]!==c||e[5]!==m||e[6]!==r?(g=r==="editDepartment"?he(m.companies,"name","id"):c?[{label:c.name,value:c.id}]:[],e[4]=c,e[5]=m,e[6]=r,e[7]=g):g=e[7];let b;e[8]!==p||e[9]!==g?(b={name:p,companies:g},e[8]=p,e[9]=g,e[10]=b):b=e[10];const h=b;let x;e[11]!==m||e[12]!==t||e[13]!==r||e[14]!==n.organisation_id?(x=function(k,E){const{setSubmitting:R}=E,T={};T.name=k.name,T.company_ids=[],k.companies.map(L=>T.company_ids.push(L.value)),(r==="editDepartment"?zu(n.organisation_id,m.id,T,t):Pu(n.organisation_id,T,t)).then(()=>t(J())).catch(()=>R(!1))},e[11]=m,e[12]=t,e[13]=r,e[14]=n.organisation_id,e[15]=x):x=e[15];const y=x;let j;e[16]===Symbol.for("react.memo_cache_sentinel")?(j=i.jsx(lr,{className:"mx-auto size-12 drop-shadow-md"}),e[16]=j):j=e[16];const N=r==="editDepartment"?"Edit Department":"Add Department";let _;e[17]!==N?(_=i.jsxs("div",{className:"-mt-6 mb-8",children:[j,i.jsx("h2",{className:"text-center text-xl font-medium",children:N})]}),e[17]=N,e[18]=_):_=e[18];let S;e[19]!==f?(S=k=>{const{values:E,errors:R,touched:T,handleChange:I,handleSubmit:L,setFieldValue:M,isSubmitting:$}=k;return i.jsxs("form",{onSubmit:L,className:"my-1 space-y-4",children:[i.jsx(te,{fieldName:"name",label:"name",value:E.name,error:R.name,touched:T.name,handleChange:I,placeholder:"Enter department name"}),i.jsx(ln,{fieldName:"companies",label:"Companies",value:E.companies,error:R.companies,touched:T.companies,placeholder:"Select companies",options:f,handleChange:O=>M("companies",O)}),i.jsx(de,{isSubmitting:$})]})},e[19]=f,e[20]=S):S=e[20];let v;e[21]!==y||e[22]!==h||e[23]!==S?(v=i.jsx(ce,{initialValues:h,onSubmit:y,validationSchema:p0,children:S}),e[21]=y,e[22]=h,e[23]=S,e[24]=v):v=e[24];let w;return e[25]!==_||e[26]!==v?(w=i.jsxs("section",{children:[_,v]}),e[25]=_,e[26]=v,e[27]=w):w=e[27],w};function g0(e){return e.auth}function b0(e){return e.company}function x0(e){return e.dialog}const y0=()=>{const e=H.c(16),t=V(),{user:n}=A(_0),s=A(v0);let r;e[0]!==s?.id||e[1]!==t||e[2]!==n?.organisation_id?(r=function(){Bu(n?.organisation_id,s?.id,t).then(()=>{t(J())})},e[0]=s?.id,e[1]=t,e[2]=n?.organisation_id,e[3]=r):r=e[3];const a=r;let o,l;e[4]===Symbol.for("react.memo_cache_sentinel")?(o=i.jsx(ze,{className:"text-destructive size-10"}),l=i.jsx("h2",{className:"text-xl font-semibold",children:"Archive Department"}),e[4]=o,e[5]=l):(o=e[4],l=e[5]);const d=s?.name;let c;e[6]!==d?(c=i.jsxs("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:["Are you sure you want to archive"," ",i.jsx("span",{className:"font-semibold",children:d}),"? This action cannot be undone."]}),e[6]=d,e[7]=c):c=e[7];let m;e[8]===Symbol.for("react.memo_cache_sentinel")?(m=i.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Archiving this department will also archive all its associated data. Make sure you have backed up any necessary information before proceeding."}),e[8]=m):m=e[8];let u;e[9]!==c?(u=i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[o,l,c,m]}),e[9]=c,e[10]=u):u=e[10];let f;e[11]!==a?(f=i.jsx(ke,{handleConfirm:a}),e[11]=a,e[12]=f):f=e[12];let p;return e[13]!==u||e[14]!==f?(p=i.jsxs("div",{className:"-mt-4 text-center",children:[u,f]}),e[13]=u,e[14]=f,e[15]=p):p=e[15],p};function _0(e){return e.auth}function v0(e){return e.dialog.props}const j0=()=>{const e=H.c(26),t=A(N0),{subDepartments:n}=A(w0);if(!t){let f;return e[0]===Symbol.for("react.memo_cache_sentinel")?(f=i.jsx("p",{className:"text-muted-foreground text-center",children:"No department data available."}),e[0]=f):f=e[0],f}let s,r,a,o,l,d;if(e[1]!==t.id||e[2]!==t.name||e[3]!==n){const f=n?.filter(g=>g.department_id===t.id);let p;e[10]===Symbol.for("react.memo_cache_sentinel")?(p=i.jsx(lr,{className:"mx-auto size-14 drop-shadow-md"}),e[10]=p):p=e[10],e[11]!==t.name?(d=i.jsxs("div",{className:"-mt-6 mb-8",children:[p,i.jsxs("h2",{className:"text-center text-xl mt-2 font-light",children:["Details of ",i.jsx("span",{className:"font-medium",children:t.name})]})]}),e[11]=t.name,e[12]=d):d=e[12],a="mt-6",e[13]===Symbol.for("react.memo_cache_sentinel")?(o=i.jsx("h3",{className:"mb-2 text-lg font-medium",children:"Sub Departments"}),l=i.jsx(fe,{className:"mb-2 -mt-2"}),e[13]=o,e[14]=l):(o=e[13],l=e[14]),s="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",r=f?.length>0?f.map(S0):i.jsx("p",{className:"text-muted-foreground text-sm",children:"No departments."}),e[1]=t.id,e[2]=t.name,e[3]=n,e[4]=s,e[5]=r,e[6]=a,e[7]=o,e[8]=l,e[9]=d}else s=e[4],r=e[5],a=e[6],o=e[7],l=e[8],d=e[9];let c;e[15]!==s||e[16]!==r?(c=i.jsx("div",{className:s,children:r}),e[15]=s,e[16]=r,e[17]=c):c=e[17];let m;e[18]!==a||e[19]!==o||e[20]!==l||e[21]!==c?(m=i.jsxs("div",{className:a,children:[o,l,c]}),e[18]=a,e[19]=o,e[20]=l,e[21]=c,e[22]=m):m=e[22];let u;return e[23]!==d||e[24]!==m?(u=i.jsxs("section",{children:[d,m]}),e[23]=d,e[24]=m,e[25]=u):u=e[25],u};function N0(e){return e.dialog.props}function w0(e){return e.department}function S0(e){return i.jsx(pn,{className:"dark:bg-card overflow-hidden rounded-xl bg-white py-2 shadow-none",children:i.jsx(hn,{className:"px-4 text-sm",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx(fi,{className:"h-10 w-10 rounded-full border border-black/10",children:i.jsx(pi,{className:"dark:bg-white/10",children:i.jsx(Hu,{size:20,className:"opacity-60","aria-hidden":"true"})})}),e?.name]})})},e.id)}const C0=le({first_name:D().required("First name is required").max(50,"First name must be at most 50 characters"),last_name:D().required("Last name is required").max(50,"Last name must be at most 50 characters"),email:D().required("Email is required").email("Please enter a valid email address"),member_role_id:D().required("Member role is required"),account_password:D().required("Password is required").min(8,"Password must be at least 8 characters").max(64,"Password can't exceed 64 characters").matches(/[A-Z]/,"Password must contain at least one uppercase letter").matches(/[a-z]/,"Password must contain at least one lowercase letter").matches(/[0-9]/,"Password must contain at least one number").matches(/[@$!%*?&#]/,"Password must contain at least one special character"),confirm_password:D().required("Please confirm your password").oneOf([fn("account_password")],"Passwords must match")}),k0=le({first_name:D().required("First name is required").max(50,"First name must be at most 50 characters").matches(/^[a-zA-Z0-9\s.'-]+$/,"First name can't contain special characters"),last_name:D().required("Last name is required").max(50,"Last name must be at most 50 characters").matches(/^[a-zA-Z0-9\s.'-]+$/,"Last name can't contain special characters"),member_role_id:D().required("Member role is required")}),A0=le({name:D().required("Role name is required").max(50,"Role name must be at most 50 characters").matches(/^[a-zA-Z0-9\s.'-]+$/,"Role name can't contain special characters")}),E0=le().shape({account_password:D().required("New password is required").min(8,"Password must be at least 8 characters").max(64,"Password can't exceed 64 characters").matches(/[A-Z]/,"Password must contain at least one uppercase letter").matches(/[a-z]/,"Password must contain at least one lowercase letter").matches(/[0-9]/,"Password must contain at least one number").matches(/[@$!%*?&#]/,"Password must contain at least one special character"),confirm_password:D().oneOf([fn("account_password"),null],"Passwords must match").required("Confirm password is required")}),oo=()=>{const e=H.c(23),t=V(),{type:n,props:s}=A(R0),{organisation:r,memberRoleFormat:a}=A(M0);let o;e[0]!==t||e[1]!==a?(o=()=>{a||Fu(t)},e[0]=t,e[1]=a,e[2]=o):o=e[2];let l;e[3]===Symbol.for("react.memo_cache_sentinel")?(l=[],e[3]=l):l=e[3],C.useEffect(o,l);const d=s?.name||"";let c;e[4]!==a||e[5]!==s?.permissions||e[6]!==d?(c={name:d,permissions:s?.permissions?{...s?.permissions}:a},s?.permissions&&delete c.permissions.group,e[4]=a,e[5]=s?.permissions,e[6]=d,e[7]=c):c=e[7];let m;e[8]!==t||e[9]!==n||e[10]!==s?.id||e[11]!==r?.id?(m=function(h,x){const{setSubmitting:y}=x;(n==="editMemberRole"?Wu(r?.id,s?.id,h,t):Uu(r?.id,h,t)).then(()=>{t(J())}).catch(()=>{y(!1)})},e[8]=t,e[9]=n,e[10]=s?.id,e[11]=r?.id,e[12]=m):m=e[12];const u=m,f=n==="editMemberRole"?"Edit Role":"Add Role";let p;e[13]!==f?(p=i.jsx("div",{className:"-mt-6 mb-4",children:i.jsx("h2",{className:"text-center text-xl font-medium",children:f})}),e[13]=f,e[14]=p):p=e[14];let g;e[15]!==u||e[16]!==c||e[17]!==a||e[18]!==r?.products?(g=a&&i.jsx(ce,{initialValues:c,onSubmit:u,validationSchema:A0,children:h=>{const{values:x,errors:y,touched:j,handleChange:N,handleSubmit:_,setFieldValue:S,isSubmitting:v}=h;return i.jsxs("form",{onSubmit:_,className:"my-1",children:[i.jsx(te,{fieldName:"name",label:"role name",value:x.name,error:y.name,touched:j.name,handleChange:N,placeholder:"Enter role name"}),i.jsxs(tr,{defaultValue:"general",className:"mt-4",children:[i.jsxs(nr,{className:"grid w-full grid-cols-1 h-24 md:h-auto md:grid-cols-3 border-b",children:[i.jsx(it,{value:"general",children:"User Access Permissions"}),dn(r?.products)&&i.jsx(it,{value:"finance",children:"Finance Permissions"}),un(r?.products)&&i.jsx(it,{value:"hr",children:"HR Permissions"})]}),i.jsxs("div",{className:"relative min-h-[350px] overflow-scroll mt-2.5",children:[i.jsx(at,{value:"general",className:"absolute inset-0 data-[state=active]:block hidden",children:i.jsx("div",{className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:Object.keys(x.permissions).map(w=>w.includes("Actions")||w.includes("finance")||w.includes("hr")?null:i.jsx(Wt,{values:x,permissionKey:w,setFieldValue:S},w))})}),dn(r?.products)&&i.jsx(at,{value:"finance",className:"absolute inset-0 data-[state=active]:block hidden",children:i.jsx("div",{className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:Object.keys(x.permissions).map(w=>w.includes("Actions")||!w.includes("finance")?null:i.jsx(Wt,{values:x,permissionKey:w,setFieldValue:S},w))})}),un(r?.products)&&i.jsx(at,{value:"hr",className:"absolute inset-0 data-[state=active]:block hidden",children:i.jsx("div",{className:"grid grid-cols-1 gap-5 md:grid-cols-2",children:Object.keys(x.permissions).map(w=>w.includes("Actions")||!w.includes("hr")?null:i.jsx(Wt,{values:x,permissionKey:w,setFieldValue:S},w))})})]})]}),i.jsx(de,{isSubmitting:v})]})}}),e[15]=u,e[16]=c,e[17]=a,e[18]=r?.products,e[19]=g):g=e[19];let b;return e[20]!==p||e[21]!==g?(b=i.jsxs("section",{children:[p,g]}),e[20]=p,e[21]=g,e[22]=b):b=e[22],b};function R0(e){return e.dialog}function M0(e){return e.organisation}const T0=()=>{const e=H.c(18),t=V(),n=A(D0),{user:s}=A(I0);let r;e[0]!==t||e[1]!==n.memberRole.id||e[2]!==s?.organisation_id?(r=function(){Vu(s?.organisation_id,n?.memberRole.id,t).then(()=>{t(J())})},e[0]=t,e[1]=n.memberRole.id,e[2]=s?.organisation_id,e[3]=r):r=e[3];const a=r;let o,l;e[4]===Symbol.for("react.memo_cache_sentinel")?(o=i.jsx(ze,{className:"text-destructive size-10"}),l=i.jsx("h2",{className:"text-xl font-semibold",children:"Archive Member Role"}),e[4]=o,e[5]=l):(o=e[4],l=e[5]);const d=n?.name;let c;e[6]!==d?(c=i.jsxs("p",{className:"text-sm text-zinc-600 dark:text-zinc-300 w-full",children:["Are you sure you want to archive"," ",i.jsx("span",{className:"font-semibold",children:d}),"? This action cannot be undone."]}),e[6]=d,e[7]=c):c=e[7];let m;e[8]!==n.roleCount?(m=n.roleCount>0&&i.jsxs("p",{className:"-mt-3 text-sm text-zinc-600 dark:text-zinc-300",children:["Currently ",n.roleCount," member",n.roleCount>1?"s are":" is"," using this role. All of their permissions will be reset."]}),e[8]=n.roleCount,e[9]=m):m=e[9];let u;e[10]!==c||e[11]!==m?(u=i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[o,l,c,m]}),e[10]=c,e[11]=m,e[12]=u):u=e[12];let f;e[13]!==a?(f=i.jsx(ke,{handleConfirm:a}),e[13]=a,e[14]=f):f=e[14];let p;return e[15]!==u||e[16]!==f?(p=i.jsxs("div",{className:"-mt-4 text-center",children:[u,f]}),e[15]=u,e[16]=f,e[17]=p):p=e[17],p};function D0(e){return e.dialog.props}function I0(e){return e.auth}const L0=()=>{const e=H.c(77),t=A(O0),{organisation:n}=A(q0);let s,r,a,o,l,d,c,m,u,f,p,g,b,h,x,y;if(e[0]!==t.permissions||e[1]!==n?.products){const k=Object.entries(t.permissions||{}).filter(z0).map(P0),E=Object.entries(t.permissions||{}).filter(B0).map(H0),R=P=>k.filter(Z=>{const{name:re}=Z;return P==="general"?!re.includes("finance")&&!re.includes("hr"):re.includes(P)}).map(F0),T=P=>E.filter(Z=>{const{name:re}=Z;return P==="general"?!re.includes("finance")&&!re.includes("hr"):re.includes(P)}).map(U0);d="-mt-4 pb-4",e[18]===Symbol.for("react.memo_cache_sentinel")?(c=i.jsx("h2",{className:"text-lg font-medium",children:"Permission Details"}),m=i.jsx(fe,{className:"mt-2 mb-4"}),e[18]=c,e[19]=m):(c=e[18],m=e[19]),l="relative overflow-scroll mt-2.5 max-h-[500px]",r=tr,b="general";let I;e[20]===Symbol.for("react.memo_cache_sentinel")?(I=i.jsx(it,{value:"general",children:"User Access Permissions"}),e[20]=I):I=e[20];let L;e[21]!==n?.products?(L=dn(n?.products)&&i.jsx(it,{value:"finance",children:"Finance Permissions"}),e[21]=n?.products,e[22]=L):L=e[22];let M;e[23]!==n?.products?(M=un(n?.products)&&i.jsx(it,{value:"hr",children:"HR Permissions"}),e[23]=n?.products,e[24]=M):M=e[24],e[25]!==L||e[26]!==M?(h=i.jsxs(nr,{className:"grid w-full grid-cols-1 h-24 md:h-auto md:grid-cols-3 border-b",children:[I,L,M]}),e[25]=L,e[26]=M,e[27]=h):h=e[27];let $;e[28]===Symbol.for("react.memo_cache_sentinel")?($=i.jsx("h3",{className:"mb-2 font-semibold",children:"Modules"}),e[28]=$):$=e[28];const O=i.jsx("div",{className:"grid grid-cols-1 gap-2 capitalize md:grid-cols-2 lg:grid-cols-4",children:R("general")});let X;e[29]!==O?(X=i.jsxs("div",{children:[$,O]}),e[29]=O,e[30]=X):X=e[30];let B;e[31]===Symbol.for("react.memo_cache_sentinel")?(B=i.jsx("h3",{className:"mb-2 font-semibold",children:"Actions"}),e[31]=B):B=e[31];const Y=i.jsx("div",{className:"space-y-4 capitalize",children:T("general")});let U;e[32]!==Y?(U=i.jsxs("div",{children:[B,Y]}),e[32]=Y,e[33]=U):U=e[33],e[34]!==X||e[35]!==U?(x=i.jsxs(at,{value:"general",className:"space-y-6 pt-4",children:[X,U]}),e[34]=X,e[35]=U,e[36]=x):x=e[36];let W;e[37]===Symbol.for("react.memo_cache_sentinel")?(W=i.jsx("h3",{className:"mb-2 font-semibold",children:"Modules"}),e[37]=W):W=e[37];const G=i.jsx("div",{className:"grid grid-cols-1 gap-2 capitalize md:grid-cols-2 lg:grid-cols-4",children:R("finance")});let ee;e[38]!==G?(ee=i.jsxs("div",{children:[W,G]}),e[38]=G,e[39]=ee):ee=e[39];let ne;e[40]===Symbol.for("react.memo_cache_sentinel")?(ne=i.jsx("h3",{className:"mb-2 font-semibold",children:"Actions"}),e[40]=ne):ne=e[40];const K=i.jsx("div",{className:"space-y-4 capitalize",children:T("finance")});let se;e[41]!==K?(se=i.jsxs("div",{children:[ne,K]}),e[41]=K,e[42]=se):se=e[42],e[43]!==ee||e[44]!==se?(y=i.jsxs(at,{value:"finance",className:"space-y-6 pt-4",children:[ee,se]}),e[43]=ee,e[44]=se,e[45]=y):y=e[45],s=at,f="hr",p="space-y-6 pt-4";let z;e[46]===Symbol.for("react.memo_cache_sentinel")?(z=i.jsx("h3",{className:"mb-2 font-semibold",children:"Modules"}),e[46]=z):z=e[46];const F=R("hr");e[47]!==F?(g=i.jsxs("div",{children:[z,i.jsx("div",{className:"grid grid-cols-1 gap-2 capitalize md:grid-cols-2 lg:grid-cols-4",children:F})]}),e[47]=F,e[48]=g):g=e[48],e[49]===Symbol.for("react.memo_cache_sentinel")?(u=i.jsx("h3",{className:"mb-2 font-semibold",children:"Actions"}),e[49]=u):u=e[49],a="space-y-4 capitalize",o=T("hr"),e[0]=t.permissions,e[1]=n?.products,e[2]=s,e[3]=r,e[4]=a,e[5]=o,e[6]=l,e[7]=d,e[8]=c,e[9]=m,e[10]=u,e[11]=f,e[12]=p,e[13]=g,e[14]=b,e[15]=h,e[16]=x,e[17]=y}else s=e[2],r=e[3],a=e[4],o=e[5],l=e[6],d=e[7],c=e[8],m=e[9],u=e[10],f=e[11],p=e[12],g=e[13],b=e[14],h=e[15],x=e[16],y=e[17];let j;e[50]!==a||e[51]!==o?(j=i.jsx("div",{className:a,children:o}),e[50]=a,e[51]=o,e[52]=j):j=e[52];let N;e[53]!==j||e[54]!==u?(N=i.jsxs("div",{children:[u,j]}),e[53]=j,e[54]=u,e[55]=N):N=e[55];let _;e[56]!==s||e[57]!==N||e[58]!==f||e[59]!==p||e[60]!==g?(_=i.jsxs(s,{value:f,className:p,children:[g,N]}),e[56]=s,e[57]=N,e[58]=f,e[59]=p,e[60]=g,e[61]=_):_=e[61];let S;e[62]!==r||e[63]!==_||e[64]!==b||e[65]!==h||e[66]!==x||e[67]!==y?(S=i.jsxs(r,{defaultValue:b,children:[h,x,y,_]}),e[62]=r,e[63]=_,e[64]=b,e[65]=h,e[66]=x,e[67]=y,e[68]=S):S=e[68];let v;e[69]!==l||e[70]!==S?(v=i.jsx("div",{className:l,children:S}),e[69]=l,e[70]=S,e[71]=v):v=e[71];let w;return e[72]!==d||e[73]!==c||e[74]!==m||e[75]!==v?(w=i.jsxs("div",{className:d,children:[c,m,v]}),e[72]=d,e[73]=c,e[74]=m,e[75]=v,e[76]=w):w=e[76],w},$0=e=>{const t=H.c(6),{action:n,allowed:s}=e;let r;if(t[0]!==n){let l;t[2]===Symbol.for("react.memo_cache_sentinel")?(l=/_/g,t[2]=l):l=t[2],r=n.replace(l," "),t[0]=n,t[1]=r}else r=t[1];const a=r;let o;return t[3]!==s||t[4]!==a?(o=s?i.jsxs(dt,{className:"gap-1 rounded-full pr-3.5 pl-2 text-xs",children:[i.jsx(Xt,{className:"text-primary-foreground !size-4","aria-hidden":"true"}),a]}):i.jsx(dt,{variant:"outline",className:"gap-1 border pr-4 pl-3 text-xs dark:border-white/25 rounded-full",children:i.jsx("span",{className:"text-muted-foreground",children:a})}),t[3]=s,t[4]=a,t[5]=o):o=t[5],o};function O0(e){return e.dialog.props}function q0(e){return e.organisation}function z0(e){const[,t]=e;return typeof t=="boolean"}function P0(e){const[t,n]=e;return{name:t,enabled:n}}function B0(e){const[,t]=e;return typeof t=="object"&&t!==null}function H0(e){const[t,n]=e;return{name:t,actions:n}}function F0(e){const{name:t,enabled:n}=e;return i.jsx("div",{className:be("bg-muted text-muted-foreground rounded-lg border px-2 py-1 text-sm",n&&"bg-primary text-primary-foreground"),children:t.replace(/_/g," ")},t)}function W0(e){const[t,n]=e;return i.jsx($0,{action:t,allowed:n},t)}function U0(e){const{name:t,actions:n}=e;return i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-gray-800 dark:text-white",children:t.replace("Actions","").replace(/_/g," ").trim()}),i.jsx("ul",{className:"mt-1 flex flex-wrap gap-2",children:Object.entries(n).map(W0)})]},t)}const lo=()=>{const e=V(),{type:t,props:n}=A(h=>h.dialog),{user:s}=A(h=>h.auth),{companies:r}=A(h=>h.company),{departments:a,subDepartments:o}=A(h=>h.department),{memberRoles:l}=A(h=>h.organisation);C.useEffect(()=>{!l&&Ku(s?.organisation_id,e),!r&&zt(s.organisation_id,e),!a&&Pt(s.organisation_id,e),!o&&Kn(s.organisation_id,e)},[]);const d=C.useMemo(()=>he(l,"name","id"),[l]),c=C.useMemo(()=>he(r,"name","id"),[r]);function m(){return r?r.filter(y=>n?.company_ids?.includes(y.id)).map(y=>({value:y.id,label:y.name})):[]}function u(){if(!a)return[];const x=o.filter(j=>n?.sub_department_ids?.includes(j.id)).map(j=>j.department_id);return a.filter(j=>x.includes(j.id)).map(j=>({value:j.id,label:j.name}))}function f(){return o?o.filter(y=>n?.sub_department_ids?.includes(y.id)).map(y=>({value:y.id,label:y.name})):[]}const p={first_name:"",last_name:"",email:"",member_role_id:"",companies:[],departments:[],sub_departments:[],account_password:"",confirm_password:""},g={first_name:n?.first_name||"",last_name:n?.last_name||"",member_role_id:d.find(h=>h.label==n?.role)?.value||"",companies:t==="editMember"?m():[],departments:t==="editMember"?u():[],sub_departments:t==="editMember"?f():[]},b=function(h,{setSubmitting:x,setErrors:y}){const j={...h};j.company_ids=[],h.companies.map(_=>j.company_ids.push(_.value)),j.department_ids=[],h.departments.map(_=>j.department_ids.push(_.value)),j.sub_department_ids=[],h.sub_departments.map(_=>j.sub_department_ids.push(_.value)),(t==="editMember"?Yu(s?.organisation_id,n?.id,j,e):Xu(s?.organisation_id,j,e)).then(()=>{e(J())}).catch(_=>{x(!1);const S=_?.response?.data?.detail;try{const v=S&&JSON.parse(S.replace(/'/g,'"'));v?.email?.length>0?y({email:v.email[0]}):y({general:"An error occurred."})}catch{}})};return i.jsxs("section",{children:[i.jsxs("div",{className:"-mt-6 mb-8",children:[i.jsx(di,{className:"mx-auto size-12 drop-shadow-md"}),i.jsx("h2",{className:"text-center text-xl font-medium",children:t==="editMember"?"Edit Member":"Add Member"})]}),i.jsx(ce,{initialValues:t==="editMember"?g:p,onSubmit:b,validationSchema:t==="editMember"?k0:C0,children:({values:h,errors:x,touched:y,handleChange:j,handleSubmit:N,setFieldValue:_,isSubmitting:S})=>i.jsxs("form",{onSubmit:N,className:"my-1 grid grid-cols-1 space-y-4 gap-x-4 md:grid-cols-2 px-2.5",children:[i.jsx(te,{fieldName:"first_name",label:"first name",value:h.first_name,error:x.first_name,touched:y.first_name,handleChange:j,placeholder:"Enter first name"}),i.jsx(te,{fieldName:"last_name",label:"last name",value:h.last_name,error:x.last_name,touched:y.last_name,handleChange:j,placeholder:"Enter last name"}),t==="addMember"&&i.jsx(te,{fieldName:"email",label:"email",value:h.email,error:x.email,touched:y.email,handleChange:j,placeholder:"Enter email",autoComplete:"off"}),i.jsx("div",{className:t==="editMember"?"col-span-2":"",children:i.jsx(Q,{options:d,fieldName:"member_role_id",label:"member role",value:h.member_role_id,error:x.member_role_id,touched:y.member_role_id,setFieldValue:_,placeholder:"Select role"})}),s?.role==="MEMBER"&&i.jsxs("div",{className:"col-span-2 space-y-3",children:[i.jsx(ln,{fieldName:"companies",label:"Companies",value:h.companies,error:x.companies,defaultOptions:h.companies,touched:y.companies,placeholder:"Select companies",options:c,handleChange:v=>_("companies",v),isRequired:!1}),i.jsx(ln,{fieldName:"departments",label:"departments",value:h.departments,defaultOptions:h.departments,error:x.departments,touched:y.departments,placeholder:"Select departments",options:Ju(h.companies,a),handleChange:v=>_("departments",v),isRequired:!1}),i.jsx(ln,{fieldName:"sub_departments",label:"sub departments",value:h.sub_departments,error:x.sub_departments,touched:y.sub_departments,defaultOptions:h.sub_departments,placeholder:"Select sub departments",options:Gu(h.departments,o),handleChange:v=>_("sub_departments",v),isRequired:!1})]}),t==="addMember"&&i.jsxs(i.Fragment,{children:[i.jsx(ct,{fieldName:"account_password",label:"account password",value:h.account_password,error:x.account_password,touched:y.account_password,handleChange:j,placeholder:"Enter password",autoComplete:"off"}),i.jsx(ct,{fieldName:"confirm_password",label:"confirm password",value:h.confirm_password,error:x.confirm_password,touched:y.confirm_password,handleChange:j,placeholder:"Enter password again",autoComplete:"off"})]}),i.jsx(de,{isSubmitting:S})]})})]})},V0=()=>{const e=H.c(15),t=V(),{user:n}=A(K0),s=A(J0);let r;e[0]!==t||e[1]!==s?.id||e[2]!==n?.organisation_id?(r=()=>{Qu(n?.organisation_id,s?.id,t).then(()=>{t(J())})},e[0]=t,e[1]=s?.id,e[2]=n?.organisation_id,e[3]=r):r=e[3];const a=r;let o;e[4]===Symbol.for("react.memo_cache_sentinel")?(o=i.jsx("h2",{className:"text-xl font-semibold",children:"Archive Member"}),e[4]=o):o=e[4];const l=`${s?.first_name} ${s?.last_name}`;let d;e[5]!==l?(d=i.jsxs("p",{className:"text-sm text-zinc-600 dark:text-zinc-300 w-full",children:["Are you sure you want to archive"," ",i.jsx("span",{className:"font-semibold",children:l}),"? This action cannot be undone."]}),e[5]=l,e[6]=d):d=e[6];let c;e[7]===Symbol.for("react.memo_cache_sentinel")?(c=i.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-300 w-full",children:"Archiving this member will also archive all its associated data. Make sure you have backed up any necessary information before proceeding."}),e[7]=c):c=e[7];let m;e[8]!==d?(m=i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[o,d,c]}),e[8]=d,e[9]=m):m=e[9];let u;e[10]!==a?(u=i.jsx(ke,{handleConfirm:a}),e[10]=a,e[11]=u):u=e[11];let f;return e[12]!==m||e[13]!==u?(f=i.jsxs("div",{className:"-mt-4",children:[m,u]}),e[12]=m,e[13]=u,e[14]=f):f=e[14],f};function K0(e){return e.auth}function J0(e){return e.dialog.props}const G0=()=>{const e=H.c(8),t=V(),{user:n}=A(Y0),{memberId:s}=A(X0);let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r={account_password:"",confirm_password:""},e[0]=r):r=e[0];const a=r;let o;e[1]!==t||e[2]!==s||e[3]!==n.organisation_id?(o=async(m,u)=>{const{setSubmitting:f}=u,p={...m};Zu(n.organisation_id,s,p).then(()=>t(J())).catch(()=>f(!1))},e[1]=t,e[2]=s,e[3]=n.organisation_id,e[4]=o):o=e[4];const l=o;let d;e[5]===Symbol.for("react.memo_cache_sentinel")?(d=i.jsx("div",{className:"-mt-6 mb-8",children:i.jsx("h2",{className:"text-center text-xl font-medium",children:"Reset Password"})}),e[5]=d):d=e[5];let c;return e[6]!==l?(c=i.jsxs("section",{children:[d,i.jsx(ce,{initialValues:a,onSubmit:l,validationSchema:E0,children:Q0})]}),e[6]=l,e[7]=c):c=e[7],c};function Y0(e){return e.auth}function X0(e){return e.dialog.props}function Q0(e){const{values:t,errors:n,touched:s,handleChange:r,handleSubmit:a,isSubmitting:o}=e;return i.jsxs("form",{onSubmit:a,className:"my-1 space-y-4 gap-x-4",children:[i.jsx(ct,{fieldName:"account_password",label:"New Password",value:t.account_password,error:n.account_password,touched:s.account_password,handleChange:r,placeholder:"Enter new password",autoComplete:"off"}),i.jsx(ct,{fieldName:"confirm_password",label:"Confirm Password",value:t.confirm_password,error:n.confirm_password,touched:s.confirm_password,handleChange:r,placeholder:"Enter new password again",autoComplete:"off"}),i.jsx(de,{isSubmitting:o})]})}const Z0=()=>{const e=H.c(12),t=V(),{props:n}=A(e2),s=n?.address||"";let r;e[0]!==n?(r=n?.logo?{id:"existing-logo",url:n.logo}:null,e[0]=n,e[1]=r):r=e[1];let a;e[2]!==s||e[3]!==r?(a={address:s,logo:r},e[2]=s,e[3]=r,e[4]=a):a=e[4];const o=a;let l;e[5]!==t||e[6]!==n?.id?(l=function(u,f){const{setSubmitting:p}=f,g=new FormData;u.address!==""&&g.append("address",u.address),u.logo&&g.append("logo",u.logo),em(n?.id,g,t).then(()=>t(J())).catch(()=>p(!1))},e[5]=t,e[6]=n?.id,e[7]=l):l=e[7];const d=l;let c;e[8]===Symbol.for("react.memo_cache_sentinel")?(c=i.jsxs("div",{className:"-mt-6 mb-8",children:[i.jsx(mo,{className:"mx-auto size-14 drop-shadow-md"}),i.jsx("h2",{className:"text-center text-xl font-medium",children:"Edit Organisation"})]}),e[8]=c):c=e[8];let m;return e[9]!==d||e[10]!==o?(m=i.jsxs("section",{children:[c,i.jsx(ce,{initialValues:o,onSubmit:d,children:t2})]}),e[9]=d,e[10]=o,e[11]=m):m=e[11],m};function e2(e){return e.dialog}function t2(e){const{values:t,errors:n,touched:s,handleChange:r,handleSubmit:a,setFieldValue:o,isSubmitting:l}=e;return i.jsxs("form",{onSubmit:a,className:"my-1 space-y-4",children:[i.jsx(te,{fieldName:"address",label:"address",value:t.address,error:n.address,touched:s.address,handleChange:r,placeholder:"Enter organisation address",isRequired:!1}),i.jsxs("div",{children:[i.jsx(Be,{className:"mb-1 gap-0.5 text-xs uppercase",children:"LOGO"}),i.jsx(_s,{onFileChange:d=>{o("logo",d)},initialFiles:t.logo&&typeof t.logo=="object"&&t.logo.url?[t.logo]:[]})]}),i.jsx(de,{isSubmitting:l})]})}function co(){const e=H.c(25),t=V(),{user:n}=A(r2),{departments:s}=A(s2),{type:r,props:a}=A(n2);let o;e[0]!==a?(o=a||{},e[0]=a,e[1]=o):o=e[1];const{department:l,subDepartment:d}=o,c=l===void 0?null:l,m=d===void 0?null:d;let u;e[2]!==s?(u=he(s,"name","id"),e[2]=s,e[3]=u):u=e[3];const f=u,p=m?.name||"",g=m?.department_id||c?.id||"",b=m?.strategy||"";let h;e[4]!==p||e[5]!==g||e[6]!==b?(h={name:p,department_id:g,strategy:b},e[4]=p,e[5]=g,e[6]=b,e[7]=h):h=e[7];const x=h;let y;e[8]!==t||e[9]!==r||e[10]!==m||e[11]!==n.organisation_id?(y=function(E,R){const{setSubmitting:T}=R,I={...E};(r==="editSubDepartment"?tm(n.organisation_id,m.id,I,t):nm(n.organisation_id,I,t)).then(()=>t(J())).catch(()=>T(!1))},e[8]=t,e[9]=r,e[10]=m,e[11]=n.organisation_id,e[12]=y):y=e[12];const j=y;let N;e[13]===Symbol.for("react.memo_cache_sentinel")?(N=i.jsx(lr,{className:"mx-auto size-12 drop-shadow-md"}),e[13]=N):N=e[13];const _=r==="editSubDepartment"?"Edit Sub Department":"Add Sub Department";let S;e[14]!==_?(S=i.jsxs("div",{className:"-mt-6 mb-8",children:[N,i.jsx("h2",{className:"text-center text-xl font-medium",children:_})]}),e[14]=_,e[15]=S):S=e[15];let v;e[16]!==f?(v=E=>{const{values:R,errors:T,touched:I,handleChange:L,handleSubmit:M,setFieldValue:$,isSubmitting:O}=E;return i.jsxs("form",{onSubmit:M,className:"my-1 space-y-4",children:[i.jsx(te,{fieldName:"name",label:"name",value:R.name,error:T.name,touched:I.name,handleChange:L,placeholder:"Enter sub department name"}),i.jsx(Q,{options:f,fieldName:"department_id",label:"Department",value:R.department_id,error:T.department_id,touched:I.department_id,setFieldValue:$,placeholder:"Select department"}),i.jsx(te,{fieldName:"strategy",label:"strategy",value:R.strategy,error:T.strategy,touched:I.strategy,handleChange:L,placeholder:"Enter strategy"}),i.jsx(de,{isSubmitting:O})]})},e[16]=f,e[17]=v):v=e[17];let w;e[18]!==j||e[19]!==x||e[20]!==v?(w=i.jsx(ce,{initialValues:x,onSubmit:j,validationSchema:h0,children:v}),e[18]=j,e[19]=x,e[20]=v,e[21]=w):w=e[21];let k;return e[22]!==S||e[23]!==w?(k=i.jsxs("section",{children:[S,w]}),e[22]=S,e[23]=w,e[24]=k):k=e[24],k}function n2(e){return e.dialog}function s2(e){return e.department}function r2(e){return e.auth}const i2=()=>{const e=H.c(16),t=V(),{user:n}=A(a2),s=A(o2);let r;e[0]!==t||e[1]!==s?.id||e[2]!==n?.organisation_id?(r=function(){sm(n?.organisation_id,s?.id,t).then(()=>{t(J())})},e[0]=t,e[1]=s?.id,e[2]=n?.organisation_id,e[3]=r):r=e[3];const a=r;let o,l;e[4]===Symbol.for("react.memo_cache_sentinel")?(o=i.jsx(ze,{className:"text-destructive size-10"}),l=i.jsx("h2",{className:"text-xl font-semibold",children:"Archive Sub Department"}),e[4]=o,e[5]=l):(o=e[4],l=e[5]);const d=s?.name;let c;e[6]!==d?(c=i.jsxs("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:["Are you sure you want to archive"," ",i.jsx("span",{className:"font-semibold",children:d}),"? This action cannot be undone."]}),e[6]=d,e[7]=c):c=e[7];let m;e[8]===Symbol.for("react.memo_cache_sentinel")?(m=i.jsx("p",{className:"text-sm text-zinc-600 dark:text-zinc-300",children:"Archiving this sub department will also archive all its associated data. Make sure you have backed up any necessary information before proceeding."}),e[8]=m):m=e[8];let u;e[9]!==c?(u=i.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[o,l,c,m]}),e[9]=c,e[10]=u):u=e[10];let f;e[11]!==a?(f=i.jsx(ke,{handleConfirm:a}),e[11]=a,e[12]=f):f=e[12];let p;return e[13]!==u||e[14]!==f?(p=i.jsxs("div",{className:"-mt-4 text-center",children:[u,f]}),e[13]=u,e[14]=f,e[15]=p):p=e[15],p};function a2(e){return e.auth}function o2(e){return e.dialog.props}const l2=()=>{const e=H.c(31),t=V(),{user:n}=A(c2),s=A(d2),{members:r}=A(u2);let a;e[0]!==t||e[1]!==r||e[2]!==n?.organisation_id?(a=()=>{!r&&ui(n?.organisation_id,t)},e[0]=t,e[1]=r,e[2]=n?.organisation_id,e[3]=a):a=e[3];let o;if(e[4]===Symbol.for("react.memo_cache_sentinel")?(o=[],e[4]=o):o=e[4],C.useEffect(a,o),!s){let h;return e[5]===Symbol.for("react.memo_cache_sentinel")?(h=i.jsx("p",{className:"text-muted-foreground text-center",children:"No sub department data available."}),e[5]=h):h=e[5],h}let l,d,c,m,u,f;if(e[6]!==r||e[7]!==s.id||e[8]!==s.name){const h=r?.filter(y=>y?.sub_department_ids.includes(s.id));let x;e[15]===Symbol.for("react.memo_cache_sentinel")?(x=i.jsx(lr,{className:"mx-auto size-14 drop-shadow-md"}),e[15]=x):x=e[15],e[16]!==s.name?(f=i.jsxs("div",{className:"-mt-6 mb-8",children:[x,i.jsxs("h2",{className:"text-center text-xl mt-2 font-light",children:["Details of ",i.jsx("span",{className:"font-medium",children:s.name})]})]}),e[16]=s.name,e[17]=f):f=e[17],c="mt-6",e[18]===Symbol.for("react.memo_cache_sentinel")?(m=i.jsx("h3",{className:"mb-2 text-lg font-medium",children:"Members"}),u=i.jsx(fe,{className:"mb-2 -mt-2"}),e[18]=m,e[19]=u):(m=e[18],u=e[19]),l="grid grid-cols-1 gap-4 md:grid-cols-2 lg:grid-cols-3",d=h?.length>0?h.map(m2):i.jsx("p",{className:"text-muted-foreground text-sm",children:"No members."}),e[6]=r,e[7]=s.id,e[8]=s.name,e[9]=l,e[10]=d,e[11]=c,e[12]=m,e[13]=u,e[14]=f}else l=e[9],d=e[10],c=e[11],m=e[12],u=e[13],f=e[14];let p;e[20]!==l||e[21]!==d?(p=i.jsx("div",{className:l,children:d}),e[20]=l,e[21]=d,e[22]=p):p=e[22];let g;e[23]!==c||e[24]!==m||e[25]!==u||e[26]!==p?(g=i.jsxs("div",{className:c,children:[m,u,p]}),e[23]=c,e[24]=m,e[25]=u,e[26]=p,e[27]=g):g=e[27];let b;return e[28]!==f||e[29]!==g?(b=i.jsxs("section",{children:[f,g]}),e[28]=f,e[29]=g,e[30]=b):b=e[30],b};function c2(e){return e.auth}function d2(e){return e.dialog.props}function u2(e){return e.organisation}function m2(e){return i.jsx(pn,{className:"dark:bg-card overflow-hidden rounded-xl bg-white py-2 shadow-none",children:i.jsx(hn,{className:"px-4 text-sm",children:i.jsx(mi,{member:e,view:"table"})})},e.id)}const f2={organisationInternalEdit:Z0,addMember:lo,editMember:lo,archiveMember:V0,resetMemberPassword:G0,addMemberRole:oo,editMemberRole:oo,archiveMemberRole:T0,memberRoleDetails:L0,addCompany:io,editCompany:io,archiveCompany:r0,companyDetails:o0,addDepartment:ao,editDepartment:ao,archiveDepartment:y0,departmentDetails:j0,addSubDepartment:co,editSubDepartment:co,archiveSubDepartment:i2,subDepartmentDetails:l2},p2={},h2={...rp,...f2,...Ib,...Z_,...p2},_2=()=>{const e=H.c(15),t=V(),{isOpen:n,type:s,styles:r}=A(g2),a=um(),o=s?h2[s]:null;let l;e[0]!==t?(l=g=>{t(im(g))},e[0]=t,e[1]=l):l=e[1];const d=l;let c;e[2]!==r?(c=be("max-h-[80vh] md:max-h-[85vh] xl:max-h-[90vh] overflow-y-auto rounded-lg border-2 bg-white/90 md:min-w-[650px] dark:bg-[#131313]",r),e[2]=r,e[3]=c):c=e[3];let m;e[4]===Symbol.for("react.memo_cache_sentinel")?(m=i.jsxs(am,{children:[i.jsx(om,{}),i.jsx(lm,{})]}),e[4]=m):m=e[4];let u;e[5]!==o?(u=o&&i.jsx(C.Suspense,{fallback:null,children:i.jsx(o,{})}),e[5]=o,e[6]=u):u=e[6];let f;e[7]!==a||e[8]!==c||e[9]!==u?(f=i.jsxs(rm,{...a,className:c,children:[m,u]}),e[7]=a,e[8]=c,e[9]=u,e[10]=f):f=e[10];let p;return e[11]!==d||e[12]!==n||e[13]!==f?(p=i.jsx(cm,{open:n,onOpenChange:d,children:f}),e[11]=d,e[12]=n,e[13]=f,e[14]=p):p=e[14],p};function g2(e){return e.dialog}export{_2 as default};
